{"version":3,"sources":["pages/Question/Question.module.scss","pages/Start/Start.module.scss","pages/Base/Base.module.scss","pages/Question/XepHinh/XepHinh.module.scss","pages/Complete/Complete.module.scss","pages/Scan/Scan.module.scss","assets/js/effects/HoaRoi.js","components/HoaRoi/index.jsx","pages/Base/Body.jsx","pages/Base/Header.jsx","pages/Base/Overlay.jsx","pages/Base/Base.jsx","pages/Complete/Background.jsx","pages/Complete/BodyComplete.jsx","pages/Complete/Complete.jsx","components/Button/Button.jsx","components/Text/index.jsx","components/CountTime/index.jsx","pages/Question/TracNghiem/index.jsx","assets/js/fetchData.js","Provider/CacheImageContext.jsx","pages/Question/XepHinh/index.jsx","components/Toast/index.jsx","pages/Scan/ScanQr.js","pages/Scan/BodyScan.jsx","pages/Scan/Scan.jsx","pages/Question/BodyQuestion.jsx","pages/Question/Question.jsx","pages/Question/index.jsx","pages/Map/dice.js","pages/Map/robot.jsx","pages/Map/findRoad.jsx","pages/Map/PreloadImage.jsx","components/CountTime/totalTime.jsx","components/Canvas/index.jsx","pages/Map/GuideMap.jsx","components/Loading/BodyLoading.jsx","components/Loading/Loading.jsx","pages/Map/index.jsx","pages/Start/BodyStart.jsx","pages/Start/Start.jsx","pages/lose/index.jsx","pages/Test/index.jsx","pages/routes.jsx","App.jsx","index.js","components/Loading/loading.module.scss","assets/scss/base/Effects/Hoaroi.module.scss"],"names":["module","exports","Confettiful","el","this","containerEl","confettiFrequency","confettiColors","confettiAnimations","_setupElements","_renderConfetti","prototype","document","createElement","elPosition","style","position","classList","add","styleHoaroi","appendChild","confettiInterval","setInterval","console","log","confettiEl","confettiSize","Math","floor","random","confettiBackground","length","confettiLeft","offsetWidth","confettiAnimation","left","width","height","backgroundColor","removeTimeout","setTimeout","parentNode","removeChild","HoaRoiComponent","props","refContainerHoaRoi","useRef","useEffect","current","window","confettiful","HoaRoi","clearInterval","ref","className","clsx","styleHoaRoi","Body","children","isLoading","styleBase","role","top","right","zIndex","text","Header","visibleTopMain","onSetTypeModal","navigate","useNavigate","RemoveHQ","removeBack","onClick","Overlay","src","alt","Base","propsHeader","propsBody","propsOverlay","header","headerBody","body","overlay","elMain","useState","setVisibleTopMain","handleVisibleTopMain","addEventListener","removeEventListener","useLayoutEffect","store","setState","main","Background","styleComplete","BodyComplete","totalTime","setTotalTime","JSON","parse","sessionStorage","getItem","time","second","minute","caculatorTime","Complete","Button","AnimationText","size","color","fontSize","fontFamily","CountTime","firstValue","onClearTime","onBackToPrev","onChangeStatusTime","count","setCount","prev","timeOut","clearTimeout","TracNghiem","onCloseModal","questions","countdown","isChoose","setIsChoose","answer","stopTime","setStopTime","class","question","selects","map","item","index","pick","id","tabIndex","type","timeToOut","minHeight","suggest","FetchData","getData","fetch","then","response","json","data","callbackDone","urlItem","url_full","CacheImageContext","createContext","CacheImageProvider","Provider","value","XepHinh","urlImage","setUrlImage","isDone","setIsDone","dataImagesCache","useContext","imagesCache","image_id","desc","styleXepHinh","margin","border","padding","imageSrc","rows","columns","onSolved","maxHeight","Toast","dataToast","container","status","success","error","ScanQr","arrDeviceCamera","currentCameraId","html5QrCode","callbackCorrect","_start","callbackStartDone","Html5Qrcode","getCameras","devices","catch","err","alert","_changeCamera","indexCam","findIndex","cameraIdNew","stop","ignore","_displayCamera","cameraId","tempTextRes","start","fps","qrbox","decodedText","decodedResult","errorMessage","r","querySelector","styleScan","display","_checkIn","callBack","resQr","Number","isInteger","parseInt","dataMuseum","cbCorrect","cbWrong","tempDate","Date","getTime","_stopCamera","BodyScan","showText","setShowText","setDataToast","showToastCheckIn","setShowToastCheckIn","scanQr","useMemo","correct_answer","hash","dataString","stringify","setItem","Scan","config","BodyQuestion","typeQuestion","useGlobalState","styleQuestion","configCD","configQuestion","questionItem","Question","Dice","randomAngle","isDice","numberDice","setNumberDice","dice","handleDice","RobotModel","canvasRef","currentPoint","setIsCrtMoving","dataCrtMove","actionDataCrtMove","split","posArr","oldPoint","setOldPoint","innerWidth","CELL_SIZE","setCellSize","character","animationCrt","setAnimationCrt","dir","setDir","actionControl","checkDirection","oldPos","newPos","UP","DOWN","LEFT","RIGHT","handleMoveCrt","currentPoint1","Promise","resolve","warn","directionArr","i","currentStep","nextStep","push","timePerStep","TIME_PER_MOVEMENT","robotRec","getElementById","timeScale","moveLoop","a","moveDirection","frame","doIt","delay","move","decreasePixel","pixel","num","increasePixel","nextPoint","rec","delayInms","ratioPixel","documentElement","setProperty","process","findRoad","arr","heightMap","_","isEmpty","firstPoint","arrPoint","filter","includes","findFirtPoint","newArr","remove","x","y","x1","y1","pow","sort","loadImage","url","imageId","reject","img","Image","onload","onerror","Error","cacheImage","arrQXephinh","promisesUrlImage","all","arrUrlItem","promisesCacheImage","res","objImages","PreloadImage","TotalTime","onSetSesTotal","iTime","Canvas","keys","ctx","getContext","clearRect","positionX","positionY","drawImage","GuideMap","itemModal","srcImage","setTypeModal","float","marginTop","alignItems","effect","des","td","tilesetIdx","BodyLoading","faceCube","styleLoading","face","textLoading","loadingText05","crtLoading","loading","background","h1Container","cube","h1","w1","l1","l2","l3","w2","w3","h2Container","h2","h3Container","h3","Loading","elLoading","MapComponent","codebeautty","setCodebeauty","setMap","onDice","setOnDice","randomDice","setIsDice","showQuestion","setShowQuestion","setIsLoading","navigation","listQuestion","previousStep","wrong","setWrong","typeModal","eventOfRoad","allowToDice","beforeTypeEvent","setCurrentMap","arrImage","setArrImage","setSrcImage","refLayers","useReducer","oldState","action","layersMap","currentMap","layers","infoMap","layer","name","tiles","waitLoad","imgs","newLayers","newLayerCharacter","dataMap","actionDataMap","arrStep","prePoint","point","tempPrePoint","shift","cacheImageXepHinh","isCrtMoving","arrStepPoint","filterEventOfRoad","result","reduce","object","key","define_item_map","temp","Object","entries","tileSets","tileData","tile","tileSymbol","newItem","validateStep","toado","typeEvent","numberTele","typeFilterEvent","currentTele","indexOf","handleValidateMove","step","hi","pictureCha","values","charater","newCha","timeOut1","timeShowQues","backToPreviousStep","quantityWrongCur","maxWrong","oldWrong","drawLayer2","layerCanvas","nameLayer","layerCur","tilesheetX","tilesheetY","images","maps","keyMap","randomMap","setCurMap","toString","max_wrong","draw2","dataRoad","mapHeight","handleCloseModal","widthCanvas","mapWidth","heightCanvas","hidden","newPoint","timeOut2","wrongConLai","Array","from","showCountWrong","BodyStart","styleStart","Start","Lose","removeItem","MainLose","Test","headbreaker","path","element","App","routes","ReactDOM","render"],"mappings":"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","file":"static/js/main.2bae9268.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"center-flex\":\"Question_center-flex__-anrB\",\"test\":\"Question_test___t0ic\",\"between-flex\":\"Question_between-flex__1mBTr\",\"display-none\":\"Question_display-none__1GGPa\",\"bg-button\":\"Question_bg-button__284uC\",\"bg-main\":\"Question_bg-main__1h2b8\",\"bg-body\":\"Question_bg-body__2y8vy\",\"main\":\"Question_main__2FJ9F\",\"main-top\":\"Question_main-top__7jASS\",\"container-back_button\":\"Question_container-back_button__1Abn_\",\"container-home-and-question\":\"Question_container-home-and-question__J8x9q\",\"btn-mobile\":\"Question_btn-mobile__nTee-\",\"btn-scan\":\"Question_btn-scan__JEuNq\",\"btn-custom\":\"Question_btn-custom__3hNpb\",\"main-body\":\"Question_main-body__2O-Yg\",\"overlay-main\":\"Question_overlay-main__38N4X\",\"guide\":\"Question_guide__1bcUQ\",\"text-box-guide\":\"Question_text-box-guide__2RGdK\",\"icon-item-guide\":\"Question_icon-item-guide__3Ms-J\",\"body-question\":\"Question_body-question__2VXvc\",\"main-question\":\"Question_main-question__1dTCt\",\"tranformS\":\"Question_tranformS__tyM8T\",\"clock-goiy\":\"Question_clock-goiy__jXq27\",\"artifacts\":\"Question_artifacts___TfMU\",\"mySlides-artifacts\":\"Question_mySlides-artifacts__2Red6\",\"mySlides-artifacts--item\":\"Question_mySlides-artifacts--item__1qm7Q\",\"icon-choice\":\"Question_icon-choice__3vs5-\",\"container-decription-history\":\"Question_container-decription-history__ZtLVA\",\"container-suggestions\":\"Question_container-suggestions__9l6ve\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image-start\":\"Start_image-start__3ZuIg\",\"btn-start\":\"Start_btn-start__3gVGw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"center-flex\":\"Base_center-flex__3e8rV\",\"test\":\"Base_test__2CQ9W\",\"between-flex\":\"Base_between-flex__2JEdH\",\"display-none\":\"Base_display-none__nQkqB\",\"bg-button\":\"Base_bg-button__1Q_DI\",\"bg-main\":\"Base_bg-main__2wYth\",\"bg-body\":\"Base_bg-body__2lWNk\",\"main\":\"Base_main__2wifJ\",\"main-top\":\"Base_main-top__3pU-Q\",\"container-back_button\":\"Base_container-back_button__3tNFJ\",\"container-home-and-question\":\"Base_container-home-and-question__6dyvD\",\"btn-mobile\":\"Base_btn-mobile__radJB\",\"btn-scan\":\"Base_btn-scan__3JmSL\",\"btn-custom\":\"Base_btn-custom__3d8Xn\",\"main-body\":\"Base_main-body__36lCJ\",\"overlay-main\":\"Base_overlay-main__2kaKX\",\"guide\":\"Base_guide__2aDFR\",\"text-box-guide\":\"Base_text-box-guide__3l6uX\",\"icon-item-guide\":\"Base_icon-item-guide__3jTXU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"box-xepHinh\":\"XepHinh_box-xepHinh__1hXAw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"background-configration\":\"Complete_background-configration__2MB8w\",\"background-main\":\"Complete_background-main__2sZ8S\",\"background-screen-winner\":\"Complete_background-screen-winner__oyqA-\",\"image-huychuong\":\"Complete_image-huychuong__uY42S\",\"container-winner-content\":\"Complete_container-winner-content__3fSRm\",\"done-clock-text\":\"Complete_done-clock-text__lpFu7\",\"bg-winner-content\":\"Complete_bg-winner-content__3Apwm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"control-camera\":\"Scan_control-camera__xd9E0\",\"item-control-camera\":\"Scan_item-control-camera__2gMSB\",\"camera\":\"Scan_camera__1w95i\",\"view-camera\":\"Scan_view-camera__2l6vB\"};","import styleHoaroi from '../../scss/base/Effects/Hoaroi.module.scss';\r\n\r\nconst Confettiful = function(el) {\r\n    this.el = el;\r\n    this.containerEl = null;\r\n\r\n    this.confettiFrequency = 3;\r\n    this.confettiColors = ['#EF2964', '#00C09D', '#2D87B0', '#48485E', '#EFFF1D'];\r\n    this.confettiAnimations = ['slow', 'medium', 'fast'];\r\n\r\n    this._setupElements();\r\n    this._renderConfetti();\r\n};\r\n\r\nConfettiful.prototype._setupElements = function() {\r\n    const containerEl = document.createElement('div');\r\n    const elPosition = this.el.style.position;\r\n\r\n    if (elPosition !== 'relative' || elPosition !== 'absolute') {\r\n        this.el.style.position = 'relative';\r\n    }\r\n\r\n    containerEl.classList.add(styleHoaroi['confetti-container']);\r\n\r\n    this.el.appendChild(containerEl);\r\n\r\n    this.containerEl = containerEl;\r\n};\r\n\r\nConfettiful.prototype._renderConfetti = function() {\r\n    this.confettiInterval = setInterval(() => {\r\n        console.log('hoaroi');\r\n        const confettiEl = document.createElement('div');\r\n        const confettiSize = (Math.floor(Math.random() * 3) + 7) + 'px';\r\n        const confettiBackground = this.confettiColors[Math.floor(Math.random() * this.confettiColors.length)];\r\n        const confettiLeft = (Math.floor(Math.random() * this.el.offsetWidth)) + 'px';\r\n        const confettiAnimation = this.confettiAnimations[Math.floor(Math.random() * this.confettiAnimations.length)];\r\n\r\n        confettiEl.classList.add(styleHoaroi['confetti'], styleHoaroi[`confetti--animation-${confettiAnimation}`]);\r\n        confettiEl.style.left = confettiLeft;\r\n        confettiEl.style.width = confettiSize;\r\n        confettiEl.style.height = confettiSize;\r\n        confettiEl.style.backgroundColor = confettiBackground;\r\n\r\n        confettiEl.removeTimeout = setTimeout(function() {\r\n            confettiEl.parentNode.removeChild(confettiEl);\r\n        }, 3000);\r\n\r\n        this.containerEl.appendChild(confettiEl);\r\n    }, 90);\r\n};\r\n\r\n\r\n// $('.js-container').append('<link rel=\"stylesheet\" href=\"./assets/css/effects/hoaroi.css\"/>');\r\n\r\n// window.confettiful = new Confettiful(document.querySelector('.js-container'));\r\nexport default Confettiful;","import React, { useEffect, useRef } from 'react';\r\nimport styleHoaRoi from '../../assets/scss/base/Effects/Hoaroi.module.scss';\r\nimport HoaRoi from '../../assets/js/effects/HoaRoi';\r\nimport clsx from 'clsx';\r\n\r\nfunction HoaRoiComponent(props) {\r\n    const refContainerHoaRoi = useRef();\r\n\r\n    useEffect(() => {\r\n        if (refContainerHoaRoi.current) {\r\n            console.log('khoi tao hoa roi');\r\n            window.confettiful = new HoaRoi(refContainerHoaRoi.current);\r\n        }\r\n\r\n        return () => {\r\n            console.log('huy hoa roi');\r\n            clearInterval(window.confettiful.confettiInterval);\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n    <div\r\n        ref={refContainerHoaRoi}\r\n        className={clsx(styleHoaRoi['container-effect'])}\r\n    ></div>\r\n    );\r\n}\r\n\r\nexport default HoaRoiComponent;","import clsx from 'clsx';\r\nimport styleBase from './Base.module.scss';\r\n\r\nfunction Body({children,isLoading, ...props}) {\r\n    // console.log(`props`, props);\r\n    // console.log(`children`, children);\r\n    return (\r\n        <>\r\n            <div className={clsx(styleBase['main-body'])} >\r\n                {children}\r\n                {isLoading && \r\n                    <>\r\n                        <div className=\"spinner-border text-primary\" role=\"status\" style={{position: 'fixed', top: '50%', right: '50%'}}>\r\n                            <span className=\"sr-only\">Loading...</span>\r\n                        </div>\r\n                        <span style={{position: 'fixed', top: '50%', right: '45%', zIndex: 3000}}>{props?.text}</span>\r\n                    </>\r\n                    \r\n                }\r\n               \r\n            </div>\r\n        </>\r\n\r\n    );\r\n}\r\n\r\nexport default Body;","import clsx from 'clsx';\r\n// import React, { useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nimport styleBase from './Base.module.scss';\r\n\r\n\r\nfunction Header({ children, visibleTopMain,onSetTypeModal, ...props }) {\r\n    let navigate = useNavigate();\r\n    // console.log(`propsHeader`, props);\r\n    const { RemoveHQ, removeBack } = props;\r\n\r\n    // const elTop = useRef();\r\n    // console.log(`visibleTopMain`, visibleTopMain);\r\n\r\n    return (\r\n        <div\r\n            className={clsx\r\n                (\r\n                    styleBase['main-top']\r\n                    , 'row'\r\n                    , 'gx-0'\r\n                    , {\r\n                        \"position-fixed\": visibleTopMain,\r\n                        [styleBase['display-none']]: !visibleTopMain\r\n                    }\r\n\r\n                )\r\n            }>\r\n            <div className={clsx(\r\n                {\r\n                    [styleBase['display-none']]: removeBack\r\n                }\r\n            )}>\r\n                {/* <div className={clsx(styleBase['container-back_button'])}>\r\n                    <i\r\n                        onClick={() => navigate('/start')}\r\n                        className={clsx('bi', 'bi-chevron-left')}\r\n                    >\r\n                    </i>\r\n                </div> */}\r\n            </div>\r\n            <div\r\n                className={clsx(\r\n                    styleBase['between-flex']\r\n                    , styleBase['container-home-and-question'],\r\n                    { [styleBase['display-none']]: RemoveHQ }\r\n\r\n                )}\r\n            >\r\n                <i onClick={() => navigate('/start')} className={clsx('bi', 'bi-house-fill')}></i>\r\n                <i className={clsx('bi', 'bi-patch-question-fill')} onClick={() => {\r\n                    onSetTypeModal('map');\r\n                }}></i>\r\n            </div>\r\n            {children}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport styleBase from './Base.module.scss';\r\n\r\nfunction Overlay({ children, ...props }) {\r\n    return (\r\n        <div className={clsx(styleBase['overlay-main'])}>\r\n            <div className={clsx(styleBase['guide'])}>\r\n                <img className={clsx(styleBase['item-guide'], styleBase['image-guide'])} src=\"./image/Bot-1 1.png\" alt=\"\" />\r\n\r\n                <div\r\n                    className={clsx(styleBase['bg-main'], styleBase['item-guide'], styleBase['text-box-guide'])}>\r\n                    <p>\r\n                        Xem hộp thành tựu để biết những điều đã đạt được. Cùng nhau giải đố để đi đến địa điểm tiếp theo. Và scan khi tới nơi.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Overlay;","import React, { useEffect, useLayoutEffect, useRef, useState } from 'react';\r\nimport clsx from 'clsx';\r\nimport styleBase from './Base.module.scss';\r\n\r\nimport Body from './Body';\r\nimport Header from './Header';\r\nimport Overlay from './Overlay';\r\nimport { store } from 'state-pool';\r\n\r\n\r\n\r\nfunction Base({ isLoading, onSetTypeModal, ...props }) {\r\n    // console.log(`styleBase`, styleBase);\r\n\r\n\r\n\r\n    var { propsHeader, propsBody, propsOverlay } = props;\r\n    var { top, header, headerBody, body, overlay } = props;\r\n    const elMain = useRef();\r\n\r\n    const [visibleTopMain, setVisibleTopMain] = useState(false);\r\n\r\n    useEffect(() => {\r\n        function handleVisibleTopMain() {\r\n            setVisibleTopMain(true);\r\n        }\r\n\r\n        elMain.current.addEventListener('scroll', handleVisibleTopMain);\r\n\r\n        return () => elMain.current?.removeEventListener('scroll', handleVisibleTopMain);\r\n\r\n    }, [])\r\n\r\n    if (visibleTopMain) {\r\n        setTimeout(() => {\r\n            setVisibleTopMain(false);\r\n        }, 2000)\r\n    }\r\n\r\n\r\n    useLayoutEffect(() => {\r\n        store.setState('elMain', elMain);\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            <div ref={elMain} className={clsx('container-sm', 'border', styleBase.main)}>\r\n                {top}\r\n                <Header {...propsHeader} visibleTopMain={visibleTopMain} onSetTypeModal={onSetTypeModal}>\r\n                    {header}\r\n                </Header>\r\n                {headerBody}\r\n                <Body isLoading={isLoading} {...props}>\r\n                    {body}\r\n                </Body>\r\n                <Overlay>\r\n                    {overlay}\r\n                </Overlay>\r\n                {props.children}\r\n            </div>\r\n        </>\r\n\r\n    );\r\n}\r\n\r\nexport default Base;\r\n","import styleComplete from './Complete.module.scss';\r\nimport clsx from 'clsx';\r\n\r\nfunction Background(props) {\r\n    return (\r\n        <div className={clsx(styleComplete['background-main'])}>\r\n            <div className={clsx(styleComplete['background-screen-winner'])}></div>\r\n            <div className={clsx(styleComplete['image-huychuong'])}></div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Background;","import React, {useState, useEffect} from 'react';\r\nimport styleComplete from './Complete.module.scss';\r\nimport styleBase from '../Base/Base.module.scss';\r\nimport clsx from 'clsx';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './complete.css'\r\nfunction BodyComplete(props) {\r\n\r\n    const [totalTime, setTotalTime] = useState(0);\r\n    useEffect(() => {\r\n        setTotalTime(JSON.parse(sessionStorage.getItem('totalTime')));\r\n    }, [sessionStorage.getItem('totalTime')])\r\n    const caculatorTime = (time) => {\r\n        const second = time % 60 >=10 ?  time % 60 : `0${ time % 60}`;\r\n        const minute = Math.floor(time / 60)  >=10 ?  Math.floor(time / 60) : `0${ Math.floor(time / 60)}`;\r\n        return `${minute}:${second}`;\r\n    }\r\n    const navigate = useNavigate();\r\n    return (\r\n        <>\r\n        <div className={clsx('row', styleComplete['container-winner-content'])} >\r\n            <div className={clsx(styleComplete['done-clock'])}>\r\n                <p className={clsx('text-center', 'fw-normal', 'fs-3', styleComplete['done-clock-text'])}>{caculatorTime(totalTime)}</p>\r\n            </div>\r\n            <div>\r\n                <p className={clsx('text-center', 'fw-bolder', 'fs-4')}>KẺ HỦY DIỆT LỊCH SỬ</p>\r\n            </div>\r\n            <div style={{ position: \"relative\" }}>\r\n                <p className={clsx('text-center')}>Thật tuyệt vời, bạn đã là một trong những người xuất sắc hoàn thành tour khám phá bảo tàng</p>\r\n\r\n                <div className={clsx(styleComplete['bg-winner-content'])}></div>\r\n            </div>\r\n\r\n            <div className={clsx(styleBase['center-flex'], 'mt-2', 'row')}>\r\n                <div>\r\n                    <p className=\"text-center\">Hà Nội, ngày 14-02-2021</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"row d-flex align-items-center justify-content-center mt-2 \">\r\n                <div \r\n                onClick={() => navigate('/start')}\r\n                className={clsx('col-4', 'btn', styleBase['btn-mobile'], styleBase['bg-button'])}\r\n                >\r\n                    CHIA SẺ\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </>\r\n    );\r\n}\r\n\r\nexport default BodyComplete;","import React from 'react';\r\nimport HoaRoiComponent from '../../components/HoaRoi';\r\nimport { Base } from '../Base';\r\nimport Background from './Background';\r\nimport BodyComplete from './BodyComplete';\r\n\r\n\r\nfunction Complete(props) {\r\n\r\n    return (\r\n       <Base body={<BodyComplete/>} top={<Background/>}>\r\n           <HoaRoiComponent/>\r\n       </Base>\r\n    );\r\n}\r\n\r\nexport default Complete;","import React from 'react';\r\nimport clsx from 'clsx';\r\n\r\nfunction Button({children,...props}) {\r\n    console.log(`props`, props);\r\n    return (\r\n       <button className={clsx('btn', 'btn-primary')}  {...props}>{children ?? 'rỗng'}</button>\r\n    );\r\n}\r\n\r\nexport default Button;","import React from 'react';\r\n\r\nfunction AnimationText({text, top, left, size, color}) {\r\n    return (\r\n        <div className='animate__bounceInDown animate__animated' \r\n        style={{position: 'fixed', top: top || 0, left: left || 0, zIndex: 2, fontSize: size || '50px', fontFamily: 'cursive', color: color || 'black' }} >\r\n            {text}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AnimationText;","import React, { useEffect, useRef, useState } from 'react';\r\nimport AnimationText from '../Text';\r\nimport './counttime.scss'\r\nfunction CountTime({firstValue, onClearTime, onBackToPrev, onChangeStatusTime}) {\r\n    const [count, setCount] = useState(firstValue);\r\n    const time = useRef();\r\n    const [currentTime, setCurrentTime] = useState();\r\n    const stopTime = () => {\r\n        clearInterval(time.current);\r\n    }\r\n    const startTime = () => {\r\n        time.current = setInterval(() => {\r\n            setCount(prev => prev-1);\r\n        }, 1000)\r\n    }\r\n    useEffect(() => {\r\n        time.current = setInterval(() => {\r\n            setCount(prev => prev-1);\r\n        }, 1000)\r\n        \r\n       return () => clearInterval(time.current)\r\n    },[])\r\n    useEffect(() => {\r\n        if(count == 0) {\r\n            clearInterval(time.current);\r\n           const timeOut = setTimeout(() => {\r\n            \r\n            onBackToPrev && onBackToPrev();\r\n            onClearTime && onClearTime('timeover');\r\n            clearTimeout(timeOut)\r\n           }, 1500)\r\n        }\r\n    }, [count]);\r\n    //dung thoi gian\r\n    useEffect(() => {\r\n        if(onChangeStatusTime) {\r\n            stopTime();\r\n        }\r\n    },[onChangeStatusTime]);\r\n\r\n    const caculatorTime = (time) => {\r\n        const second = time % 60 >=10 ?  time % 60 : `0${ time % 60}`;\r\n        const minute = Math.floor(time / 60)  >=10 ?  Math.floor(time / 60) : `0${ Math.floor(time / 60)}`;\r\n        return `${minute}:${second}`;\r\n    }\r\n    return (\r\n        <div className={`time_count ${count <= 5 ? \"blink-text-count-time\": \"\"}`} >\r\n            {caculatorTime(count)}\r\n            {count == 0 &&  <AnimationText text={\"Hết giờ\"} top={'25%'} left={'40%'} size={'100px'}/>}\r\n        </div>   \r\n    );\r\n}\r\n\r\nexport default CountTime;","import React, { useState, useRef, useEffect } from 'react';\r\nimport CountTime from '../../../components/CountTime';\r\nimport './tracnghiem.scss'\r\nfunction TracNghiem({ onCloseModal, questions, onBackToPrev, countdown }) {\r\n  const [isChoose, setIsChoose] = useState();\r\n  const toast = useRef();\r\n  const [pick, setPick] = useState(false);\r\n  const answer = useRef(5);\r\n  const [stopTime, setStopTime] = useState(false);\r\n\r\n\r\n  // useEffect(() => {\r\n  //   return () => {\r\n  //     const backDrop = document.querySelector('.modal-backdrop');\r\n  //     if(backDrop.classList.contains('show')) {\r\n  //         backDrop.remove();\r\n  //     }\r\n  //   }\r\n  // }, [])\r\n  const AreYouSureAboutThat = () => {\r\n    return (\r\n      <div className=\"modal fade\" id=\"exampleModal\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n            {/* <div className=\"modal-header\">\r\n                  <h5 className=\"modal-title\" id=\"exampleModalLabel\">Modal title</h5>\r\n                  <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                </div> */}\r\n            <div className=\"modal-body\">\r\n              Bạn có chắc muốn chọn đáp án này?\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button type=\"button\" className=\"btn btn-secondary\" data-bs-dismiss=\"modal\" onClick={() => {\r\n                setIsChoose(5);\r\n                answer.current = 5;\r\n              }}>Hủy</button>\r\n              <button type=\"button\" className=\"btn btn-primary\" data-bs-dismiss=\"modal\" onClick={() => {\r\n                setStopTime(true);\r\n                const time = setTimeout(() => {\r\n                  setIsChoose(5);\r\n                  clearTimeout(time);\r\n                }, 2000);\r\n                const timeToOut = setTimeout(() => {\r\n                  if (answer.current != questions?.answer) {\r\n                    onCloseModal('timeover');\r\n                    onBackToPrev();\r\n                  } else onCloseModal();\r\n                  clearTimeout(timeToOut);\r\n                }, 4000)\r\n              }}>Chọn</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  const modalSuggest = () => {\r\n    return (\r\n      <div className=\"modal fade\" tabIndex=\"-1\" id=\"modalSuggest\" aria-labelledby=\"modalSuggest\" aria-hidden=\"true\">\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n            {/* <div className=\"modal-header\">\r\n              <h5 className=\"modal-title\">Gợi ý</h5>\r\n            </div> */}\r\n            <div className=\"modal-body d-flex align-items-center justify-content-center\" style={{ minHeight: \"100px\" }}>\r\n              {/* <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button> */}\r\n              Gợi ý: {questions?.suggest}\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n     \r\n        <div className=\"count-time\">\r\n        <i class=\"bi bi-alarm-fill\"></i>\r\n          <CountTime firstValue={countdown} onClearTime={onCloseModal} onBackToPrev={onBackToPrev} onChangeStatusTime={stopTime} />\r\n           \r\n        </div>\r\n\r\n        <div className=\"question-box\">\r\n          <div className=\"row question-item content-question\">\r\n            <div className='text-question col-10 shadow'>\r\n              {questions.question}\r\n\r\n              <div className=\"popup-suggest border\" data-bs-toggle=\"modal\" data-bs-target=\"#modalSuggest\">\r\n                <i class=\"bi bi-question\"></i>\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"question-item content-selects\">\r\n            {questions.selects.map((item, index) => {\r\n              return (\r\n                <div key={index} data-bs-toggle=\"modal\" data-bs-target={answer.current == 5 ?\"#exampleModal\" : \"\"}\r\n                  className='row content-select'\r\n                >\r\n                  <div className={`text-select col-10 shadow-sm ${isChoose == index ? 'choose' : ''} ${answer.current == index && isChoose == 5 ? answer.current == questions?.answer ? 'blink-text' : 'wrong' : ''}`}\r\n                    onClick={() => {\r\n                      if(answer.current == 5) {\r\n                        setIsChoose(index);\r\n                        const pick = setTimeout(() => {\r\n                          answer.current = index;\r\n                          clearTimeout(pick)\r\n                        }, 0)\r\n                      }\r\n                      \r\n                    }}\r\n                  >\r\n                    {item}\r\n                  </div>\r\n                </div>\r\n\r\n\r\n              )\r\n            })}\r\n          </div>\r\n        </div>\r\n        {/* <div className='suggest'>\r\n          Gợi ý: {questions?.suggest}\r\n        </div> */}\r\n        {AreYouSureAboutThat()}\r\n        {modalSuggest()}\r\n     \r\n    </>\r\n\r\n  );\r\n}\r\n\r\nexport default TracNghiem;","import { isNumber } from \"lodash\";\r\n\r\nclass FetchData {\r\n    question(getData) {\r\n        fetch('https://api.npoint.io/658232b33eb69c8bddc7')\r\n            .then(response => response.json())\r\n            .then(data => {\r\n\r\n                console.log(data);\r\n                getData(data);\r\n            });\r\n    }\r\n    static dataMuseum(id, callbackDone) {\r\n        console.log('fect data museum');\r\n\r\n\r\n        fetch(`https://hcloud.trealet.com/apps_dev/btl/nhom08/lib/api/api.php?id=${id}&file`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(data);\r\n                if (data) {\r\n                    callbackDone(data);\r\n                    return true;\r\n                } else {\r\n                    callbackDone(false);\r\n                    return false;\r\n                }\r\n            });\r\n    }\r\n    static urlItem(id, callbackDone) {\r\n        console.log('fect url item');\r\n\r\n        fetch(`https://hcloud.trealet.com/apps_dev/btl/nhom08/lib/api/api.php?id=${id}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                // console.log(data);\r\n                if (data) {\r\n                    const urlItem = 'https://hcloud.trealet.com' + data.url_full || 'https://hcloud.trealet.com/albums/Nhom00/Data/nhom8/pexels-photo-326055.jpeg';\r\n                    callbackDone(urlItem);\r\n                    return true;\r\n                } else {\r\n                    callbackDone(false);\r\n                    return false;\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n\r\nexport default FetchData;","import { createContext } from \"react\";\r\n\r\nconst CacheImageContext = createContext();\r\n\r\nfunction CacheImageProvider({ children, ...props }) {\r\n    console.log(`prop context`, props);\r\n  \r\n    return (\r\n        <CacheImageContext.Provider value={{...props }}>\r\n            {children}\r\n        </CacheImageContext.Provider>\r\n    );\r\n}\r\n\r\nexport { CacheImageContext, CacheImageProvider };","import React, { useContext, useEffect, useState } from 'react';\r\nimport CountTime from '../../../components/CountTime';\r\nimport { JigsawPuzzle } from 'react-jigsaw-puzzle/lib'\r\nimport 'react-jigsaw-puzzle/lib/jigsaw-puzzle.css'\r\nimport FetchData from '../../../assets/js/fetchData';\r\n\r\nimport styleXepHinh from './XepHinh.module.scss'\r\nimport clsx from 'clsx';\r\nimport AnimationText from '../../../components/Text';\r\nimport { CacheImageContext } from '../../../Provider/CacheImageContext';\r\n\r\n\r\n    \r\n\r\nfunction XepHinh({ onCloseModal, questions, onBackToPrev,countdown }) {\r\n    const [urlImage, setUrlImage] = useState(false);\r\n    const [isDone, setIsDone] = useState(false);\r\n    const dataImagesCache = useContext(CacheImageContext);\r\n    const [stopTime, setStopTime] = useState(false);\r\n    useEffect(() => {\r\n        // FetchData.urlItem(questions.image_id, (urlImage) => {\r\n        //     setUrlImage(urlImage);\r\n        // }\r\n        // )\r\n        const urlImage = dataImagesCache.imagesCache[questions.image_id];\r\n        setUrlImage(urlImage.src);\r\n    }, [])\r\n    const modalSuggest = () => {\r\n        return (\r\n            <div className=\"modal fade\" tabIndex=\"-1\" id=\"modalSuggestXepHinh\" aria-labelledby=\"modalSuggestXepHinh\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog\">\r\n                    <div className=\"modal-content\">\r\n                        {/* <div className=\"modal-header\">\r\n                  <h5 className=\"modal-title\">Gợi ý</h5>\r\n                </div> */}\r\n                        <div className=\"modal-body d-flex align-items-center justify-content-center\" style={{ minHeight: \"100px\" }}>\r\n                            {/* <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button> */}\r\n                            <div className=\"container\">\r\n                                <div className=\"row mt-2\">\r\n                                    <span className='text-center'>Hình mẫu</span>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    {urlImage && <img className='mx-auto' src={urlImage} style={{ maxHeight: '50vh' }} />}\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div style={{\r\n                'touchAction': 'none'\r\n            }}>\r\n\r\n                <div className=\"count-time\" >\r\n                    <i class=\"bi bi-alarm-fill\"></i>\r\n                    <CountTime firstValue={countdown} onClearTime={onCloseModal} onBackToPrev={onBackToPrev} onChangeStatusTime={stopTime}/>\r\n\r\n                </div>\r\n                 {isDone && <AnimationText text={\"Hoàn thành\"} top={'30%'} left={'38%'} size={'80px'}/>} \r\n                <div className=\"question-box\">\r\n                    <div className=\"row question-item content-question\">\r\n                        <div className='text-question col-10 shadow'>\r\n                            {questions.desc}\r\n                            <div className=\"popup-suggest border\" data-bs-toggle=\"modal\" data-bs-target=\"#modalSuggestXepHinh\">\r\n                                <i class=\"bi bi-question\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div\r\n                        className={clsx('question-item row', styleXepHinh['box-xepHinh'])}\r\n                    >\r\n                         <div className='col-10' style={{margin: 'auto', border: '1px solid black', padding: 0}}>\r\n                         {urlImage && <JigsawPuzzle\r\n                            imageSrc={urlImage}\r\n                            rows={2}\r\n                            columns={3}\r\n                            onSolved={() => {\r\n                                setIsDone(true);\r\n                                setStopTime(true)\r\n                                const timeOut = setTimeout(() => {\r\n                                    onCloseModal();\r\n                                    clearTimeout(timeOut)\r\n                                },1500)\r\n                            }}\r\n                        />}\r\n                         </div>\r\n                        \r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            {modalSuggest()}\r\n        </>\r\n\r\n    )\r\n\r\n}\r\n\r\nexport default XepHinh;","import React, { useEffect, useRef, useState } from 'react';\r\nimport './index.scss';\r\nimport { ToastContainer, ToastMessage } from \"react-toastr\";\r\nfunction Toast({ dataToast }) {\r\n    // const [count, setCount] = useState(time || 3);\r\n    // const timeRef = useRef();\r\n    const container = useRef();\r\n    // useEffect(() => {\r\n    //     timeRef.current = setInterval(() => {\r\n    //         setCount(prev => prev - 1);\r\n    //     }, 1000);\r\n\r\n    // }, []);\r\n\r\n    // useEffect(() => {\r\n    //     if (count == 0) {\r\n    //         clearInterval(timeRef.current);\r\n    //     }\r\n    // }, [count])\r\n\r\n\r\n    useEffect(() => {\r\n        console.log('dataToast',dataToast);\r\n        if (dataToast.status == 'success' && container.current) {\r\n            container.current.success(dataToast.text);\r\n        } else if (dataToast.status == 'wrong' && container.current) {\r\n            container.current.error(dataToast.text);\r\n        }\r\n    }, [dataToast])\r\n\r\n    const render = () => {\r\n\r\n        // if (count == 0) return <></>;\r\n        // else \r\n        return (\r\n            // <div className='row toast_map' style={{top: top || 0, left: left || 0 }}>\r\n            //     <div className=\"col-sm-2\" >\r\n            //         {type == 'suc' ?  <img src=\"https://img.icons8.com/external-tal-revivo-filled-tal-revivo/12/000000/external-verification-tick-mark-for-digital-certification-document-basic-filled-tal-revivo.png\" />\r\n\r\n            //         : <img src=\"https://img.icons8.com/color-glass/12/000000/break.png\" />\r\n            //         }\r\n            //     </div>\r\n            //     <div className=\"col-sm-10\" style={{ textAlign: 'left', paddingLeft: '2px'}}>\r\n            //         <span className=\"text_toast_map\">{text}</span>\r\n            //     </div>\r\n            // </div>\r\n            <ToastContainer\r\n                ref={container}\r\n                className=\"toast-top-right\"\r\n            />\r\n        )\r\n    }\r\n    return (\r\n        <ToastContainer\r\n            ref={container}\r\n            className=\"toast-top-right\"\r\n        />\r\n    )\r\n\r\n    // return render()\r\n\r\n\r\n}\r\n\r\nexport default Toast;","import { Html5Qrcode } from 'html5-qrcode';\r\nimport styleScan from './Scan.module.scss';\r\nimport FetchData from '../../assets/js/fetchData';\r\n\r\nconst ScanQr = function() {\r\n    this.arrDeviceCamera = null;\r\n    this.currentCameraId = null;\r\n    this.html5QrCode = null;\r\n    this.callbackCorrect = {};\r\n    // this._start();\r\n    // this._changeCamera();\r\n    // this._displayCamera();\r\n    console.log('khoi tao scan qr code');\r\n\r\n}\r\n\r\nScanQr.prototype._start = function(callbackStartDone = {}) {\r\n    Html5Qrcode.getCameras().then(devices => {\r\n        console.log(devices);\r\n        if (devices && devices.length) {\r\n            this.arrDeviceCamera = devices;\r\n            // console.log(this.arrDeviceCamera);\r\n            // this._displayCamera(this.arrDeviceCamera[0].id);\r\n            // this._checkIn(this.arrDeviceCamera[0].id);\r\n            console.log('ok camera');\r\n            callbackStartDone();\r\n        }\r\n    }).catch(err => {\r\n        alert('Người dùng không cấp quyền truy cập');\r\n    });\r\n}\r\n\r\n\r\nScanQr.prototype._changeCamera = function() {\r\n    console.log('change');\r\n    if (this.arrDeviceCamera && this.arrDeviceCamera.length >= 2) {\r\n        var indexCam = this.arrDeviceCamera.findIndex(item => item.id == this.currentCameraId);\r\n        console.log(indexCam);\r\n        var cameraIdNew = this.arrDeviceCamera[(indexCam + 1) % this.arrDeviceCamera.length].id;\r\n        this.html5QrCode.stop().then((ignore) => {\r\n            this._displayCamera(cameraIdNew);\r\n            // QR Code scanning is stopped.\r\n        }).catch((err) => {\r\n            // Stop failed, handle it.\r\n        });\r\n\r\n    }\r\n\r\n}\r\n\r\nScanQr.prototype._displayCamera = function(cameraId) {\r\n    const html5QrCode = new Html5Qrcode( /* element id */ \"reader\");\r\n    this.html5QrCode = html5QrCode;\r\n    this.currentCameraId = cameraId;\r\n    var tempTextRes = '';\r\n\r\n    html5QrCode.start(\r\n            cameraId, {\r\n                fps: 10, // Optional, frame per seconds for qr code scanning\r\n                qrbox: 250\r\n            },\r\n            (decodedText, decodedResult) => {\r\n                // do something when code is read\r\n                console.log(`decodedText`, decodedText);\r\n                // console.log(`decodedResult`, decodedResult);\r\n\r\n                this.callbackCorrect({ decodedText, tempTextRes });\r\n                tempTextRes = decodedText;\r\n\r\n\r\n\r\n            },\r\n            (errorMessage) => {\r\n                // parse error, ignore it.\r\n            }).then(function(r) {\r\n            console.log('sau khoi tao camera');\r\n            document.querySelector(`.${styleScan['control-camera']}`).style.display = \"flex\";\r\n        })\r\n        .catch((err) => {\r\n            // Start failed, handle it.\r\n            console.log('loi khoi tao camera');\r\n        });\r\n}\r\n\r\n\r\nScanQr.prototype._checkIn = function(callBack = {}) {\r\n    console.log('check in');\r\n\r\n    this._start(() => {\r\n        this.callbackCorrect = function(resQr) {\r\n\r\n            // console.log('getDataMuseum', Number.isInteger(parseInt(resQr.decodedText)));\r\n            if (resQr.tempTextRes != resQr.decodedText) {\r\n                console.log('ok', Number.isInteger(parseInt(resQr.decodedText)));\r\n                if (Number.isInteger(parseInt(resQr.decodedText))) {\r\n                    FetchData.dataMuseum(resQr.decodedText, (data) => {\r\n                        console.log(data);\r\n                        callBack(data)\r\n                    });\r\n\r\n                } else {\r\n                    callBack(false)\r\n                }\r\n            }\r\n        }\r\n        if (this.arrDeviceCamera) {\r\n            this._displayCamera(this.arrDeviceCamera[0].id);\r\n        }\r\n\r\n    })\r\n}\r\nScanQr.prototype.question = function(answer, { cbCorrect = {}, cbWrong = {} }) {\r\n    console.log('scan dap an queston');\r\n    let tempDate = new Date().getTime();\r\n    this._start(() => {\r\n        this.callbackCorrect = function(resQr) {\r\n            if (resQr.tempTextRes != resQr.decodedText && answer === resQr.decodedText) {\r\n                // console.log('ok');\r\n                console.log('dap an chinh xac');\r\n                cbCorrect('right');\r\n            } else if (answer !== resQr.decodedText) {\r\n                const timeWaiting = new Date().getTime() - tempDate;\r\n\r\n                if (timeWaiting > 5 * 1000) {\r\n                    cbWrong();\r\n                    console.log(tempDate);\r\n                    tempDate = new Date().getTime();\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        if (this.arrDeviceCamera) {\r\n            this._displayCamera(this.arrDeviceCamera[0].id);\r\n        }\r\n    })\r\n}\r\n\r\n\r\nScanQr.prototype._stopCamera = function() {\r\n    this.html5QrCode.stop().then((ignore) => {\r\n        console.log('stop camera');\r\n        // QR Code scanning is stopped.\r\n    }).catch((err) => {\r\n        // Stop failed, handle it.\r\n    });\r\n}\r\n\r\n\r\nexport default ScanQr;","import clsx from 'clsx';\r\nimport { useEffect, useMemo, useRef, useState } from 'react';\r\nimport styleScan from './Scan.module.scss';\r\nimport ScanQr from './ScanQr.js';\r\n// import toastr from 'reactjs-toastr';\r\n// import 'reactjs-toastr/lib/toast.css';\r\nimport 'animate.css';\r\nimport AnimationText from '../../components/Text';\r\nimport Toast from '../../components/Toast';\r\nimport { useNavigate } from 'react-router-dom';\r\nfunction BodyScan({ ...props }) {\r\n    const navigate = useNavigate();\r\n    let { questions, onClearTime, onBackToPrev } = props;\r\n\r\n    const [showText, setShowText] = useState(false);\r\n    const [dataToast, setDataToast] = useState({});\r\n    const [showToastCheckIn, setShowToastCheckIn] = useState(false);\r\n\r\n    const scanQr = useMemo(() => {\r\n        console.log('khoi tao');\r\n        return new ScanQr();\r\n    }, []);\r\n    // const preventSpamToast = useRef(0);\r\n    useEffect(() => {\r\n        console.log(`props`, props);\r\n        console.log(`question scan`, questions);\r\n        // scanQr._start();\r\n        return () => scanQr._stopCamera();\r\n    }, []);\r\n\r\n    // console.log(typeof preventSpamToast);\r\n\r\n    // const valueOfToast = (value) => {\r\n    //     console.log(\"value\", value);\r\n    //     if (value == 'wrong') {\r\n    //         console.log(\"preventSpamToast\", preventSpamToast.current);\r\n    //         if (preventSpamToast.current == 0) {\r\n    //             setShowText(value);\r\n    //             preventSpamToast.current = 1;\r\n    //             const timeOut = setTimeout(() => {\r\n    //                 preventSpamToast.current = 0;\r\n    //                 setShowText(false);\r\n    //                 clearTimeout(timeOut);\r\n    //             }, 3000)\r\n    //         }\r\n\r\n    //     } else {\r\n    //         setShowText(value);\r\n    //         setTimeout(() => {\r\n    //             setShowText(false);\r\n    //             onClearTime();\r\n    //         }, 3000);\r\n    //     }\r\n\r\n    // }\r\n    // useEffect(() => {\r\n    //     // console.log(\"oi odi oi\");\r\n    //     if (questions) {\r\n    //         console.log(\"preventSpamToast\", preventSpamToast);\r\n    //         scanQr.question(questions.correct_answer, (value) => {\r\n    //             console.log('callback question');\r\n\r\n\r\n    //             return valueOfToast(value);\r\n    //         });\r\n    //     } else {\r\n    //         console.log('wrong');\r\n    //         scanQr._checkIn();\r\n    //     }\r\n    // }, [])\r\n\r\n    useEffect(() => {\r\n        // console.log(\"oi odi oi\");\r\n        if (questions) {\r\n            // console.log(\"preventSpamToast\", preventSpamToast);\r\n            // scanQr.question(questions.correct_answer, () => {\r\n            //     console.log('dap an chinh xac');\r\n\r\n\r\n            //     // return valueOfToast(value);\r\n            // }, () => {\r\n            //     console.log('dap an sai');\r\n            // });\r\n\r\n            scanQr.question(questions.correct_answer, {\r\n                cbCorrect: () => {\r\n                    console.log('dap an chinh xac');\r\n                    setDataToast({ status: 'success', text: 'Chúc mừng bạn đã tìm đúng địa điểm', })\r\n                    setShowText(true);\r\n                    setTimeout(() => {\r\n                        setShowText(false);\r\n                        onClearTime();\r\n                    }, 2000)\r\n                },\r\n                cbWrong: () => {\r\n                    console.log('dap an sai');\r\n                    setDataToast({ status: 'wrong', text: 'Địa điểm hiện tại không chính xác', hash: new Date() })\r\n                    setShowText(true);\r\n                    const timeOut = setTimeout(() => {\r\n                        setShowText(false);\r\n                        clearTimeout(timeOut);\r\n                    }, 2000);\r\n\r\n                }\r\n            })\r\n\r\n        } else {\r\n            scanQr._checkIn((data) => {\r\n                if (data) {\r\n                    setDataToast({ status: 'success', text: 'Check in địa điểm thành công' })\r\n                    setShowToastCheckIn(true);\r\n                    const dataString = JSON.stringify(data);\r\n                    // console.log(dataString);\r\n                    sessionStorage.setItem('dataMap', dataString);\r\n                    setTimeout(() => {\r\n                        setShowToastCheckIn(false);\r\n                        navigate('/map')\r\n                    }, 2000);\r\n\r\n                } else {\r\n                    setDataToast({ status: 'wrong', text: 'Địa điểm này không tồn tại' })\r\n                    setShowToastCheckIn(true);\r\n                    setTimeout(() => {\r\n                        setShowToastCheckIn(false);\r\n                    }, 2000);\r\n                }\r\n            });\r\n        }\r\n    }, [])\r\n\r\n\r\n\r\n\r\n    const modalSuggest = () => {\r\n        return (\r\n            <div className=\"modal fade\" tabIndex=\"-1\" id=\"modalSuggest\" aria-labelledby=\"modalSuggest\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog\">\r\n                    <div className=\"modal-content\">\r\n                        {/* <div className=\"modal-header\">\r\n                  <h5 className=\"modal-title\">Gợi ý</h5>\r\n                </div> */}\r\n\r\n                        <div className=\"modal-body d-flex align-items-center justify-content-center\" style={{ minHeight: \"100px\" }}>\r\n                            {/* <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button> */}\r\n                            Gợi ý: {questions?.suggest}\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            {showToastCheckIn ? <Toast {...{ dataToast }}></Toast> : <></>}\r\n            <div className={clsx(styleScan['camera'])}>\r\n                <div className={clsx('row')}>\r\n                    <div className={clsx('col', styleScan['view-camera'])} >\r\n                        <div className={clsx('w-100')} id=\"reader\"></div>\r\n                    </div>\r\n                </div>\r\n                <div className={clsx('row', 'flex-grow-1', styleScan['control-camera'])} >\r\n                    <div className={clsx('text-center', 'col-6', styleScan['item-control-camera'])} >\r\n                        <i className={clsx('bi', 'bi-brightness-high')} ></i>\r\n                    </div>\r\n                    <div\r\n                        className={clsx('text-center', 'col-6', styleScan['item-control-camera'], styleScan['switch-camera'])} >\r\n                        <i\r\n                            onClick={() => {\r\n                                scanQr._changeCamera();\r\n                            }}\r\n                            className={clsx('bi', 'bi-camera')}\r\n                        >\r\n                        </i>\r\n                        {/* <i className={clsx('bi', 'bi-camera-fill',)}></i> */}\r\n                        {/* {showText && <AnimationText text={\"Chính xác\"} size={'100px'} top={'30%'} left={'36%'} color={'green'}/>} */}\r\n                        {/* {showText == 'right' ? <Toast text={\"Hoàn toàn chính xác\"} type={'suc'} top={'5%'} left={'46%'} time={3} />\r\n                        : showText == 'wrong' ? <Toast text={\"Sai rồi\"} type={'wrong'} top={'5%'} left={'46%'} time={3} /> : <></>\r\n\r\n                    } */}\r\n\r\n                        {showText ? <Toast {...{ dataToast }} /> : <></>}\r\n                    </div>\r\n                    {modalSuggest()}\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default BodyScan;","import CountTime from '../../components/CountTime';\r\nimport Toast from '../../components/Toast';\r\nimport { CacheImageContext } from '../../Provider/CacheImageContext';\r\nimport { Base } from '../Base';\r\nimport BodyScan from './BodyScan';\r\nimport './scan.scss';\r\nfunction Scan({ onCloseModal, questions, onBackToPrev, countdown, ...props }) {\r\n\r\n    const config = {\r\n        propsHeader: { RemoveHQ: true },\r\n        body: <BodyScan questions={questions}></BodyScan>,\r\n        \r\n    }\r\n\r\n    return (\r\n        <>\r\n            {questions && <BodyScan questions={questions} onClearTime={onCloseModal} onBackToPrev={onBackToPrev}>\r\n\r\n            </BodyScan>}\r\n\r\n            {questions && <div style={{ position: 'absolute', top: 0, right: 0, color: 'white' }}>\r\n                <CountTime firstValue={countdown} onClearTime={onCloseModal} onBackToPrev={onBackToPrev} />\r\n                <div className=\"popup-suggest_scan border\" data-bs-toggle=\"modal\" data-bs-target=\"#modalSuggest\">\r\n                    <i className=\"bi bi-question\"></i>\r\n                </div>\r\n            </div>}\r\n\r\n            {!questions && <Base\r\n                {...config}\r\n            >\r\n            </Base>}\r\n\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Scan;","import clsx from 'clsx';\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\n\r\nimport styleQuestion from './Question.module.scss';\r\nimport TracNghiem from './TracNghiem';\r\nimport XepHinh from './XepHinh';\r\nimport Scan from '../Scan/Scan';\r\nimport { useContext, useEffect, useState } from 'react';\r\nimport { useGlobalState } from 'state-pool';\r\nfunction BodyQuestion({ questions, onCloseModal, onBackToPrev }) {\r\n    var arrIndexQuestion = JSON.parse(sessionStorage.getItem('arrIndexQuestion'));\r\n\r\n    // console.log(arrIndexQuestion);\r\n    // const indexQuestionRd =  arrIndexQuestion[Math.floor(Math.random()* arrIndexQuestion.length)];\r\n    // const typeQuestion = questions[indexQuestionRd];\r\n\r\n\r\n    // arrIndexQuestion =  arrIndexQuestion.filter(indexQuestion => indexQuestion !== indexQuestionRd)\r\n    // sessionStorage.setItem('arrIndexQuestion', `[${arrIndexQuestion.toString()}]`);\r\n    // console.log('set lai index');\r\n\r\n    const [typeQuestion, setTypeQuestion] = useState(questions[9]);\r\n\r\n    const [refElMain] = useGlobalState(\"elMain\");\r\n    useEffect(() => {\r\n        console.log('scroll top');\r\n        // refElMain.current.scrollTop = 1;\r\n    }, [])\r\n\r\n\r\n    const questionItem = () => {\r\n        const configCD = {\r\n            \"trac_nghiem\": 60,\r\n            \"xep_hinh\": 60,\r\n            \"scan\": 600,\r\n        }\r\n\r\n        const configQuestion = {\r\n            onCloseModal: onCloseModal,\r\n            questions: typeQuestion,\r\n            onBackToPrev: onBackToPrev\r\n        }\r\n\r\n\r\n        console.log(`question`, typeQuestion);\r\n        switch (typeQuestion.type) {\r\n            case 'trac_nghiem':\r\n               \r\n                return (<TracNghiem\r\n                    {...configQuestion}\r\n                    countdown={configCD['trac_nghiem']}\r\n                />)\r\n\r\n            case 'xep_hinh':\r\n                return (<XepHinh\r\n                    {...configQuestion}\r\n                    countdown={configCD['xep_hinh']}\r\n                />)\r\n\r\n            case 'scan':\r\n\r\n                return (<Scan\r\n                    {...configQuestion}\r\n                    countdown={configCD['scan']}\r\n                ></Scan>)\r\n            default:\r\n                return <><h2>loi</h2></>\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className={clsx(styleQuestion['main-question'])} >\r\n                <div className={clsx(styleQuestion['body-question'], \"container-sm\")}>\r\n                    {questionItem()}\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default BodyQuestion;","import React from 'react';\r\nimport Button from '../../components/Button/Button';\r\nimport { Base } from '../Base';\r\n// import styleStart from './Question.module.scss';\r\nimport BodyQuestion from './BodyQuestion';\r\n\r\nfunction Question(props) {\r\n    return (\r\n        <>\r\n            <Base body={<BodyQuestion></BodyQuestion>}>\r\n            </Base>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Question;","import React from 'react';\r\nimport clsx from 'clsx';\r\n\r\nimport Question from \"./Question\";\r\n\r\nfunction index(props) {\r\n    return (\r\n        <div className={clsx()}>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default index;\r\n\r\nexport { Question };","import React, { useEffect, useRef, useState } from 'react';\r\nimport './dice.css'\r\nfunction Dice({status, randomAngle, isDice}) {\r\n    const [numberDice, setNumberDice] = useState('');\r\n    const handleDice = (randomAngle) => {\r\n            const dice = setTimeout( () => {\r\n                        if(randomAngle == 1) {\r\n                            setNumberDice('show-' + 1);\r\n                        } else if(randomAngle == 2) {\r\n                           setNumberDice('show-' + 6);\r\n                        } else if(randomAngle == 3) {\r\n                           setNumberDice('show-' + 4);\r\n                        } else if (randomAngle == 4) {\r\n                           setNumberDice('show-' + 5);\r\n                        } else if(randomAngle == 5) {\r\n                           setNumberDice('show-' + 2);\r\n                        } else  setNumberDice('show-' + 3);\r\n                clearTimeout(dice);\r\n            }, 1000);\r\n            // ${randomAngle == 1 ? 'show-1' : randomAngle == 2 ? 'show-6' : randomAngle == 3 ? 'show-4' : randomAngle == 4 ? 'show-5' : randomAngle == 5 ? 'show-2' : randomAngle == 6 ? 'show-3' : ''}\r\n    }\r\n    useEffect(() => {\r\n        if(isDice) {\r\n            handleDice(randomAngle);\r\n        }\r\n        \r\n    }, [status])\r\n    return (\r\n        <div className=\"game\" style={{zIndex: 20000, position: 'fixed', left: '38%'}}>\r\n            <div className=\"container\">\r\n            <div id='dice1' className={`dice dice-one ${numberDice}`}>\r\n                <div id=\"dice-one-side-one\" className='side one'>\r\n                <div className=\"dot one-1\"></div>\r\n                </div>\r\n                <div id=\"dice-one-side-two\" className='side two'>\r\n                <div className=\"dot two-1\"></div>\r\n                <div className=\"dot two-2\"></div>\r\n                </div>\r\n                <div id=\"dice-one-side-three\" className='side three'>\r\n                <div className=\"dot three-1\"></div>\r\n                <div className=\"dot three-2\"></div>\r\n                <div className=\"dot three-3\"></div>\r\n                </div>\r\n                <div id=\"dice-one-side-four\" className='side four'>\r\n                <div className=\"dot four-1\"></div>\r\n                <div className=\"dot four-2\"></div>\r\n                <div className=\"dot four-3\"></div>\r\n                <div className=\"dot four-4\"></div>\r\n                </div>\r\n                <div id=\"dice-one-side-five\" className='side five'>\r\n                <div className=\"dot five-1\"></div>\r\n                <div className=\"dot five-2\"></div>\r\n                <div className=\"dot five-3\"></div>\r\n                <div className=\"dot five-4\"></div>\r\n                <div className=\"dot five-5\"></div>\r\n                </div>\r\n                <div id=\"dice-one-side-six\" className='side six'>\r\n                <div className=\"dot six-1\"></div>\r\n                <div className=\"dot six-2\"></div>\r\n                <div className=\"dot six-3\"></div>\r\n                <div className=\"dot six-4\"></div>\r\n                <div className=\"dot six-5\"></div>\r\n                <div className=\"dot six-6\"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n            \r\n  </div> \r\n    );\r\n}\r\n\r\nexport default Dice;","import clsx from 'clsx';\r\nimport { countBy, isEmpty } from 'lodash';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport * as THREE from 'three';\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\r\nimport './robot.css'\r\n\r\n\r\nexport const RobotModel = ({ canvasRef, currentPoint, map, setIsCrtMoving, dataCrtMove, actionDataCrtMove }) => {\r\n    const [posArr, setPosArr] = useState([...map[currentPoint].split('-')])\r\n    const [oldPoint, setOldPoint] = useState(currentPoint);\r\n    const [currentPoint1, setCurrentPoint1] = useState(currentPoint);\r\n\r\n    const [CELL_SIZE, setCellSize] = useState(() => {\r\n        const height = window.innerWidth <= 576 ? window.innerWidth : 576;\r\n        return height / 10;\r\n    });\r\n\r\n    const character = useRef();\r\n    const [animationCrt, setAnimationCrt] = useState(false);\r\n\r\n\r\n    const [dir, setDir] = useState('face-up');\r\n    const [_robot, setRobot] = useState(null);\r\n    const [actionControl, setActionControl] = useState(null);\r\n\r\n    const checkDirection = (oldPos, newPos) => {\r\n        if (oldPos[0] == newPos[0]) {\r\n            if (oldPos[1] > newPos[1]) return UP;\r\n            else return DOWN\r\n        }\r\n        if (oldPos[0] > newPos[0]) return LEFT;\r\n        return RIGHT;\r\n    }\r\n\r\n\r\n    const handleMoveCrt = (currentPoint1) => {\r\n        const promise = new Promise(resolve => {\r\n            resolve();\r\n        });\r\n        promise\r\n            .then(() => {\r\n                setAnimationCrt(true);\r\n                setIsCrtMoving(true);\r\n                console.log(`currentPoint1 robot`, currentPoint1);\r\n\r\n                console.warn('animation crt start');\r\n\r\n                const directionArr = [];\r\n                // get direction\r\n                console.log(`point`, { oldPoint, currentPoint1 });\r\n                if (oldPoint < currentPoint1) {\r\n                    for (let i = oldPoint; i < currentPoint1; i++) {\r\n                        const currentStep = [...map[i].split('-')]\r\n                        const nextStep = [...map[i + 1].split('-')]\r\n                        console.log(currentStep, nextStep);\r\n                        directionArr.push(checkDirection(currentStep, nextStep));\r\n                    }\r\n                    return [...directionArr];\r\n                } else {\r\n                    for (let i = oldPoint; i > currentPoint1; i--) {\r\n                        const currentStep = [...map[i].split('-')]\r\n                        const nextStep = [...map[i - 1].split('-')]\r\n                        directionArr.push(checkDirection(currentStep, nextStep));\r\n                    }\r\n                    return [...directionArr];\r\n                }\r\n            })\r\n            .then(directionArr => {\r\n                console.log(directionArr);\r\n                const timePerStep = TIME_PER_MOVEMENT / directionArr.length;\r\n                const robotRec = document.getElementById('character-container');\r\n                console.log(actionControl);\r\n                if (actionControl) actionControl.timeScale = directionArr.length;\r\n                const moveLoop = async () => {\r\n\r\n                    for (let i = 0; i < directionArr.length; i++) {\r\n                        moveDirection(directionArr[i]);\r\n                        let frame = timePerStep / CELL_SIZE;\r\n                        console.log(\"frame: \", frame);\r\n                        const doIt = async () => {\r\n                            let count = 0;\r\n                            while (count < timePerStep) {\r\n                                await delay(frame);\r\n                                move(directionArr[i], robotRec);\r\n                                count += frame;\r\n                            }\r\n                        }\r\n                        await doIt();\r\n                    }\r\n                    setTimeout(() => {\r\n                        setOldPoint(currentPoint1);\r\n                        setIsCrtMoving(false);\r\n                        actionDataCrtMove({ type: 'NEXT_STEP' })\r\n                        setAnimationCrt(false);\r\n\r\n                    }, 200)\r\n                    console.warn('animation crt end');\r\n                }\r\n                moveLoop();\r\n\r\n            });\r\n\r\n    }\r\n\r\n\r\n    // useEffect(() => {\r\n    //     const promise = new Promise(resolve => {\r\n    //         resolve();\r\n    //     });\r\n    //     promise\r\n    //         .then(() => {\r\n    //             setAnimationCrt(true);\r\n    //             setIsCrtMoving(true);\r\n    //             console.log(`currentPoint robot`, currentPoint);\r\n\r\n    //             console.warn('animation crt start');\r\n\r\n    //             const directionArr = [];\r\n    //             // get direction\r\n    //             if (oldPoint < currentPoint) {\r\n    //                 for (let i = oldPoint; i < currentPoint; i++) {\r\n    //                     const currentStep = [...map[i].split('-')]\r\n    //                     const nextStep = [...map[i + 1].split('-')]\r\n    //                     console.log(currentStep, nextStep);\r\n    //                     directionArr.push(checkDirection(currentStep, nextStep));\r\n    //                 }\r\n    //                 return [...directionArr];\r\n    //             } else {\r\n    //                 for (let i = oldPoint; i > currentPoint; i--) {\r\n    //                     const currentStep = [...map[i].split('-')]\r\n    //                     const nextStep = [...map[i - 1].split('-')]\r\n    //                     directionArr.push(checkDirection(currentStep, nextStep));\r\n    //                 }\r\n    //                 return [...directionArr];\r\n    //             }\r\n    //         })\r\n    //         .then(directionArr => {\r\n    //             console.log(directionArr);\r\n    //             const timePerStep = TIME_PER_MOVEMENT / directionArr.length;\r\n    //             const robotRec = document.getElementById('character-container');\r\n    //             console.log(actionControl);\r\n    //             if (actionControl) actionControl.timeScale = directionArr.length;\r\n    //             const moveLoop = async () => {\r\n\r\n    //                 for (let i = 0; i < directionArr.length; i++) {\r\n    //                     moveDirection(directionArr[i]);\r\n    //                     let frame = timePerStep / CELL_SIZE;\r\n    //                     console.log(\"frame: \", frame);\r\n    //                     const doIt = async () => {\r\n    //                         let count = 0;\r\n    //                         while (count < timePerStep) {\r\n    //                             await delay(frame);\r\n    //                             move(directionArr[i], robotRec);\r\n    //                             count += frame;\r\n    //                         }\r\n    //                     }\r\n    //                     await doIt();\r\n    //                 }\r\n    //                 setAnimationCrt(false);\r\n    //                 setIsCrtMoving(false);\r\n    //                 console.warn('animation crt end');\r\n    //             }\r\n    //             moveLoop();\r\n\r\n    //         });\r\n\r\n\r\n    //     setOldPoint(currentPoint);\r\n\r\n    // }, [currentPoint]);\r\n\r\n    useEffect(() => {\r\n        // console.log(`dataCrtMove`, dataCrtMove);\r\n        if (dataCrtMove.status === 'CRT_MOVING' && dataCrtMove.nextPoint != null) {\r\n            console.log(`nextPoint`, dataCrtMove.nextPoint);\r\n            handleMoveCrt(dataCrtMove.nextPoint);\r\n\r\n        }\r\n    }, [dataCrtMove && dataCrtMove.status === 'CRT_MOVING'])\r\n\r\n    useEffect(() => {\r\n        // console.log(`dataCrtMove2`, dataCrtMove);\r\n\r\n        if (animationCrt === false && dataCrtMove.nextPoint != null && dataCrtMove.status === 'NEXT_STEP') {\r\n            console.log('chay 2 lan');\r\n            handleMoveCrt(dataCrtMove.nextPoint);\r\n            // actionDataCrtMove({ type: 'NEXT_STEP' })\r\n        } else if (animationCrt === false && dataCrtMove.nextPoint === null && dataCrtMove.status === 'NEXT_STEP') {\r\n            actionDataCrtMove({ type: 'CRT_STOP_MOVING' })\r\n\r\n        }\r\n    }, [animationCrt, dataCrtMove])\r\n\r\n\r\n\r\n\r\n\r\n\r\n    function decreasePixel(pixel) {\r\n        let num = pixel.split('px')[0];\r\n        num--;\r\n        return `${num}px`;\r\n    }\r\n    function increasePixel(pixel) {\r\n        let num = pixel.split('px')[0];\r\n        num++;\r\n        return `${num}px`;\r\n    }\r\n\r\n    const move = (dir, rec) => {\r\n        // console.log(\"dir: \", dir);\r\n        // console.log(\"rec pos: \", rec.style.left, rec.style.top);\r\n        switch (dir) {\r\n            case RIGHT:\r\n                rec.style.left = increasePixel(rec.style.left);\r\n                break;\r\n            case DOWN:\r\n                rec.style.top = increasePixel(rec.style.top);\r\n                break;\r\n            case LEFT:\r\n                rec.style.left = decreasePixel(rec.style.left);\r\n                break;\r\n            default:\r\n                rec.style.top = decreasePixel(rec.style.top);\r\n\r\n        }\r\n    }\r\n\r\n    function delay(delayInms) {\r\n        return new Promise(resolve => {\r\n            setTimeout(() => {\r\n                resolve(2);\r\n            }, delayInms);\r\n        });\r\n    }\r\n\r\n    const moveDirection = (dir) => {\r\n        switch (dir) {\r\n            case RIGHT:\r\n                setDir('face-right')\r\n                return;\r\n            case LEFT:\r\n                setDir('face-left')\r\n                return;\r\n            case DOWN:\r\n                setDir('face-down')\r\n                return;\r\n            default:\r\n                setDir('face-up')\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('resize', () => { if (window.innerWidth <= 576) setCellSize(window.innerWidth / 10) });\r\n\r\n        return () => { window.removeEventListener('resize', () => { if (window.innerWidth <= 576) setCellSize(window.innerWidth / 10) }) }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        const character = document.getElementById('character-container');\r\n\r\n        console.log(CELL_SIZE);\r\n        const ratioPixel = CELL_SIZE / 32;\r\n        document.documentElement.style.setProperty('--pixel-size', `${ratioPixel}`);\r\n        character.style.top = `${CELL_SIZE * posArr[1] - CELL_SIZE}px`;\r\n        character.style.left = `${CELL_SIZE * posArr[0] - CELL_SIZE / 2}px`;\r\n    }, [CELL_SIZE])\r\n    return (\r\n        // <canvas id='myCanvas'></canvas>\r\n\r\n        <div id='character-container'>\r\n            <div className=\"Character\" >\r\n\r\n                <img className=\"Character_shadow pixelart\" src=\"https://s3-us-west-2.amazonaws.com/s.cdpn.io/21542/DemoRpgCharacterShadow.png\" alt=\"Shadow\" />\r\n\r\n                <img\r\n                    // className={`Character_spritesheet pixelart ${dir}`}\r\n                    className={clsx('Character_spritesheet', dir, { 'animation_crt': animationCrt })}\r\n                    ref={character}\r\n                    src={`${process.env.PUBLIC_URL}/assets/images/sprite-sheet.png`} alt=\"Character\"\r\n                />\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst UP = 0;\r\nconst RIGHT = 1;\r\nconst DOWN = 2;\r\nconst LEFT = 3;\r\nconst TIME_PER_MOVEMENT = 2000;\r\n","import _ from 'lodash';\r\n\r\nfunction findRoad(arr, heightMap) {\r\n    const findFirtPoint = (arr) => {\r\n        const arrPoint = arr.filter(item => item.split('-')[1] == (heightMap - 1));\r\n        if (arr.includes((arrPoint[0].split('-')[0] + '-' + (arrPoint[0].split('-')[1] - 1)))) return arrPoint[_.size(arrPoint) - 1];\r\n        else return arrPoint[0];\r\n    }\r\n    const caculatorDistance = (x, y, x1, y1) => {\r\n        return (Math.pow((x - x1), 2) + Math.pow((y - y1), 2)) == 1 ? true : false;\r\n    }\r\n\r\n    const sort = (arr) => {\r\n        if (!_.isEmpty(arr)) {\r\n            const firstPoint = findFirtPoint(arr);\r\n            let newArr = [firstPoint];\r\n            _.remove(arr, function (item) {\r\n                return item == newArr[0];\r\n            })\r\n            while (_.size(arr) != 0) {\r\n                for (let i = 0; i < _.size(arr); ++i) {\r\n                    if (newArr[_.size(newArr) - 1] != arr[i]) {\r\n                        if (caculatorDistance(newArr[_.size(newArr) - 1].split('-')[0]\r\n                            , newArr[_.size(newArr) - 1].split('-')[1], arr[i].split('-')[0], arr[i].split('-')[1])) {\r\n                            newArr = [...newArr, arr[i]];\r\n                            _.remove(arr, function (item) {\r\n                                return item == arr[i];\r\n                            })\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return newArr;\r\n        } else return [];\r\n\r\n    }\r\n\r\n    return sort(arr);\r\n}\r\n\r\nexport default findRoad;","import FetchData from \"../../assets/js/fetchData\";\r\n\r\nasync function PreloadImage({ questions, ...props }, callbackDone) {\r\n    // const loadImageMemo = useMemo(loadImage, [arrImage]);\r\n    // const [arrImage, setArrImage] = useState([]);\r\n\r\n    const loadImage = ({ url, imageId }) => {\r\n        return new Promise((resolve, reject) => {\r\n            const img = new Image();\r\n\r\n            img.onload = () => resolve({ [imageId]: img });\r\n            img.onerror = () => reject(new Error(`load ${url} fail`));\r\n            img.src = url;\r\n        });\r\n\r\n    };\r\n\r\n    const cacheImage = async () => {\r\n        const arrQXephinh = questions.filter(question => {\r\n            return question.type === 'xep_hinh' && question.image_id\r\n        })\r\n\r\n        let promisesUrlImage = [];\r\n        promisesUrlImage = arrQXephinh.map((question) => {\r\n            return new Promise((resolve, reject) => {\r\n                FetchData.urlItem(question.image_id, (url) => {\r\n                    return resolve({ url, imageId: question.image_id });\r\n                })\r\n            })\r\n        })\r\n        console.log(`promisesUrlImage Before`, promisesUrlImage);\r\n\r\n        Promise.all(promisesUrlImage)\r\n            .then(arrUrlItem => {\r\n                // console.log(arrUrlItem);\r\n\r\n                let promisesCacheImage = [];\r\n                for (const item of arrUrlItem) {\r\n                    promisesCacheImage.push(loadImage({ url: item.url, imageId: item.imageId }));\r\n                }\r\n\r\n                Promise.all(promisesCacheImage).then(res => {\r\n                    let objImages = {};\r\n                    for (const item of res) {\r\n                        objImages = { ...objImages, ...item }\r\n                    }\r\n                    callbackDone(objImages);\r\n                })\r\n            })\r\n    }\r\n\r\n    cacheImage();\r\n\r\n}\r\n\r\nexport default PreloadImage;","import React, { useEffect, useRef, useState } from 'react';\r\n\r\nfunction TotalTime({ onSetSesTotal }) {\r\n    const [count, setCount] = useState(0);\r\n\r\n    const caculatorTime = (time) => {\r\n        const second = time % 60 >= 10 ? time % 60 : `0${time % 60}`;\r\n        const minute = Math.floor(time / 60) >= 10 ? Math.floor(time / 60) : `0${Math.floor(time / 60)}`;\r\n        return `${minute}:${second}`;\r\n    }\r\n\r\n    useEffect(() => {\r\n        const iTime = setInterval(() => {\r\n            setCount(prev => prev + 1);\r\n        }, 1000);\r\n        // mainTime.current = \r\n\r\n        return () => {\r\n            clearInterval(iTime);  \r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        return () =>{ sessionStorage.setItem(\"totalTime\", count);}\r\n\r\n    }, [count])\r\n\r\n    return (\r\n        <div style={{ position: 'fixed', zIndex: 2000 }}>\r\n            {caculatorTime(count)}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default TotalTime;","import React, { useEffect, useRef } from 'react';\r\n\r\nfunction Canvas({img, keys}) {\r\n    const canvasRef = useRef();\r\n    console.log(\"key\", keys);\r\n    useEffect(() => {\r\n        if(keys) {\r\n            let ctx = canvasRef.current.getContext(\"2d\");\r\n            ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\r\n            const size_of_crop = 32;\r\n            // const layerCur = arrLayer[nameLayer];\r\n                    const positionX = Number(keys.split(\"-\")[0]);\r\n                    const positionY = Number(keys.split(\"-\")[1]);\r\n    \r\n                    ctx.drawImage(\r\n                        img,\r\n                        positionX * 32,\r\n                        positionY * 32,\r\n                        size_of_crop,\r\n                        size_of_crop,\r\n                        0,\r\n                        0,\r\n                        size_of_crop,\r\n                        size_of_crop\r\n                    );\r\n        }\r\n        \r\n \r\n    },[keys])\r\n    return (\r\n        <canvas ref={canvasRef} width={32} height={32}></canvas>\r\n    );\r\n}\r\n\r\nexport default Canvas;","import Canvas from \"../../components/Canvas\";\r\nimport './Map.scss'\r\n\r\nfunction GuideMap({ itemModal, srcImage, setTypeModal, ...props }) {\r\n    console.log(itemModal);\r\n    return (\r\n        <div className='modal_map_intro container-sm border'>\r\n            <div className=\"row\">\r\n\r\n                <div className=\"col-sm-12\">\r\n                    <i className=\"bi bi-x-circle\" style={{ float: 'right' }} onClick={() => {\r\n                        setTypeModal(false);\r\n                    }}></i>\r\n                </div>\r\n                <div className=\"col-sm-12\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-sm-3\" style={{ margin: 'auto', fontSize: '18px !important', color: '#c66666' }}>\r\n                            <span className='text_modal_map' style={{  fontSize: '20px'}}>\r\n                                Mô tả\r\n                            </span>\r\n                        </div>\r\n\r\n                        <div className=\"col-sm-11\" style={{ margin: 'auto' }}>\r\n                            <span className='text_modal_map'>\r\n                                Đây là bản đồ dẫn tới kho báu Rồng. Có rất nhiều chướng ngại vật, thử thách khó khăn trên đường đi tìm kho báu. Một số chướng ngại vật có thể cản trở bạn hoặc có thể giúp bạn đến kho báu nhanh hơn. Dưới đây là một vài chú thích:\r\n                            </span>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 border_map_modal animate__zoomInDown animate__animated\" style={{marginTop: '20px'}}>\r\n                    <div className=\"row\" style={{ alignItems: 'center' }}>\r\n                        <div className=\"col-sm-1\">\r\n                            <img\r\n                                src={process.env.PUBLIC_URL + '/assets/images/khobau.png'}\r\n                                style={{ width: '32px', height: '32px' }}\r\n                            />\r\n                        </div>\r\n                        <div className=\"col-sm-11\">\r\n                            <span className='text_modal_map'>Đây chính là kho báu Rồng. Nếu lấy được nó bạn sẽ được ban thưởng một phần thưởng</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 border_map_modal animate__zoomInDown animate__animated\">\r\n                    <div className=\"row\" style={{ alignItems: 'center' }}>\r\n                        <div className=\"col-sm-1\">\r\n                            <img\r\n                                src={process.env.PUBLIC_URL + '/assets/images/dice.png'}\r\n                                style={{ width: '32px', height: '32px' }}\r\n                            />\r\n                        </div>\r\n                        <div className=\"col-sm-11\">\r\n                            <span className='text_modal_map'>Ấn vào đây để có thể di chuyển </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 border_map_modal animate__zoomInDown animate__animated\">\r\n                    <div className=\"row\" style={{ alignItems: 'center' }}>\r\n                        <div className=\"col-sm-1\">\r\n                            <img\r\n                                src={process.env.PUBLIC_URL + '/assets/images/heart.png'}\r\n                                style={{ width: '32px', height: '32px' }}\r\n                            />\r\n                        </div>\r\n                        <div className=\"col-sm-11\">\r\n                            <span className='text_modal_map'>Số lượt chơi của bạn là giới hạn nên hãy thận trọng với những câu hỏi. Nó sẽ được hiển thị tại góc trên cùng bên phải của màn hình</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 border_map_modal animate__zoomInDown animate__animated\">\r\n                    <div className=\"row\" style={{ alignItems: 'center' }}>\r\n                        <div className=\"col-sm-1\">\r\n                            <img\r\n                                src={process.env.PUBLIC_URL + '/assets/images/time.png'}\r\n                                style={{ width: '32px', height: '32px' }}\r\n                            />\r\n                        </div>\r\n                        <div className=\"col-sm-11\">\r\n                            <span className='text_modal_map'>Tại góc trên cùng bên trái màn hình. Đây là nơi hiển thị tổng thời gian từ ban đầu cho tới khi bạn tìm được kho báu.</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {itemModal.map(item => {\r\n                    if (item?.effect.includes(\"back_forward\")) {\r\n                        item.des = \"Đây là .....Khi bước vào đây bạn sẽ được tiến thêm một số ô nhất định\"\r\n                    } else if (item?.effect.includes(\"forward\")) {\r\n                        item.des = \"Khi bước vào đây bạn sẽ phải lùi về sau\"\r\n                    } else if (item?.effect.includes(\"tele\")) {\r\n                        item.des = \"Cổng không gian, bạn sẽ bị dịch chuyển tới một nơi bất kì nào đó trong bản đồ khi bước vào nó.\"\r\n                    }\r\n\r\n                    return (\r\n                        <div className=\"col-sm-12 border_map_modal animate__zoomInDown animate__animated\">\r\n                            <div className=\"row\" style={{ alignItems: 'center' }}>\r\n                                <div className=\"col-sm-1\">\r\n                                    <Canvas keys={item?.td} img={srcImage[item?.tilesetIdx || 0]} />\r\n                                </div>\r\n                                <div className=\"col-sm-11\">\r\n                                    <span className='text_modal_map'>{item?.des}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    )\r\n                })}\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default GuideMap;","import clsx from 'clsx';\r\nimport styleLoading from './loading.module.scss';\r\n\r\nfunction BodyLoading(props) {\r\n    const faceCube = (\r\n        <>\r\n            <div className={clsx(styleLoading.face, styleLoading.top)}></div>\r\n            <div className={clsx(styleLoading.face, styleLoading.left)}></div>\r\n            <div className={clsx(styleLoading.face, styleLoading.right)}></div>\r\n        </>)\r\n\r\n\r\n    const textLoading =\r\n        <>\r\n            <div className={clsx(styleLoading.textLoading, styleLoading.loadingText05)}>\r\n                <span className={styleLoading.crtLoading}>L</span>\r\n                <span className={styleLoading.crtLoading}>O</span>\r\n                <span className={styleLoading.crtLoading}>A</span>\r\n                <span className={styleLoading.crtLoading}>D</span>\r\n                <span className={styleLoading.crtLoading}>I</span>\r\n                <span className={styleLoading.crtLoading}>N</span>\r\n                <span className={styleLoading.crtLoading}>G</span>\r\n            </div>\r\n\r\n        </>\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className={clsx(styleLoading.loading)}>\r\n                <div className={clsx(styleLoading.background)}></div>\r\n                <div className={clsx(styleLoading.container)} >\r\n                    <div className={clsx(styleLoading.h1Container)}>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h1, styleLoading.w1, styleLoading.l1, styleLoading.cube, styleLoading.h1, styleLoading.w1, styleLoading.l1)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h1, styleLoading.w1, styleLoading.l2)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h1, styleLoading.w1, styleLoading.l3)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h1, styleLoading.w2, styleLoading.l1)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h1, styleLoading.w2, styleLoading.l2)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h1, styleLoading.w2, styleLoading.l3)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h1, styleLoading.w3, styleLoading.l1)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h1, styleLoading.w3, styleLoading.l2)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h1, styleLoading.w3, styleLoading.l3)} >\r\n                            {faceCube}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className={clsx(styleLoading.h2Container)}>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h2, styleLoading.w1, styleLoading.l1)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h2, styleLoading.w1, styleLoading.l2)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h2, styleLoading.w1, styleLoading.l3)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h2, styleLoading.w2, styleLoading.l1)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h2, styleLoading.w2, styleLoading.l2)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h2, styleLoading.w2, styleLoading.l3)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h2, styleLoading.w3, styleLoading.l1)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h2, styleLoading.w3, styleLoading.l2)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.cube, styleLoading.h2, styleLoading.w3, styleLoading.l3)} >\r\n                            {faceCube}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className={clsx(styleLoading.h3Container)}>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h3, styleLoading.w1, styleLoading.l1)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h3, styleLoading.w1, styleLoading.l2)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h3, styleLoading.w1, styleLoading.l3)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h3, styleLoading.w2, styleLoading.l1)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h3, styleLoading.w2, styleLoading.l2)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h3, styleLoading.w2, styleLoading.l3)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h3, styleLoading.w3, styleLoading.l1)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h3, styleLoading.w3, styleLoading.l2)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h3, styleLoading.w3, styleLoading.l3)} >\r\n                            {faceCube}\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n                {textLoading}\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default BodyLoading;","import clsx from 'clsx';\r\nimport { useEffect, useRef } from 'react';\r\nimport { Base } from '../../pages/Base';\r\nimport BodyLoading from './BodyLoading';\r\n\r\n\r\n\r\nfunction Loading(props) {\r\n    const elLoading = useRef();\r\n\r\n    useEffect(() => {\r\n        elLoading.current.classList.add(\"animate__fadeIn\");\r\n\r\n        return () => {\r\n            elLoading.current?.classList.remove(\"animate__fadeIn\");\r\n            elLoading.current?.classList.add(\"animate__fadeOut\");\r\n\r\n        }\r\n    },[])\r\n\r\n\r\n    return (\r\n        <div ref={elLoading}>\r\n\r\n            <Base\r\n                headerBody={<BodyLoading></BodyLoading>}\r\n            ></Base>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Loading;","import React, { useEffect, useMemo, useReducer, useRef, useState } from 'react';\r\nimport './Map.scss'\r\nimport Base from '../Base/Base'\r\nimport _, { forIn, isEmpty } from 'lodash';\r\nimport Dice from './dice';\r\nimport BodyQuestion from '../Question/BodyQuestion';\r\nimport { RobotModel } from './robot';\r\n\r\nimport { useNavigate } from 'react-router-dom'\r\nimport findRoad from './findRoad';\r\nimport AnimationText from '../../components/Text';\r\nimport PreloadImage from './PreloadImage';\r\nimport 'animate.css';\r\nimport { CacheImageProvider } from '../../Provider/CacheImageContext';\r\nimport TotalTime from '../../components/CountTime/totalTime';\r\nimport Canvas from '../../components/Canvas';\r\nimport GuideMap from './GuideMap';\r\nimport { Loading } from '../../components/Loading';\r\nimport clsx from 'clsx';\r\nfunction MapComponent(props) {\r\n    const imageE = useRef();\r\n    const canvasRef = useRef();\r\n    const [codebeautty, setCodebeauty] = useState({});\r\n    const [map, setMap] = useState([]);\r\n    const [onDice, setOnDice] = useState(false);\r\n    const currentPoint = useRef(0);\r\n    const randomDice = useRef();\r\n    const [isDice, setIsDice] = useState(false);\r\n    const [showQuestion, setShowQuestion] = useState(false);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const navigation = useNavigate();\r\n    const listQuestion = useRef([]);\r\n    const previousStep = useRef();\r\n    const [wrong, setWrong] = useState({})\r\n    const [showText, setShowText] = useState(false);\r\n    const itemRoad = useRef([]);\r\n    const [typeModal, setTypeModal] = useState(false);\r\n    const eventOfRoad = useRef([]);\r\n    const allowToDice = useRef(true);\r\n    // const filterEventOfRoad = useRef({});\r\n    const beforeTypeEvent = useRef();\r\n\r\n    const [currentMap, setCurrentMap] = useState({});\r\n    const [arrImage, setArrImage] = useState([]);\r\n\r\n    // se dung\r\n    const [srcImage, setSrcImage] = useState([])\r\n\r\n    const refLayers = useRef({});\r\n    const [bufferLayers, setBufferLayers] = useState({});\r\n\r\n    const [dataMap, actionDataMap] = useReducer(controlDataMap, {})\r\n    const [dataCrtMove, actionDataCrtMove] = useReducer(controlDataCtrMove, {});\r\n    const cacheImageXepHinh = useRef();\r\n    const itemModal = useRef([]);\r\n\r\n    const [isCrtMoving, setIsCrtMoving] = useState(false);\r\n    const arrStepPoint = useRef([]);\r\n\r\n    const filterEventOfRoad = useMemo(() => {\r\n        if (!_.isEmpty(map) && !_.isEmpty(dataMap)) {\r\n            const result = map.reduce((object, item) => {\r\n                if (dataMap.layers['item-road'][item]) {\r\n                    const key = dataMap.layers['item-road'][item]?.x + '-' + dataMap.layers['item-road'][item]?.y;\r\n                    object[key] = [...object[key] || [], item];\r\n                    return object;\r\n                } else return object;\r\n\r\n            }, {})\r\n\r\n\r\n\r\n            for (const item of codebeautty.define_item_map) {\r\n\r\n                const temp = Object.entries(codebeautty.tileSets[item.tilesetIdx].tileData).filter((tile) => {\r\n                    // console.log(tile[1].tileSymbol, tile[1].tileSymbol);\r\n                    return item.tileSymbol == tile[1].tileSymbol;\r\n                })\r\n                const newItem = { ...item, td: (temp[0])[0] };\r\n                itemModal.current = [...itemModal.current || [], newItem];\r\n            }\r\n\r\n            console.log(\" itemModal.current\", itemModal.current);\r\n            return result;\r\n\r\n        }\r\n    }, [map]);\r\n\r\n    function controlDataCtrMove(oldState, action) {\r\n        // console.log(`action`, action);\r\n        // console.log(`oldState`, oldState);\r\n        switch (action.type) {\r\n            case 'INIT_DATA_CRT':\r\n\r\n                return { ...oldState, status: 'INIT_DATA_CRT', arrStep: [], nextPoint: 0, prePoint: 0 }\r\n            case 'ADD_STEP_MOVE':\r\n                return { ...oldState, status: 'ADD_STEP_MOVE', arrStep: [...oldState.arrStep, action.point] }\r\n            case 'FINISH_ADD_STEP':\r\n                return { ...oldState, status: action.type }\r\n\r\n            case 'NEXT_STEP':\r\n            case 'CRT_MOVING':\r\n                // console.group([action.type]);\r\n\r\n                // console.log(`dataStep`, oldState.arrStep);\r\n\r\n                const tempPrePoint = oldState.nextPoint !== null ? oldState.prePoint : oldState.nextPoint;\r\n\r\n                var nextPoint;\r\n                if (!_.isEmpty(oldState.arrStep)) {\r\n                    nextPoint = oldState.arrStep.shift();\r\n                }\r\n                else {\r\n                    console.log('mang rong');\r\n                    nextPoint = null;\r\n                }\r\n                // console.log(`nextPoint`, nextPoint);\r\n                // console.groupEnd();\r\n                return { ...oldState, nextPoint, prePoint: tempPrePoint, status: action.type }\r\n\r\n            case 'CRT_STOP_MOVING':\r\n                console.warn('crt stop');\r\n                return { ...oldState, status: action.type }\r\n\r\n            default:\r\n                throw new Error();\r\n\r\n        }\r\n    }\r\n\r\n    // console.log(filterEventOfRoad);\r\n    function controlDataMap(oldState, action) {\r\n        switch (action.type) {\r\n            case 'INIT_MAP':\r\n                let layersMap = {};\r\n                let { layers, ...infoMap } = action.currentMap;\r\n\r\n                for (const layer of layers) {\r\n                    layersMap[layer.name] = layer.tiles;\r\n                }\r\n                console.log('Layers', layers);\r\n                loadImage();\r\n                console.log('khoi tao map');\r\n\r\n\r\n\r\n                return { ...oldState, layers: layersMap, ...infoMap, status: action.type };\r\n\r\n            case 'UPDATE_LAYER_CHARACTER':\r\n                let newLayers =\r\n                {\r\n                    ...oldState.layers,\r\n                    'charater': action.newLayerCharacter\r\n                }\r\n\r\n                return { ...oldState, layers: newLayers, status: action.type }\r\n            default:\r\n                throw new Error();\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    //kiem tra xem co boom\r\n    const validateStep = (toado) => {\r\n        if (_.isEmpty(dataMap.layers['item-road'][toado])) return false;\r\n        else {\r\n            const typeEvent = eventOfRoad.current.reduce((object, item) => {\r\n                if (item?.tileSymbol == dataMap.layers['item-road'][toado]?.tileSymbol) return item;\r\n                else return object;\r\n            }, {})\r\n            if (typeEvent?.effect.split(' ')[0] == 'back_forward') {\r\n                beforeTypeEvent.current = 'forward';\r\n                return -Number(typeEvent?.effect.split(' ')[1]);\r\n            }\r\n            else if (typeEvent?.effect.split(' ')[0] == 'forward') {\r\n                beforeTypeEvent.current = 'forward';\r\n                return Number(typeEvent?.effect.split(' ')[1]);\r\n            }\r\n            else if (typeEvent?.effect.split(' ')[0] == 'tele') {\r\n                beforeTypeEvent.current = 'tele';\r\n                const numberTele = Number(typeEvent?.effect.split(' ')[1]);\r\n                const typeFilterEvent = dataMap.layers['item-road'][toado]?.x + '-' + dataMap.layers['item-road'][toado]?.y;\r\n                const currentTele = filterEventOfRoad[typeFilterEvent].indexOf(toado);\r\n                if (currentTele + numberTele > (_.size(filterEventOfRoad[typeFilterEvent]) - 1)) {\r\n                    const valueTeleToJump = map.indexOf((filterEventOfRoad[typeFilterEvent])[_.size(filterEventOfRoad[typeFilterEvent]) - 1]);\r\n                    return valueTeleToJump - currentPoint.current;\r\n                } else if (currentTele + numberTele < 0) {\r\n                    const valueTeleToJump = map.indexOf((filterEventOfRoad[typeFilterEvent])[0]);\r\n                    return valueTeleToJump - currentPoint.current;\r\n                } else {\r\n                    const valueTeleToJump = map.indexOf((filterEventOfRoad[typeFilterEvent])[currentTele + numberTele]);\r\n                    return valueTeleToJump - currentPoint.current;\r\n                }\r\n            } else return false\r\n        }\r\n    }\r\n\r\n    const handleValidateMove = (time, dice) => {\r\n        if (validateStep(map[currentPoint.current]) !== false) {\r\n            const step = validateStep(map[currentPoint.current]);\r\n\r\n            arrStepPoint.current = [...arrStepPoint.current, currentPoint.current + step];\r\n\r\n            actionDataCrtMove({\r\n                type: 'ADD_STEP_MOVE',\r\n                point: currentPoint.current + step,\r\n                hi: 'handleValidateMove'\r\n            });\r\n            currentPoint.current = currentPoint.current + step;\r\n\r\n\r\n            // const pictureCha = Object.values(charactor);\r\n            const pictureCha = Object.values(dataMap.layers.charater);\r\n\r\n\r\n            const a = map[currentPoint.current];\r\n            const newCha = {\r\n                [`${a.split('-')[0]}-${a.split('-')[1] - 1}`]: pictureCha[0],\r\n                [a]: pictureCha[1],\r\n\r\n            }\r\n\r\n            const timeOut = setTimeout(() => {\r\n                // const pewpew = [...listPicture];\r\n                allowToDice.current = true;\r\n                if (beforeTypeEvent.current == 'forward') {\r\n                    console.log(\"ao that day\", step);\r\n                    if (step < 0) setShowText(\"Lùi\");\r\n                    else setShowText(\"Tiến\");\r\n                } else if (beforeTypeEvent.current == 'tele') {\r\n                    setShowText(\"Dịch chuyển\");\r\n                }\r\n                const timeOut1 = setTimeout(() => {\r\n\r\n                    actionDataMap({\r\n                        type: \"UPDATE_LAYER_CHARACTER\",\r\n                        newLayerCharacter: newCha\r\n                    });\r\n                    setShowText(false);\r\n\r\n                    if (beforeTypeEvent.current == 'forward') handleValidateMove(1000, false);\r\n                    clearTimeout(timeOut1);\r\n                    clearTimeout(timeOut);\r\n                }, 1000)\r\n\r\n\r\n\r\n\r\n            }, time);\r\n        } else {\r\n            if (dice) {\r\n                const timeShowQues = setTimeout(() => {\r\n\r\n                    setShowQuestion(true);\r\n                    clearTimeout(timeShowQues);\r\n                }, 400)\r\n            }\r\n            actionDataCrtMove({ type: 'CRT_MOVING' });\r\n\r\n        }\r\n    }\r\n\r\n    const handleMove = () => {\r\n        console.warn('begin handleMove');\r\n        try {\r\n            allowToDice.current = false;\r\n            const dice = Math.floor(Math.random() * 6) + 1;\r\n            // Math.floor(Math.random() * 6) + 1;\r\n            // const dice = 2;\r\n            randomDice.current = dice;\r\n            const pictureCha = Object.values(dataMap.layers.charater);\r\n            console.warn('dice', dice);\r\n            const newPoint = currentPoint.current + dice;\r\n\r\n            if (newPoint < (_.size(map) - 1)) {\r\n                previousStep.current = currentPoint.current;\r\n                arrStepPoint.current = [...arrStepPoint.current, newPoint];\r\n                actionDataCrtMove({\r\n                    type: 'ADD_STEP_MOVE',\r\n                    point: newPoint,\r\n                    hi: 'handleMove'\r\n                });\r\n\r\n                // const a = map[(currentPoint.current + dice) > (_.size(map) - 1) ? (_.size(map) - 1) : currentPoint.current + dice + 16];\r\n                const a = map[newPoint];\r\n\r\n                setOnDice(!onDice);\r\n                setIsDice(true);\r\n                currentPoint.current = newPoint;\r\n                // console.log(`charactor.current`, charactor);\r\n                // const pictureCha = Object.values(charactor);\r\n                // const pictureCha = Object.values(dataMap.layers.charater);\r\n\r\n                const newCha = {\r\n                    [`${a.split('-')[0]}-${a.split('-')[1] - 1}`]: pictureCha[0],\r\n                    [a]: pictureCha[1],\r\n\r\n                }\r\n                // listPicture.splice(listPicture.length - 1)\r\n                // const pewpew = [...listPicture];\r\n\r\n                const timeOut = setTimeout(() => {\r\n                    setShowText(\"Tiến\")\r\n                    const timeOut1 = setTimeout(() => {\r\n\r\n                        actionDataMap({\r\n                            type: \"UPDATE_LAYER_CHARACTER\",\r\n                            newLayerCharacter: newCha\r\n                        });\r\n                        setShowText(false);\r\n                        handleValidateMove(1000, true);\r\n\r\n                        clearTimeout(timeOut1);\r\n                    }, 1000)\r\n\r\n\r\n                    setIsDice(false);\r\n\r\n                    clearTimeout(timeOut);\r\n                }, 2000);\r\n\r\n\r\n\r\n            } else {\r\n                const a = map[(_.size(map) - 1)];\r\n                // const pictureCha = Object.values(charactor);\r\n                // const pictureCha = Object.values(dataMap.layers.charater);\r\n\r\n                setOnDice(!onDice);\r\n                setIsDice(true);\r\n                const newCha = {\r\n                    [`${a.split('-')[0]}-${a.split('-')[1] - 1}`]: pictureCha[0],\r\n                    [a]: pictureCha[1],\r\n\r\n                }\r\n                const timeOut = setTimeout(() => {\r\n                    setShowText(\"Tiến\")\r\n                    const timeOut1 = setTimeout(() => {\r\n                        actionDataMap({\r\n                            type: \"UPDATE_LAYER_CHARACTER\",\r\n                            newLayerCharacter: newCha\r\n                        });\r\n                        setShowText(false);\r\n                        clearTimeout(timeOut1);\r\n                    }, 1000)\r\n                    // setListPicture(newArr);\r\n                    setIsDice(false);\r\n                    clearTimeout(timeOut);\r\n                }, 1500)\r\n                const timeOut2 = setTimeout(() => {\r\n                    navigation('/complete')\r\n                    clearTimeout(timeOut2);\r\n                }, 3500)\r\n\r\n            }\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n        console.log(`arrStepPoint`, arrStepPoint);\r\n        console.warn('end handleMove');\r\n\r\n\r\n\r\n    }\r\n    //quay lai o cu\r\n    const backToPreviousStep = () => {\r\n\r\n        if (wrong.quantityWrongCur + 1 >= wrong.maxWrong) {\r\n            navigation('/lose')\r\n        }\r\n        else {\r\n            setWrong((oldWrong) => ({ ...oldWrong, quantityWrongCur: oldWrong.quantityWrongCur + 1 }))\r\n\r\n            const a = map[(previousStep.current) > (_.size(map) - 1) ? (_.size(map) - 1) : previousStep.current];\r\n            console.log('previousStep.current', previousStep.current);\r\n            actionDataCrtMove({\r\n                type: 'ADD_STEP_MOVE',\r\n                point: previousStep.current,\r\n                hi: 'backToPreviousStep'\r\n            });\r\n            currentPoint.current = previousStep.current\r\n            // const pictureCha = Object.values(charactor);\r\n            const pictureCha = Object.values(dataMap.layers.charater);\r\n\r\n            const newCha = {\r\n                [`${a.split('-')[0]}-${a.split('-')[1] - 1}`]: pictureCha[0],\r\n                [a]: pictureCha[1],\r\n\r\n            }\r\n\r\n\r\n            const timeOut = setTimeout(() => {\r\n                setShowText(\"Trừ 1 mạng\")\r\n                const timeOut1 = setTimeout(() => {\r\n                    actionDataMap({\r\n                        type: \"UPDATE_LAYER_CHARACTER\",\r\n                        newLayerCharacter: newCha\r\n                    });\r\n                    actionDataCrtMove({ type: 'CRT_MOVING' });\r\n                    setShowText(false);\r\n                    clearTimeout(timeOut1);\r\n                }, 1000)\r\n                allowToDice.current = true;\r\n                // setListPicture(newArr);\r\n                clearTimeout(timeOut);\r\n            }, 1000)\r\n\r\n        }\r\n\r\n    }\r\n    //lay thong tin cua ban do\r\n    useEffect(() => {\r\n        setIsLoading(true);\r\n\r\n        // fetch('https://api.npoint.io/6a4c897196b39197353e')\r\n        //     .then(jsonData => jsonData.json())\r\n        //     .then(data => {\r\n\r\n        //         actionDataCrtMove({ type: 'INIT_DATA_CRT' });\r\n        //         setCodebeauty(data);\r\n        //         setArrImage(Object.values(data?.tileSets).map(item => {\r\n        //             return item?.src;\r\n        //         }))\r\n\r\n        //         PreloadImage({ questions: data.questions }, (images) => {\r\n        //             console.log(images);\r\n        //             cacheImageXepHinh.current = images;\r\n        //         })\r\n        //         setCurMap(data?.maps)\r\n        //         eventOfRoad.current = data?.define_item_map;\r\n        //         listQuestion.current = data?.questions;\r\n\r\n        //         sessionStorage.setItem('arrIndexQuestion', `[${Object.keys(listQuestion.current).toString()}]`);\r\n\r\n        //         setWrong(() => {\r\n        //             return {\r\n        //                 'maxWrong': data.max_wrong >= 1 ? data.max_wrong : 2,\r\n        //                 'quantityWrongCur': 0\r\n        //             }\r\n        //         })\r\n        //         setTimeout(() => {\r\n\r\n\r\n        //             setIsLoading(false);\r\n        //         }, 3000);\r\n        //     }).catch(err => {\r\n        //         console.log(err);\r\n        //     })\r\n\r\n\r\n\r\n        new Promise(resolve => {\r\n            resolve();\r\n        }).then(() => {\r\n            const dataMap = sessionStorage.getItem('dataMap');\r\n            console.log('lay data map', dataMap);\r\n\r\n            return JSON.parse(dataMap);\r\n        }).then((data) => {\r\n            actionDataCrtMove({ type: 'INIT_DATA_CRT' });\r\n            setCodebeauty(data);\r\n            setArrImage(Object.values(data?.tileSets).map(item => {\r\n                return item?.src;\r\n            }))\r\n\r\n            PreloadImage({ questions: data.questions }, (images) => {\r\n                console.log(images);\r\n                cacheImageXepHinh.current = images;\r\n            })\r\n            setCurMap(data?.maps)\r\n            eventOfRoad.current = data?.define_item_map;\r\n            listQuestion.current = data?.questions;\r\n\r\n            sessionStorage.setItem('arrIndexQuestion', `[${Object.keys(listQuestion.current).toString()}]`);\r\n\r\n            setWrong(() => {\r\n                return {\r\n                    'maxWrong': data.max_wrong >= 1 ? data.max_wrong : 2,\r\n                    'quantityWrongCur': 0\r\n                }\r\n            })\r\n            setIsLoading(false);\r\n\r\n        })\r\n\r\n    }, [])\r\n\r\n    function setCurMap(maps) {\r\n        const keyMap = Object.keys(maps);\r\n        const randomMap = maps[keyMap[Math.floor(Math.random() * (_.size(keyMap)))]];\r\n        // const randomMap = maps[keyMap[1]];\r\n        setCurrentMap(randomMap);\r\n        // setListPicture(randomMap?.layers);\r\n\r\n        actionDataMap({\r\n            type: \"INIT_MAP\",\r\n            currentMap: randomMap\r\n        });\r\n    }\r\n    //Load anh map\r\n    function loadImage() {\r\n        const loadImage = url => {\r\n            return new Promise((resolve, reject) => {\r\n                const img = new Image();\r\n                img.onload = () => resolve(img);\r\n                img.onerror = () => reject(new Error(`load ${url} fail`));\r\n                img.src = url;\r\n            });\r\n\r\n        };\r\n        const waitLoad = async () => {\r\n            const arr = arrImage.map(item => {\r\n                return loadImage(item);\r\n            })\r\n\r\n            Promise.all(arr).then((imgs) => {\r\n                setSrcImage(imgs);\r\n            })\r\n            // return await Promise.all(arr);\r\n        }\r\n\r\n        waitLoad();\r\n    }\r\n    // const loadImageMemo = useMemo(loadImage, [arrImage]);\r\n\r\n    useEffect(() => {\r\n        // if (!isEmpty(srcImage) && !isEmpty(dataMap)) {\r\n        //     draw2(srcImage);\r\n        // }\r\n\r\n    }, [dataMap, srcImage])\r\n\r\n    //sau khi ảnh src load xong\r\n    useEffect(() => {\r\n        if (!isEmpty(srcImage)) {\r\n\r\n            draw2(srcImage);\r\n        }\r\n    }, [srcImage])\r\n\r\n\r\n\r\n    //Tim chinh xacs map\r\n    useEffect(() => {\r\n        if (!isEmpty(dataMap)) {\r\n            // var dataRoad = findRoad([...Object.keys(arrLayer['road'])], dataMap.mapHeight);\r\n            var dataRoad = findRoad(Object.keys(dataMap.layers['road']), dataMap.mapHeight);\r\n\r\n            console.log('dataRoad', dataRoad);\r\n            setMap(dataRoad);\r\n\r\n        }\r\n    }, [isEmpty(dataMap)]);\r\n\r\n    function drawLayer2(layerCanvas, nameLayer, img) {\r\n        console.log('ve ' + nameLayer);\r\n        let ctx = layerCanvas.getContext(\"2d\");\r\n        ctx.clearRect(0, 0, layerCanvas.width, layerCanvas.height);\r\n        const size_of_crop = 32;\r\n        // const layerCur = arrLayer[nameLayer];\r\n        const layerCur = dataMap.layers[nameLayer];\r\n\r\n        // console.log(`srcImage`, srcImage);\r\n        if (false) {\r\n            console.log('dung buffer ' + nameLayer);\r\n            ctx.drawImage(bufferLayers[nameLayer], 0, 0);\r\n        }\r\n        else {\r\n            for (const key in layerCur) {\r\n                const positionX = Number(key.split(\"-\")[0]);\r\n                const positionY = Number(key.split(\"-\")[1]);\r\n                const tilesheetX = layerCur[key]?.x;\r\n                const tilesheetY = layerCur[key]?.y;\r\n                ctx.drawImage(\r\n                    img[layerCur[key].tilesetIdx],\r\n                    tilesheetX * 32,\r\n                    tilesheetY * 32,\r\n                    size_of_crop,\r\n                    size_of_crop,\r\n                    positionX * 32,\r\n                    positionY * 32,\r\n                    size_of_crop,\r\n                    size_of_crop\r\n                );\r\n            }\r\n\r\n\r\n\r\n\r\n        }\r\n        // setBufferLayers((oldbuffer) => {\r\n        //     console.log('ve lai ' + nameLayer);\r\n        //     return { ...oldbuffer, [nameLayer]: ctx }\r\n        // })\r\n    }\r\n\r\n\r\n    const draw2 = (img) => {\r\n        console.log(`status map`, dataMap.status);\r\n        for (const key in dataMap.layers) {\r\n            drawLayer2(refLayers.current[key], key, img);\r\n        }\r\n\r\n\r\n        // console.log('ve xong');\r\n        // var crt = refLayers.current['charater'];\r\n        // var road = refLayers.current['road'];\r\n        // crt.getContext('2d').fillRect(0,0,10,10);\r\n        // crt.getContext('2d').drawImage(road, 17 * 32, 17 * 32, 100, 100);\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    const handleCloseModal = (type) => {\r\n        if (!type) {\r\n            allowToDice.current = true;\r\n        }\r\n        console.log('so mang con lai', wrong);\r\n\r\n        setShowQuestion(false);\r\n    }\r\n    const PopupQuestion = () => {\r\n        return (\r\n            <CacheImageProvider\r\n                imagesCache={cacheImageXepHinh.current}\r\n            >\r\n                <BodyQuestion\r\n                    questions={listQuestion.current}\r\n                    onCloseModal={handleCloseModal}\r\n                    onBackToPrev={backToPreviousStep}\r\n                />\r\n            </CacheImageProvider>\r\n\r\n        )\r\n    }\r\n    const showCountWrong = () => {\r\n\r\n        if (!isEmpty(wrong)) {\r\n            let wrongConLai = wrong.maxWrong - wrong.quantityWrongCur;\r\n            return Array.from(new Array(wrongConLai), () => {\r\n                return <img className='animate__animated animate__bounce' src=\"https://img.icons8.com/stickers/20/000000/like.png\" />\r\n            });\r\n        }\r\n\r\n    }\r\n    const widthCanvas = dataMap?.width * dataMap?.mapWidth / 10;\r\n    const heightCanvas = dataMap?.height * dataMap?.mapHeight / 10;\r\n\r\n    const handleShowText = (text) => {\r\n        return (\r\n            <AnimationText text={text} top={'10%'} left={'32%'} size={'50px'} />\r\n        )\r\n    }\r\n\r\n    //show modal huong dan\r\n    const handleShowModalIntroduction = (type) => {\r\n        console.log(\"type\", type);\r\n        setTypeModal(type);\r\n    }\r\n\r\n    return (\r\n        <Base\r\n            headerBody={isLoading && <Loading></Loading>}\r\n            body={\r\n                <>\r\n                    {isDice && <Dice status={onDice} randomAngle={randomDice.current} isDice={isDice} />}\r\n                    {showText && handleShowText(showText)}\r\n                    { !_.isEmpty(map) &&\r\n                        <>\r\n                            <div className={clsx({ 'text-black': showQuestion }, { 'text-blue': !showQuestion })}>\r\n                                <TotalTime />\r\n\r\n                            </div>\r\n                            <div id='roll' className='roll-button' hidden={!allowToDice.current} onClick={handleMove}><button className='button_dice'>Xúc xắc</button></div>\r\n                            <div className='tim'\r\n                                // style={{ position: 'fixed', right: '32%', zIndex: 1 }} \r\n                                hidden={showQuestion}>\r\n                                {showCountWrong()}\r\n                            </div>\r\n                            <div id=\"canvasesdiv\" style={{\r\n                                width: '100%', minHeight: '100%',\r\n                                position: \"relative\"\r\n\r\n                            }}>\r\n                                <canvas\r\n                                    ref={(ref) => {\r\n\r\n                                        refLayers.current['base'] = ref;\r\n                                    }}\r\n                                    className='layer-map layer-base'\r\n\r\n\r\n                                    width={widthCanvas}\r\n                                    height={heightCanvas}\r\n                                >\r\n                                </canvas>\r\n                                <canvas\r\n                                    ref={(ref) => {\r\n\r\n                                        refLayers.current['item-base'] = ref;\r\n                                    }}\r\n                                    className='layer-map layer--item-base'\r\n                                    width={widthCanvas}\r\n                                    height={heightCanvas}\r\n                                >\r\n                                </canvas>\r\n                                <canvas\r\n                                    ref={(ref) => {\r\n\r\n                                        refLayers.current['road'] = ref;\r\n                                    }}\r\n                                    className='layer-map layer--road'\r\n                                    width={widthCanvas}\r\n                                    height={heightCanvas}\r\n                                >\r\n                                </canvas>\r\n                                <canvas\r\n                                    ref={(ref) => {\r\n\r\n                                        refLayers.current['item-road'] = ref;\r\n                                    }}\r\n                                    className='layer-map layer--item-road'\r\n                                    width={widthCanvas}\r\n                                    height={heightCanvas}\r\n                                >\r\n                                </canvas>\r\n                                <canvas\r\n                                    ref={(ref) => {\r\n\r\n                                        refLayers.current['charater'] = ref;\r\n                                    }}\r\n                                    className='layer-map layer--item-charater'\r\n                                    width={widthCanvas}\r\n                                    height={heightCanvas}\r\n\r\n                                    style={{display : \"none\"}}\r\n                                >\r\n                                </canvas>\r\n                                <RobotModel canvasRef={canvasRef} currentPoint={currentPoint.current} map={map}\r\n                                    setIsCrtMoving={setIsCrtMoving}\r\n                                    width={widthCanvas}\r\n                                    height={heightCanvas}\r\n                                    {...{ dataCrtMove, actionDataCrtMove }}\r\n                                />\r\n                            </div>\r\n\r\n\r\n\r\n                        </>\r\n                    }\r\n\r\n                    {/* <img ref={imageE} hidden/> */}\r\n\r\n                    {dataCrtMove.status === 'CRT_STOP_MOVING' && !isCrtMoving && showQuestion && PopupQuestion()}\r\n                    {/* {typeModal && ModalIntroductionMap()} */}\r\n                    {typeModal && <GuideMap {...{ itemModal: itemModal.current, srcImage, setTypeModal }} />}\r\n\r\n                </>\r\n\r\n            }\r\n            // isLoading={isLoading} \r\n            text={\"Đang tải bản đồ\"} onSetTypeModal={handleShowModalIntroduction} />\r\n\r\n\r\n    );\r\n}\r\n\r\nexport default MapComponent;","import clsx from 'clsx';\r\nimport styleStart from './Start.module.scss';\r\nimport styleBase from '../Base/Base.module.scss';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction BodyStart(props) {\r\n    const navigate = useNavigate();\r\n    return (\r\n        <>\r\n            <div className={clsx('row')}>\r\n                <div className={clsx(styleStart['image-start'])}>\r\n                    <img src={process.env.PUBLIC_URL + \"/assets/images/start.png\"} alt=\"\" />\r\n                </div>\r\n            </div>\r\n            <div className={clsx(styleBase['center-flex'], 'row', 'mt-2')}>\r\n                <div \r\n                onClick={() => {\r\n                    navigate('/map');\r\n                }}\r\n                className={clsx('btn', 'col-4', styleBase['btn-mobile'], styleStart['btn-start'])}>\r\n                    Bắt đầu1\r\n                </div>\r\n\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default BodyStart;","import { Base } from '../Base';\r\nimport BodyStart from './BodyStart';\r\n\r\nfunction Start(props) {\r\n    return (\r\n        <>\r\n            <Base body={<BodyStart></BodyStart>}>\r\n            </Base>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Start;","import React, { useEffect, useState } from 'react';\r\nimport { Base } from '../Base';\r\nimport {useNavigate} from 'react-router-dom'\r\nimport './lose.css'\r\nfunction Lose(props) {\r\n    const navigate = useNavigate();\r\n    const caculatorTime = (time) => {\r\n        const second = time % 60 >=10 ?  time % 60 : `0${ time % 60}`;\r\n        const minute = Math.floor(time / 60)  >=10 ?  Math.floor(time / 60) : `0${ Math.floor(time / 60)}`;\r\n        return `${minute} phút ${second} giây`;\r\n    }\r\n    const [totalTime, setTotalTime] = useState(0);\r\n    useEffect(() => {\r\n        setTotalTime(JSON.parse(sessionStorage.getItem('totalTime')));\r\n    }, [sessionStorage.getItem('totalTime')])\r\n    return (\r\n        <div>\r\n            <img \r\n            style={{width: '100%', height: '745px',}}\r\n            src='https://previews.123rf.com/images/lilu330/lilu3301612/lilu330161200073/68821802-beautiful-mountain-meadow-landscape-vector-cartoon-outdoor-illustration-sunny-day-background-for-gam.jpg'/>\r\n            <span className='game_over'>GAME OVER</span>\r\n            <span className='total_time_play_lose'>Tổng thời gian chơi: {caculatorTime(totalTime)}</span>\r\n            <button className='play_again' onClick={() => {\r\n                 navigate('/map');\r\n                 sessionStorage.removeItem('totalTime')\r\n            }}>Chơi lại</button>\r\n            <button className='exit_game' onClick={() => {\r\n                navigate('/start')\r\n                sessionStorage.removeItem('totalTime')\r\n            }}>Thoát</button>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nfunction MainLose () {\r\n    return (\r\n        <Base body={<Lose/>}/>\r\n    )\r\n}\r\nexport default MainLose;","import React, { useEffect } from 'react';\r\nimport { Base } from '../Base';\r\nimport headbreaker, {Painter} from 'headbreaker';\r\n\r\nfunction Test(props) {\r\n    console.log('headbreaker.Canvas', headbreaker.Canvas);\r\n    // useEffect(() => {\r\n    //     let pettoruti = new Image();\r\n    //     pettoruti.src = 'https://d25tv1xepz39hi.cloudfront.net/2016-01-31/files/1045.jpg';\r\n    //     pettoruti.onload = () => {\r\n    //       const validated = new headbreaker.Canvas('validated-canvas', {\r\n    //         width: 800, height: 900,\r\n    //         pieceSize: 80, proximity: 18,\r\n    //         borderFill: 8, strokeWidth: 1.5,\r\n    //         lineSoftness: 0.18, image: pettoruti,\r\n    //         // used to stick canvas to its current position\r\n    //         fixed: true,\r\n           \r\n    //       });\r\n    //       validated.autogenerate({\r\n    //         horizontalPiecesCount: 5,\r\n    //         verticalPiecesCount: 8\r\n    //       });\r\n    //       validated.puzzle.pieces[4].translate(63, -56);\r\n    //       validated.draw();\r\n    //       validated.attachSolvedValidator();\r\n    //       validated.onValid(() => {\r\n    //         setTimeout(() => {\r\n    //           document.getElementById('validated-canvas-overlay').setAttribute(\"class\", \"active\");\r\n    //         }, 1500);\r\n    //       })\r\n    //     }\r\n\r\n    // })\r\n\r\n\r\n    var body = <>\r\n        <canvas id='validated-canvas'></canvas>\r\n\r\n    </>;\r\n\r\n    return (\r\n        <Base body={body}>\r\n\r\n        </Base>\r\n    );\r\n}\r\n\r\nexport default Test;","// import {Base} from \"./Base\";\r\nimport Complete from \"./Complete/Complete\";\r\nimport { Question } from \"./Question\";\r\nimport Scan from \"./Scan/Scan\";\r\nimport MapComponent from './Map/index'\r\nimport { Start } from \"./Start\";\r\nimport Lose from \"./lose\";\r\nimport Test from \"./Test\";\r\nimport { Loading } from \"../components/Loading\";\r\n\r\nexport default [\r\n    {\r\n        path : '/',\r\n        element : <Start/>,\r\n        name : 'Home'\r\n    }, {\r\n        path : '/start',\r\n        element : <Start/>,\r\n        name : 'start'\r\n    }, {\r\n        path : '/question',\r\n        element : <Question/>,\r\n        name : 'question'\r\n    },\r\n    {\r\n        path : '/complete',\r\n        element : <Complete/>,\r\n        name : 'Complete'\r\n    },\r\n    {\r\n        path : '/scan',\r\n        element : <Scan/>,\r\n        name : 'scan'\r\n    },\r\n    {\r\n        path : '/map',\r\n        element : <MapComponent/>,\r\n        name : 'map'\r\n    },\r\n    {\r\n        path : '/lose',\r\n        element : <Lose/>,\r\n        name : 'lose'\r\n    },  {\r\n        path : '/test',\r\n        element : <Test/>,\r\n        name : 'lose'\r\n    }, {\r\n        path : '/loading',\r\n        element : <Loading/>,\r\n        name : 'lose'\r\n    },\r\n]","// import logo from './logo.svg';\r\nimport { BrowserRouter, Route, Routes } from 'react-router-dom';\r\n// import './App.css';\r\nimport 'animate.css';\r\nimport routes from './pages/routes';\r\n\r\n\r\nfunction App() {\r\n  return (\r\n      <BrowserRouter>\r\n        <Routes>\r\n          {\r\n            routes.map(({ path, element }, index) => {\r\n              return (\r\n                <Route path={path} element={element} key={index} />\r\n              )\r\n            })\r\n          }\r\n        </Routes>\r\n      </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\n\r\n\r\nReactDOM.render(\r\n    // <React.StrictMode>\r\n    <\r\n    App / >\r\n    // </React.StrictMode>,\r\n    ,\r\n    document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n// reportWebVitals();","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loading\":\"loading_loading__3JlrZ\",\"background\":\"loading_background__25miB\",\"textLoading\":\"loading_textLoading__3BFnL\",\"crtLoading\":\"loading_crtLoading__21Om6\",\"loadingText05\":\"loading_loadingText05__28_2Z\",\"loadingAnimation\":\"loading_loadingAnimation__2Wt7t\",\"container\":\"loading_container__3Wpra\",\"cube\":\"loading_cube__rB9rR\",\"right\":\"loading_right__1K_Ru\",\"left\":\"loading_left__5plkl\",\"top\":\"loading_top__2-IJx\",\"face\":\"loading_face__1UfAO\",\"h1\":\"loading_h1__25gm2\",\"w1\":\"loading_w1__2YToN\",\"l1\":\"loading_l1__2VRHs\",\"h1w1l1\":\"loading_h1w1l1__3VGLn\",\"l2\":\"loading_l2__3LYQE\",\"h1w1l2\":\"loading_h1w1l2__3HCK0\",\"l3\":\"loading_l3__35DAO\",\"h1w1l3\":\"loading_h1w1l3__2acne\",\"w2\":\"loading_w2__25Kkd\",\"h1w2l1\":\"loading_h1w2l1__ibhdk\",\"h1w2l2\":\"loading_h1w2l2__2G6RA\",\"h1w2l3\":\"loading_h1w2l3__7qn1M\",\"w3\":\"loading_w3__2n-eP\",\"h1w3l1\":\"loading_h1w3l1__26wX4\",\"h1w3l2\":\"loading_h1w3l2__2wNCH\",\"h1w3l3\":\"loading_h1w3l3__lJC0t\",\"h2\":\"loading_h2__1WwVv\",\"h2w1l1\":\"loading_h2w1l1__3sMbh\",\"h2w1l2\":\"loading_h2w1l2__3TUcs\",\"h2w1l3\":\"loading_h2w1l3__3iUPG\",\"h2w2l1\":\"loading_h2w2l1__2PVWL\",\"h2w2l2\":\"loading_h2w2l2__1Dw0E\",\"h2w2l3\":\"loading_h2w2l3__2Qicw\",\"h2w3l1\":\"loading_h2w3l1__2AKND\",\"h2w3l2\":\"loading_h2w3l2__1qn8L\",\"h2w3l3\":\"loading_h2w3l3__2DHKo\",\"h3\":\"loading_h3__1nqCA\",\"h3w1l1\":\"loading_h3w1l1__17nDU\",\"h3w1l2\":\"loading_h3w1l2__8Ihvk\",\"h3w1l3\":\"loading_h3w1l3__3Fch3\",\"h3w2l1\":\"loading_h3w2l1__1BeTz\",\"h3w2l2\":\"loading_h3w2l2__1xN8U\",\"h3w2l3\":\"loading_h3w2l3__2z_9f\",\"h3w3l1\":\"loading_h3w3l1__2GJDo\",\"h3w3l2\":\"loading_h3w3l2__1pGhE\",\"h3w3l3\":\"loading_h3w3l3__3Ynw9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container-effect\":\"Hoaroi_container-effect__1IsWt\",\"confetti-container\":\"Hoaroi_confetti-container__3Ad9s\",\"confetti\":\"Hoaroi_confetti__24E-E\",\"confetti--animation-slow\":\"Hoaroi_confetti--animation-slow__1q0fN\",\"confetti-slow\":\"Hoaroi_confetti-slow__3U4kJ\",\"confetti--animation-medium\":\"Hoaroi_confetti--animation-medium__F6vj4\",\"confetti-medium\":\"Hoaroi_confetti-medium__2BfH4\",\"confetti--animation-fast\":\"Hoaroi_confetti--animation-fast__3Dpe7\",\"confetti-fast\":\"Hoaroi_confetti-fast__V2W8c\",\"checkmark\":\"Hoaroi_checkmark__tk8iD\"};"],"sourceRoot":""}