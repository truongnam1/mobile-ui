{"version":3,"sources":["pages/Base/Base.module.scss","pages/Question/Question.module.scss","pages/Start/Start.module.scss","components/Loading/loading.module.scss","pages/Question/XepHinh/XepHinh.module.scss","pages/Complete/Complete.module.scss","pages/Scan/Scan.module.scss","assets/js/effects/HoaRoi.js","components/HoaRoi/index.jsx","pages/Base/Body.jsx","pages/Base/Header.jsx","pages/Base/Overlay.jsx","pages/Base/Base.jsx","pages/Complete/Background.jsx","pages/Complete/BodyComplete.jsx","pages/Complete/Complete.jsx","components/Button/Button.jsx","components/Text/index.jsx","components/CountTime/index.jsx","pages/Question/TracNghiem/index.jsx","assets/js/fetchData.js","Provider/CacheImageContext.jsx","pages/Question/XepHinh/index.jsx","components/Toast/index.jsx","pages/Scan/ScanQr.js","pages/Scan/BodyScan.jsx","pages/Scan/Scan.jsx","pages/Question/BodyQuestion.jsx","pages/Question/Question.jsx","pages/Question/index.jsx","pages/Map/dice.js","pages/Map/robot.jsx","pages/Map/findRoad.jsx","pages/Map/PreloadImage.jsx","components/CountTime/totalTime.jsx","components/Canvas/index.jsx","pages/Map/GuideMap.jsx","components/Loading/BodyLoading.jsx","components/Loading/Loading.jsx","pages/Map/index.jsx","pages/Start/BodyStart.jsx","pages/Start/Start.jsx","pages/lose/index.jsx","pages/Test/index.jsx","pages/routes.jsx","App.jsx","index.js","assets/scss/base/Effects/Hoaroi.module.scss"],"names":["module","exports","Confettiful","el","this","containerEl","confettiFrequency","confettiColors","confettiAnimations","_setupElements","_renderConfetti","prototype","document","createElement","elPosition","style","position","classList","add","styleHoaroi","appendChild","confettiInterval","setInterval","console","log","confettiEl","confettiSize","Math","floor","random","confettiBackground","length","confettiLeft","offsetWidth","confettiAnimation","left","width","height","backgroundColor","removeTimeout","setTimeout","parentNode","removeChild","HoaRoiComponent","props","refContainerHoaRoi","useRef","useEffect","current","window","confettiful","HoaRoi","clearInterval","ref","className","clsx","styleHoaRoi","Body","children","isLoading","styleBase","role","top","right","zIndex","text","Header","visibleTopMain","onSetTypeModal","RemoveHQ","useNavigate","removeBack","onClick","Overlay","src","process","alt","Base","visibleNavbar","propsHeader","propsBody","propsOverlay","header","headerBody","body","overlay","elMain","useState","setVisibleTopMain","handleVisibleTopMain","addEventListener","removeEventListener","useLayoutEffect","store","setState","main","Background","styleComplete","BodyComplete","totalTime","setTotalTime","JSON","parse","sessionStorage","getItem","navigate","time","second","minute","caculatorTime","date","Date","data","getDate","getMonth","getFullYear","dateNow","Complete","Button","AnimationText","size","color","fontSize","fontFamily","CountTime","firstValue","onClearTime","onBackToPrev","onChangeStatusTime","count","setCount","prev","timeOut","clearTimeout","TracNghiem","onCloseModal","questions","countdown","isChoose","setIsChoose","answer","stopTime","setStopTime","class","question","selects","map","item","index","pick","id","tabIndex","type","timeToOut","minHeight","suggest","FetchData","getData","fetch","then","response","json","callbackDone","urlItem","url_full","CacheImageContext","createContext","CacheImageProvider","Provider","value","XepHinh","urlImage","setUrlImage","isDone","setIsDone","dataImagesCache","useContext","imagesCache","image_id","desc","styleXepHinh","margin","border","padding","imageSrc","rows","columns","onSolved","maxHeight","Toast","dataToast","container","status","success","error","ScanQr","arrDeviceCamera","currentCameraId","html5QrCode","callbackCorrect","_start","callbackStartDone","Html5Qrcode","getCameras","devices","catch","err","alert","_changeCamera","indexCam","findIndex","cameraIdNew","stop","ignore","_displayCamera","cameraId","tempTextRes","start","fps","qrbox","decodedText","decodedResult","errorMessage","r","querySelector","styleScan","display","_checkIn","callBack","resQr","Number","isInteger","parseInt","dataMuseum","cbCorrect","cbWrong","tempDate","getTime","_stopCamera","BodyScan","showText","setShowText","setDataToast","showToastCheckIn","setShowToastCheckIn","scanQr","useMemo","correct_answer","hash","dataString","stringify","setItem","Scan","config","BodyQuestion","arrIndexQuestion","indexQuestionRd","typeQuestion","filter","indexQuestion","toString","useGlobalState","styleQuestion","configCD","configQuestion","questionItem","Question","Dice","randomAngle","isDice","numberDice","setNumberDice","dice","handleDice","RobotModel","canvasRef","currentPoint","setIsCrtMoving","dataCrtMove","actionDataCrtMove","onShowText","split","posArr","oldPoint","setOldPoint","innerWidth","CELL_SIZE","setCellSize","character","animationCrt","setAnimationCrt","dir","setDir","actionControl","checkDirection","oldPos","newPos","UP","DOWN","LEFT","RIGHT","handleMoveCrt","currentPoint1","Promise","resolve","warn","directionArr","i","currentStep","nextStep","push","timePerStep","TIME_PER_MOVEMENT","robotRec","getElementById","timeScale","moveLoop","a","moveDirection","frame","doIt","delay","move","decreasePixel","pixel","num","increasePixel","nextPoint","nextTypeStep","rec","delayInms","ratioPixel","documentElement","setProperty","findRoad","arr","heightMap","_","isEmpty","firstPoint","arrPoint","includes","findFirtPoint","newArr","remove","x","y","x1","y1","pow","sort","loadImage","url","imageId","reject","img","Image","onload","onerror","Error","cacheImage","arrQXephinh","promisesUrlImage","all","arrUrlItem","promisesCacheImage","res","objImages","PreloadImage","TotalTime","onSetSesTotal","iTime","Canvas","keys","ctx","getContext","clearRect","positionX","positionY","drawImage","GuideMap","itemModal","srcImage","setTypeModal","float","marginTop","alignItems","effect","des","td","tilesetIdx","BodyLoading","faceCube","styleLoading","face","textLoading","loadingText05","crtLoading","loading","background","h1Container","cube","h1","w1","l1","l2","l3","w2","w3","h2Container","h2","h3Container","h3","Loading","elLoading","MapComponent","codebeautty","setCodebeauty","setMap","onDice","setOnDice","randomDice","setIsDice","showQuestion","setShowQuestion","setIsLoading","navigation","listQuestion","previousStep","wrong","setWrong","typeModal","eventOfRoad","allowToDice","beforeTypeEvent","setCurrentMap","arrImage","setArrImage","setSrcImage","refLayers","useReducer","oldState","action","layersMap","currentMap","layers","infoMap","layer","name","tiles","waitLoad","imgs","newLayers","newLayerCharacter","dataMap","actionDataMap","arrStep","prePoint","arrTypeStep","prevTypeStep","point","typeStep","tempPrePoint","temPreTypeStep","shift","cacheImageXepHinh","isCrtMoving","arrStepPoint","filterEventOfRoad","result","reduce","object","key","define_item_map","temp","Object","entries","tileSets","tileData","tile","tileSymbol","newItem","validateStep","toado","typeEvent","numberTele","typeFilterEvent","currentTele","indexOf","handleValidateMove","typeIndexTele","timeShowQues","step","hi","pictureCha","values","charater","newCha","backToPreviousStep","quantityWrongCur","maxWrong","oldWrong","timeOut1","drawLayer2","layerCanvas","nameLayer","layerCur","tilesheetX","tilesheetY","images","maps","keyMap","randomMap","setCurMap","max_wrong","draw2","dataRoad","mapHeight","handleCloseModal","widthCanvas","mapWidth","heightCanvas","hidden","newPoint","timeOut2","wrongConLai","Array","from","showCountWrong","valueShowText","BodyStart","styleStart","Start","Lose","removeItem","MainLose","Test","headbreaker","path","element","App","routes","ReactDOM","render"],"mappings":"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","file":"static/js/main.8561733c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"center-flex\":\"Base_center-flex__3e8rV\",\"test\":\"Base_test__2CQ9W\",\"between-flex\":\"Base_between-flex__2JEdH\",\"display-none\":\"Base_display-none__nQkqB\",\"bg-button\":\"Base_bg-button__1Q_DI\",\"bg-main\":\"Base_bg-main__2wYth\",\"bg-body\":\"Base_bg-body__2lWNk\",\"main\":\"Base_main__2wifJ\",\"main-top\":\"Base_main-top__3pU-Q\",\"container-back_button\":\"Base_container-back_button__3tNFJ\",\"container-home-and-question\":\"Base_container-home-and-question__6dyvD\",\"btn-mobile\":\"Base_btn-mobile__radJB\",\"btn-scan\":\"Base_btn-scan__3JmSL\",\"btn-custom\":\"Base_btn-custom__3d8Xn\",\"main-body\":\"Base_main-body__36lCJ\",\"overlay-main\":\"Base_overlay-main__2kaKX\",\"guide\":\"Base_guide__2aDFR\",\"text-box-guide\":\"Base_text-box-guide__3l6uX\",\"icon-item-guide\":\"Base_icon-item-guide__3jTXU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"center-flex\":\"Question_center-flex__-anrB\",\"test\":\"Question_test___t0ic\",\"between-flex\":\"Question_between-flex__1mBTr\",\"display-none\":\"Question_display-none__1GGPa\",\"bg-button\":\"Question_bg-button__284uC\",\"bg-main\":\"Question_bg-main__1h2b8\",\"bg-body\":\"Question_bg-body__2y8vy\",\"main\":\"Question_main__2FJ9F\",\"main-top\":\"Question_main-top__7jASS\",\"container-back_button\":\"Question_container-back_button__1Abn_\",\"container-home-and-question\":\"Question_container-home-and-question__J8x9q\",\"btn-mobile\":\"Question_btn-mobile__nTee-\",\"btn-scan\":\"Question_btn-scan__JEuNq\",\"btn-custom\":\"Question_btn-custom__3hNpb\",\"main-body\":\"Question_main-body__2O-Yg\",\"overlay-main\":\"Question_overlay-main__38N4X\",\"guide\":\"Question_guide__1bcUQ\",\"text-box-guide\":\"Question_text-box-guide__2RGdK\",\"icon-item-guide\":\"Question_icon-item-guide__3Ms-J\",\"body-question\":\"Question_body-question__2VXvc\",\"main-question\":\"Question_main-question__1dTCt\",\"tranformS\":\"Question_tranformS__tyM8T\",\"clock-goiy\":\"Question_clock-goiy__jXq27\",\"artifacts\":\"Question_artifacts___TfMU\",\"mySlides-artifacts\":\"Question_mySlides-artifacts__2Red6\",\"mySlides-artifacts--item\":\"Question_mySlides-artifacts--item__1qm7Q\",\"icon-choice\":\"Question_icon-choice__3vs5-\",\"container-decription-history\":\"Question_container-decription-history__ZtLVA\",\"container-suggestions\":\"Question_container-suggestions__9l6ve\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image-start\":\"Start_image-start__3ZuIg\",\"btn-start\":\"Start_btn-start__3gVGw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loading\":\"loading_loading__3JlrZ\",\"background\":\"loading_background__25miB\",\"textLoading\":\"loading_textLoading__3BFnL\",\"crtLoading\":\"loading_crtLoading__21Om6\",\"loadingText05\":\"loading_loadingText05__28_2Z\",\"loadingAnimation\":\"loading_loadingAnimation__2Wt7t\",\"container\":\"loading_container__3Wpra\",\"cube\":\"loading_cube__rB9rR\",\"right\":\"loading_right__1K_Ru\",\"left\":\"loading_left__5plkl\",\"top\":\"loading_top__2-IJx\",\"face\":\"loading_face__1UfAO\",\"h1\":\"loading_h1__25gm2\",\"w1\":\"loading_w1__2YToN\",\"l1\":\"loading_l1__2VRHs\",\"h1w1l1\":\"loading_h1w1l1__3VGLn\",\"l2\":\"loading_l2__3LYQE\",\"h1w1l2\":\"loading_h1w1l2__3HCK0\",\"l3\":\"loading_l3__35DAO\",\"h1w1l3\":\"loading_h1w1l3__2acne\",\"w2\":\"loading_w2__25Kkd\",\"h1w2l1\":\"loading_h1w2l1__ibhdk\",\"h1w2l2\":\"loading_h1w2l2__2G6RA\",\"h1w2l3\":\"loading_h1w2l3__7qn1M\",\"w3\":\"loading_w3__2n-eP\",\"h1w3l1\":\"loading_h1w3l1__26wX4\",\"h1w3l2\":\"loading_h1w3l2__2wNCH\",\"h1w3l3\":\"loading_h1w3l3__lJC0t\",\"h2\":\"loading_h2__1WwVv\",\"h2w1l1\":\"loading_h2w1l1__3sMbh\",\"h2w1l2\":\"loading_h2w1l2__3TUcs\",\"h2w1l3\":\"loading_h2w1l3__3iUPG\",\"h2w2l1\":\"loading_h2w2l1__2PVWL\",\"h2w2l2\":\"loading_h2w2l2__1Dw0E\",\"h2w2l3\":\"loading_h2w2l3__2Qicw\",\"h2w3l1\":\"loading_h2w3l1__2AKND\",\"h2w3l2\":\"loading_h2w3l2__1qn8L\",\"h2w3l3\":\"loading_h2w3l3__2DHKo\",\"h3\":\"loading_h3__1nqCA\",\"h3w1l1\":\"loading_h3w1l1__17nDU\",\"h3w1l2\":\"loading_h3w1l2__8Ihvk\",\"h3w1l3\":\"loading_h3w1l3__3Fch3\",\"h3w2l1\":\"loading_h3w2l1__1BeTz\",\"h3w2l2\":\"loading_h3w2l2__1xN8U\",\"h3w2l3\":\"loading_h3w2l3__2z_9f\",\"h3w3l1\":\"loading_h3w3l1__2GJDo\",\"h3w3l2\":\"loading_h3w3l2__1pGhE\",\"h3w3l3\":\"loading_h3w3l3__3Ynw9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"box-xepHinh\":\"XepHinh_box-xepHinh__1hXAw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"background-configration\":\"Complete_background-configration__2MB8w\",\"background-screen-winner\":\"Complete_background-screen-winner__oyqA-\",\"image-huychuong\":\"Complete_image-huychuong__uY42S\",\"container-winner-content\":\"Complete_container-winner-content__3fSRm\",\"done-clock-text\":\"Complete_done-clock-text__lpFu7\",\"bg-winner-content\":\"Complete_bg-winner-content__3Apwm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"control-camera\":\"Scan_control-camera__xd9E0\",\"item-control-camera\":\"Scan_item-control-camera__2gMSB\",\"camera\":\"Scan_camera__1w95i\",\"view-camera\":\"Scan_view-camera__2l6vB\"};","import styleHoaroi from '../../scss/base/Effects/Hoaroi.module.scss';\r\n\r\nconst Confettiful = function(el) {\r\n    this.el = el;\r\n    this.containerEl = null;\r\n\r\n    this.confettiFrequency = 3;\r\n    this.confettiColors = ['#EF2964', '#00C09D', '#2D87B0', '#48485E', '#EFFF1D'];\r\n    this.confettiAnimations = ['slow', 'medium', 'fast'];\r\n\r\n    this._setupElements();\r\n    this._renderConfetti();\r\n};\r\n\r\nConfettiful.prototype._setupElements = function() {\r\n    const containerEl = document.createElement('div');\r\n    const elPosition = this.el.style.position;\r\n\r\n    if (elPosition !== 'relative' || elPosition !== 'absolute') {\r\n        this.el.style.position = 'relative';\r\n    }\r\n\r\n    containerEl.classList.add(styleHoaroi['confetti-container']);\r\n\r\n    this.el.appendChild(containerEl);\r\n\r\n    this.containerEl = containerEl;\r\n};\r\n\r\nConfettiful.prototype._renderConfetti = function() {\r\n    this.confettiInterval = setInterval(() => {\r\n        console.log('hoaroi');\r\n        const confettiEl = document.createElement('div');\r\n        const confettiSize = (Math.floor(Math.random() * 3) + 7) + 'px';\r\n        const confettiBackground = this.confettiColors[Math.floor(Math.random() * this.confettiColors.length)];\r\n        const confettiLeft = (Math.floor(Math.random() * this.el.offsetWidth)) + 'px';\r\n        const confettiAnimation = this.confettiAnimations[Math.floor(Math.random() * this.confettiAnimations.length)];\r\n\r\n        confettiEl.classList.add(styleHoaroi['confetti'], styleHoaroi[`confetti--animation-${confettiAnimation}`]);\r\n        confettiEl.style.left = confettiLeft;\r\n        confettiEl.style.width = confettiSize;\r\n        confettiEl.style.height = confettiSize;\r\n        confettiEl.style.backgroundColor = confettiBackground;\r\n\r\n        confettiEl.removeTimeout = setTimeout(function() {\r\n            confettiEl.parentNode.removeChild(confettiEl);\r\n        }, 3000);\r\n\r\n        this.containerEl.appendChild(confettiEl);\r\n    }, 90);\r\n};\r\n\r\n\r\n// $('.js-container').append('<link rel=\"stylesheet\" href=\"./assets/css/effects/hoaroi.css\"/>');\r\n\r\n// window.confettiful = new Confettiful(document.querySelector('.js-container'));\r\nexport default Confettiful;","import React, { useEffect, useRef } from 'react';\r\nimport styleHoaRoi from '../../assets/scss/base/Effects/Hoaroi.module.scss';\r\nimport HoaRoi from '../../assets/js/effects/HoaRoi';\r\nimport clsx from 'clsx';\r\n\r\nfunction HoaRoiComponent(props) {\r\n    const refContainerHoaRoi = useRef();\r\n\r\n    useEffect(() => {\r\n        if (refContainerHoaRoi.current) {\r\n            console.log('khoi tao hoa roi');\r\n            window.confettiful = new HoaRoi(refContainerHoaRoi.current);\r\n        }\r\n\r\n        return () => {\r\n            console.log('huy hoa roi');\r\n            clearInterval(window.confettiful.confettiInterval);\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n    <div\r\n        ref={refContainerHoaRoi}\r\n        className={clsx(styleHoaRoi['container-effect'])}\r\n    ></div>\r\n    );\r\n}\r\n\r\nexport default HoaRoiComponent;","import clsx from 'clsx';\r\nimport styleBase from './Base.module.scss';\r\n\r\nfunction Body({children,isLoading, ...props}) {\r\n    // console.log(`props`, props);\r\n    // console.log(`children`, children);\r\n    return (\r\n        <>\r\n            <div className={clsx(styleBase['main-body'])} >\r\n                {children}\r\n                {isLoading && \r\n                    <>\r\n                        <div className=\"spinner-border text-primary\" role=\"status\" style={{position: 'fixed', top: '50%', right: '50%'}}>\r\n                            <span className=\"sr-only\">Loading...</span>\r\n                        </div>\r\n                        <span style={{position: 'fixed', top: '50%', right: '45%', zIndex: 3000}}>{props?.text}</span>\r\n                    </>\r\n                    \r\n                }\r\n               \r\n            </div>\r\n        </>\r\n\r\n    );\r\n}\r\n\r\nexport default Body;","import clsx from 'clsx';\r\n// import React, { useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nimport styleBase from './Base.module.scss';\r\n\r\n\r\nfunction Header({ children, visibleTopMain,onSetTypeModal, ...props }) {\r\n    let navigate = useNavigate();\r\n    // console.log(`propsHeader`, props);\r\n    const { RemoveHQ, removeBack } = props;\r\n\r\n    // const elTop = useRef();\r\n    // console.log(`visibleTopMain`, visibleTopMain);\r\n\r\n    return (\r\n        <div\r\n            className={clsx\r\n                (\r\n                    styleBase['main-top']\r\n                    , 'row'\r\n                    , 'gx-0'\r\n                    , {\r\n                        \"position-fixed\": visibleTopMain,\r\n                        [styleBase['display-none']]: !visibleTopMain\r\n                    }\r\n\r\n                )\r\n            }>\r\n            <div className={clsx(\r\n                {\r\n                    [styleBase['display-none']]: removeBack\r\n                }\r\n            )}>\r\n                {/* <div className={clsx(styleBase['container-back_button'])}>\r\n                    <i\r\n                        onClick={() => navigate('/start')}\r\n                        className={clsx('bi', 'bi-chevron-left')}\r\n                    >\r\n                    </i>\r\n                </div> */}\r\n            </div>\r\n            <div\r\n                className={clsx(\r\n                    // styleBase['between-flex'],\r\n                     styleBase['container-home-and-question'],\r\n                    { [styleBase['display-none']]: RemoveHQ }\r\n\r\n                )}\r\n            >\r\n                {/* <i onClick={() => navigate('/start')} \r\n                className={clsx('bi', 'bi-house-fill')}></i> */}\r\n                <i className={clsx('bi', 'bi-patch-question-fill')} onClick={() => {\r\n                    onSetTypeModal('map');\r\n                }}></i>\r\n            </div>\r\n            {children}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport styleBase from './Base.module.scss';\r\n\r\nfunction Overlay({ children, ...props }) {\r\n    return (\r\n        <div className={clsx(styleBase['overlay-main'])}>\r\n            <div className={clsx(styleBase['guide'])}>\r\n                <img className={clsx(styleBase['item-guide'], styleBase['image-guide'])} src={process.env.PUBLIC_URL  + \"/assets/images/Bot-1 1.png\"} alt=\"\" />\r\n\r\n                <div\r\n                    className={clsx(styleBase['bg-main'], styleBase['item-guide'], styleBase['text-box-guide'])}>\r\n                    <p>\r\n                        Xem hộp thành tựu để biết những điều đã đạt được. Cùng nhau giải đố để đi đến địa điểm tiếp theo. Và scan khi tới nơi.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Overlay;","import React, { useEffect, useLayoutEffect, useRef, useState } from 'react';\r\nimport clsx from 'clsx';\r\nimport styleBase from './Base.module.scss';\r\n\r\nimport Body from './Body';\r\nimport Header from './Header';\r\nimport Overlay from './Overlay';\r\nimport { store } from 'state-pool';\r\n\r\n\r\n\r\nfunction Base({ isLoading, onSetTypeModal, visibleNavbar = true, ...props }) {\r\n    // console.log(`styleBase`, styleBase);\r\n\r\n\r\n\r\n    var { propsHeader, propsBody, propsOverlay } = props;\r\n    var { top, header, headerBody, body, overlay } = props;\r\n    const elMain = useRef();\r\n\r\n    const [visibleTopMain, setVisibleTopMain] = useState(false);\r\n\r\n    useEffect(() => {\r\n        function handleVisibleTopMain() {\r\n            setVisibleTopMain(true);\r\n        }\r\n\r\n        elMain.current.addEventListener('scroll', handleVisibleTopMain);\r\n\r\n        return () => elMain.current?.removeEventListener('scroll', handleVisibleTopMain);\r\n\r\n    }, [])\r\n\r\n    if (visibleTopMain) {\r\n        setTimeout(() => {\r\n            setVisibleTopMain(false);\r\n        }, 2000)\r\n    }\r\n\r\n\r\n    useLayoutEffect(() => {\r\n        store.setState('elMain', elMain);\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            <div ref={elMain} className={clsx('container-sm', 'border', styleBase.main)}>\r\n                {top}\r\n                <Header {...propsHeader} visibleTopMain={visibleTopMain && visibleNavbar} onSetTypeModal={onSetTypeModal}>\r\n                    {header}\r\n                </Header>\r\n                {headerBody}\r\n                <Body isLoading={isLoading} {...props}>\r\n                    {body}\r\n                </Body>\r\n                <Overlay>\r\n                    {overlay}\r\n                </Overlay>\r\n                {props.children}\r\n            </div>\r\n        </>\r\n\r\n    );\r\n}\r\n\r\nexport default Base;\r\n","import styleComplete from './Complete.module.scss';\r\nimport clsx from 'clsx';\r\n\r\nfunction Background(props) {\r\n    return (\r\n        <div className={clsx(styleComplete['background-main'])}>\r\n            <div className={clsx(styleComplete['background-screen-winner'])}></div>\r\n            <div className={clsx(styleComplete['image-huychuong'])}></div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Background;","import React, { useState, useEffect } from 'react';\r\nimport styleComplete from './Complete.module.scss';\r\nimport styleBase from '../Base/Base.module.scss';\r\nimport clsx from 'clsx';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './complete.css'\r\nfunction BodyComplete(props) {\r\n\r\n    const [totalTime, setTotalTime] = useState(0);\r\n    useEffect(() => {\r\n        setTotalTime(JSON.parse(sessionStorage.getItem('totalTime')));\r\n    }, [sessionStorage.getItem('totalTime')])\r\n    const caculatorTime = (time) => {\r\n        const second = time % 60 >= 10 ? time % 60 : `0${time % 60}`;\r\n        const minute = Math.floor(time / 60) >= 10 ? Math.floor(time / 60) : `0${Math.floor(time / 60)}`;\r\n        return `${minute}:${second}`;\r\n    }\r\n\r\n    function dateNow() {\r\n        var date = new Date();\r\n        var data = date.getDate() + '-';\r\n        data += + date.getMonth() + 1 + '-';\r\n        data += + date.getFullYear();\r\n\r\n        return data;\r\n    }\r\n\r\n    const navigate = useNavigate();\r\n    return (\r\n        <>\r\n            <div className={clsx('row', styleComplete['container-winner-content'])} >\r\n                <div className={clsx(styleComplete['done-clock'])}>\r\n                    <p className={clsx('text-center', 'fw-normal', 'fs-3', styleComplete['done-clock-text'])}>{caculatorTime(totalTime)}</p>\r\n                </div>\r\n                <div>\r\n                    <p className={clsx('text-center', 'fw-bolder', 'fs-4')}>KẺ HỦY DIỆT LỊCH SỬ</p>\r\n                </div>\r\n                <div style={{ position: \"relative\" }}>\r\n                    <p className={clsx('text-center')}>Thật tuyệt vời, bạn đã là một trong những người xuất sắc hoàn thành tour khám phá bảo tàng</p>\r\n\r\n                    <div className={clsx(styleComplete['bg-winner-content'])}></div>\r\n                </div>\r\n\r\n                <div className={clsx(styleBase['center-flex'], 'mt-2', 'row')}>\r\n                    <div>\r\n                        <p className=\"text-center\">Hà Nội, ngày {dateNow()}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"row d-flex align-items-center justify-content-center mt-2 \">\r\n                    <div\r\n                        onClick={() => navigate('/start')}\r\n                        className={clsx('col-4', 'btn', styleBase['btn-mobile'], styleBase['bg-button'])}\r\n                    >\r\n                        CHIA SẺ\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default BodyComplete;","import React from 'react';\r\nimport HoaRoiComponent from '../../components/HoaRoi';\r\nimport { Base } from '../Base';\r\nimport Background from './Background';\r\nimport BodyComplete from './BodyComplete';\r\n\r\n\r\nfunction Complete(props) {\r\n\r\n    return (\r\n       <Base body={<BodyComplete/>} top={<Background/>}>\r\n           <HoaRoiComponent/>\r\n       </Base>\r\n    );\r\n}\r\n\r\nexport default Complete;","import React from 'react';\r\nimport clsx from 'clsx';\r\n\r\nfunction Button({children,...props}) {\r\n    console.log(`props`, props);\r\n    return (\r\n       <button className={clsx('btn', 'btn-primary')}  {...props}>{children ?? 'rỗng'}</button>\r\n    );\r\n}\r\n\r\nexport default Button;","import React from 'react';\r\n\r\nfunction AnimationText({text, top, left, size, color}) {\r\n    return (\r\n        <div className='animate__bounceInDown animate__animated' \r\n        style={{position: 'fixed', top: top || 0, left: left || 0, zIndex: 2, fontSize: size || '50px', fontFamily: 'cursive', color: color || 'black' }} >\r\n            {text}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AnimationText;","import React, { useEffect, useRef, useState } from 'react';\r\nimport AnimationText from '../Text';\r\nimport './counttime.scss'\r\nfunction CountTime({firstValue, onClearTime, onBackToPrev, onChangeStatusTime}) {\r\n    const [count, setCount] = useState(firstValue);\r\n    const time = useRef();\r\n    const [currentTime, setCurrentTime] = useState();\r\n    const stopTime = () => {\r\n        clearInterval(time.current);\r\n    }\r\n    const startTime = () => {\r\n        time.current = setInterval(() => {\r\n            setCount(prev => prev-1);\r\n        }, 1000)\r\n    }\r\n    useEffect(() => {\r\n        time.current = setInterval(() => {\r\n            setCount(prev => prev-1);\r\n        }, 1000)\r\n        \r\n       return () => clearInterval(time.current)\r\n    },[])\r\n    useEffect(() => {\r\n        if(count == 0) {\r\n            clearInterval(time.current);\r\n           const timeOut = setTimeout(() => {\r\n            \r\n            onBackToPrev && onBackToPrev();\r\n            onClearTime && onClearTime('timeover');\r\n            clearTimeout(timeOut)\r\n           }, 1500)\r\n        }\r\n    }, [count]);\r\n    //dung thoi gian\r\n    useEffect(() => {\r\n        if(onChangeStatusTime) {\r\n            stopTime();\r\n        }\r\n    },[onChangeStatusTime]);\r\n\r\n    const caculatorTime = (time) => {\r\n        const second = time % 60 >=10 ?  time % 60 : `0${ time % 60}`;\r\n        const minute = Math.floor(time / 60)  >=10 ?  Math.floor(time / 60) : `0${ Math.floor(time / 60)}`;\r\n        return `${minute}:${second}`;\r\n    }\r\n    return (\r\n        <div className={`time_count ${count <= 5 ? \"blink-text-count-time\": \"\"}`} >\r\n            {caculatorTime(count)}\r\n            {count == 0 &&  <AnimationText text={\"Hết giờ\"} top={'25%'} left={'40%'} size={'100px'}/>}\r\n        </div>   \r\n    );\r\n}\r\n\r\nexport default CountTime;","import React, { useState, useRef, useEffect } from 'react';\r\nimport CountTime from '../../../components/CountTime';\r\nimport './tracnghiem.scss'\r\nfunction TracNghiem({ onCloseModal, questions, onBackToPrev, countdown }) {\r\n  const [isChoose, setIsChoose] = useState();\r\n  const toast = useRef();\r\n  const [pick, setPick] = useState(false);\r\n  const answer = useRef(5);\r\n  const [stopTime, setStopTime] = useState(false);\r\n\r\n\r\n  // useEffect(() => {\r\n  //   return () => {\r\n  //     const backDrop = document.querySelector('.modal-backdrop');\r\n  //     if(backDrop.classList.contains('show')) {\r\n  //         backDrop.remove();\r\n  //     }\r\n  //   }\r\n  // }, [])\r\n  const AreYouSureAboutThat = () => {\r\n    return (\r\n      <div className=\"modal fade\" id=\"exampleModal\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n            {/* <div className=\"modal-header\">\r\n                  <h5 className=\"modal-title\" id=\"exampleModalLabel\">Modal title</h5>\r\n                  <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                </div> */}\r\n            <div className=\"modal-body\">\r\n              Bạn có chắc muốn chọn đáp án này?\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button type=\"button\" className=\"btn btn-secondary\" data-bs-dismiss=\"modal\" onClick={() => {\r\n                setIsChoose(5);\r\n                answer.current = 5;\r\n              }}>Hủy</button>\r\n              <button type=\"button\" className=\"btn btn-primary\" data-bs-dismiss=\"modal\" onClick={() => {\r\n                setStopTime(true);\r\n                const time = setTimeout(() => {\r\n                  setIsChoose(5);\r\n                  clearTimeout(time);\r\n                }, 2000);\r\n                const timeToOut = setTimeout(() => {\r\n                  if (answer.current != questions?.answer) {\r\n                    onCloseModal('timeover');\r\n                    onBackToPrev();\r\n                  } else onCloseModal();\r\n                  clearTimeout(timeToOut);\r\n                }, 4000)\r\n              }}>Chọn</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  const modalSuggest = () => {\r\n    return (\r\n      <div className=\"modal fade\" tabIndex=\"-1\" id=\"modalSuggest\" aria-labelledby=\"modalSuggest\" aria-hidden=\"true\">\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n            {/* <div className=\"modal-header\">\r\n              <h5 className=\"modal-title\">Gợi ý</h5>\r\n            </div> */}\r\n            <div className=\"modal-body d-flex align-items-center justify-content-center\" style={{ minHeight: \"100px\" }}>\r\n              {/* <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button> */}\r\n              Gợi ý: {questions?.suggest}\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n     \r\n        <div className=\"count-time\">\r\n        <i class=\"bi bi-alarm-fill\"></i>\r\n          <CountTime firstValue={countdown} onClearTime={onCloseModal} onBackToPrev={onBackToPrev} onChangeStatusTime={stopTime} />\r\n           \r\n        </div>\r\n\r\n        <div className=\"question-box\">\r\n          <div className=\"row question-item content-question\">\r\n            <div className='text-question col-10 shadow'>\r\n              {questions.question}\r\n\r\n              <div className=\"popup-suggest border\" data-bs-toggle=\"modal\" data-bs-target=\"#modalSuggest\">\r\n                <i class=\"bi bi-question\"></i>\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"question-item content-selects\">\r\n            {questions.selects.map((item, index) => {\r\n              return (\r\n                <div key={index} data-bs-toggle=\"modal\" data-bs-target={answer.current == 5 ?\"#exampleModal\" : \"\"}\r\n                  className='row content-select'\r\n                >\r\n                  <div className={`text-select col-10 shadow-sm ${isChoose == index ? 'choose' : ''} ${answer.current == index && isChoose == 5 ? answer.current == questions?.answer ? 'blink-text' : 'wrong' : ''}`}\r\n                    onClick={() => {\r\n                      if(answer.current == 5) {\r\n                        setIsChoose(index);\r\n                        const pick = setTimeout(() => {\r\n                          answer.current = index;\r\n                          clearTimeout(pick)\r\n                        }, 0)\r\n                      }\r\n                      \r\n                    }}\r\n                  >\r\n                    {item}\r\n                  </div>\r\n                </div>\r\n\r\n\r\n              )\r\n            })}\r\n          </div>\r\n        </div>\r\n        {/* <div className='suggest'>\r\n          Gợi ý: {questions?.suggest}\r\n        </div> */}\r\n        {AreYouSureAboutThat()}\r\n        {modalSuggest()}\r\n     \r\n    </>\r\n\r\n  );\r\n}\r\n\r\nexport default TracNghiem;","import { isNumber } from \"lodash\";\r\n\r\nclass FetchData {\r\n    question(getData) {\r\n        fetch('https://api.npoint.io/658232b33eb69c8bddc7')\r\n            .then(response => response.json())\r\n            .then(data => {\r\n\r\n                console.log(data);\r\n                getData(data);\r\n            });\r\n    }\r\n    static dataMuseum(id, callbackDone) {\r\n        console.log('fect data museum');\r\n\r\n\r\n        fetch(`https://hcloud.trealet.com/apps_dev/btl/nhom08/lib/api/api.php?id=${id}&file`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(data);\r\n                if (data) {\r\n                    callbackDone(data);\r\n                    return true;\r\n                } else {\r\n                    callbackDone(false);\r\n                    return false;\r\n                }\r\n            });\r\n    }\r\n    static urlItem(id, callbackDone) {\r\n        console.log('fect url item');\r\n\r\n        fetch(`https://hcloud.trealet.com/apps_dev/btl/nhom08/lib/api/api.php?id=${id}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                // console.log(data);\r\n                if (data) {\r\n                    const urlItem = 'https://hcloud.trealet.com' + data.url_full || 'https://hcloud.trealet.com/albums/Nhom00/Data/nhom8/pexels-photo-326055.jpeg';\r\n                    callbackDone(urlItem);\r\n                    return true;\r\n                } else {\r\n                    callbackDone(false);\r\n                    return false;\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\n\r\nexport default FetchData;","import { createContext } from \"react\";\r\n\r\nconst CacheImageContext = createContext();\r\n\r\nfunction CacheImageProvider({ children, ...props }) {\r\n    console.log(`prop context`, props);\r\n  \r\n    return (\r\n        <CacheImageContext.Provider value={{...props }}>\r\n            {children}\r\n        </CacheImageContext.Provider>\r\n    );\r\n}\r\n\r\nexport { CacheImageContext, CacheImageProvider };","import React, { useContext, useEffect, useState } from 'react';\r\nimport CountTime from '../../../components/CountTime';\r\nimport { JigsawPuzzle } from 'react-jigsaw-puzzle/lib'\r\nimport 'react-jigsaw-puzzle/lib/jigsaw-puzzle.css'\r\nimport FetchData from '../../../assets/js/fetchData';\r\n\r\nimport styleXepHinh from './XepHinh.module.scss'\r\nimport clsx from 'clsx';\r\nimport AnimationText from '../../../components/Text';\r\nimport { CacheImageContext } from '../../../Provider/CacheImageContext';\r\n\r\n\r\n    \r\n\r\nfunction XepHinh({ onCloseModal, questions, onBackToPrev,countdown }) {\r\n    const [urlImage, setUrlImage] = useState(false);\r\n    const [isDone, setIsDone] = useState(false);\r\n    const dataImagesCache = useContext(CacheImageContext);\r\n    const [stopTime, setStopTime] = useState(false);\r\n    useEffect(() => {\r\n        // FetchData.urlItem(questions.image_id, (urlImage) => {\r\n        //     setUrlImage(urlImage);\r\n        // }\r\n        // )\r\n        const urlImage = dataImagesCache.imagesCache[questions.image_id];\r\n        setUrlImage(urlImage.src);\r\n    }, [])\r\n    const modalSuggest = () => {\r\n        return (\r\n            <div className=\"modal fade\" tabIndex=\"-1\" id=\"modalSuggestXepHinh\" aria-labelledby=\"modalSuggestXepHinh\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog\">\r\n                    <div className=\"modal-content\">\r\n                        {/* <div className=\"modal-header\">\r\n                  <h5 className=\"modal-title\">Gợi ý</h5>\r\n                </div> */}\r\n                        <div className=\"modal-body d-flex align-items-center justify-content-center\" style={{ minHeight: \"100px\" }}>\r\n                            {/* <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button> */}\r\n                            <div className=\"d-flex flex-column\">\r\n                                <div className=\"row mt-2\">\r\n                                    <span className='text-center'>Hình mẫu</span>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    {urlImage && <img className='mx-auto' src={urlImage} style={{ maxHeight: '50vh' }} />}\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div style={{\r\n                'touchAction': 'none'\r\n            }}>\r\n\r\n                <div className=\"count-time\" >\r\n                    <i class=\"bi bi-alarm-fill\"></i>\r\n                    <CountTime firstValue={countdown} onClearTime={onCloseModal} onBackToPrev={onBackToPrev} onChangeStatusTime={stopTime}/>\r\n\r\n                </div>\r\n                 {isDone && <AnimationText text={\"Hoàn thành\"} top={'30%'} left={'38%'} size={'80px'}/>} \r\n                <div className=\"question-box\">\r\n                    <div className=\"row question-item content-question\">\r\n                        <div className='text-question col-10 shadow'>\r\n                            {questions.desc}\r\n                            <div className=\"popup-suggest border\" data-bs-toggle=\"modal\" data-bs-target=\"#modalSuggestXepHinh\">\r\n                                <i class=\"bi bi-question\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div\r\n                        className={clsx('question-item row', styleXepHinh['box-xepHinh'])}\r\n                    >\r\n                         <div className='col-10' style={{margin: 'auto', border: '1px solid black', padding: 0}}>\r\n                         {urlImage && <JigsawPuzzle\r\n                            imageSrc={urlImage}\r\n                            rows={2}\r\n                            columns={3}\r\n                            onSolved={() => {\r\n                                setIsDone(true);\r\n                                setStopTime(true)\r\n                                const timeOut = setTimeout(() => {\r\n                                    onCloseModal();\r\n                                    clearTimeout(timeOut)\r\n                                },1500)\r\n                            }}\r\n                        />}\r\n                         </div>\r\n                        \r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            {modalSuggest()}\r\n        </>\r\n\r\n    )\r\n\r\n}\r\n\r\nexport default XepHinh;","import React, { useEffect, useRef, useState } from 'react';\r\nimport './index.scss';\r\nimport { ToastContainer, ToastMessage } from \"react-toastr\";\r\nfunction Toast({ dataToast }) {\r\n    // const [count, setCount] = useState(time || 3);\r\n    // const timeRef = useRef();\r\n    const container = useRef();\r\n    // useEffect(() => {\r\n    //     timeRef.current = setInterval(() => {\r\n    //         setCount(prev => prev - 1);\r\n    //     }, 1000);\r\n\r\n    // }, []);\r\n\r\n    // useEffect(() => {\r\n    //     if (count == 0) {\r\n    //         clearInterval(timeRef.current);\r\n    //     }\r\n    // }, [count])\r\n\r\n\r\n    useEffect(() => {\r\n        console.log('dataToast',dataToast);\r\n        if (dataToast.status == 'success' && container.current) {\r\n            container.current.success(dataToast.text);\r\n        } else if (dataToast.status == 'wrong' && container.current) {\r\n            container.current.error(dataToast.text);\r\n        }\r\n    }, [dataToast])\r\n\r\n    const render = () => {\r\n\r\n        // if (count == 0) return <></>;\r\n        // else \r\n        return (\r\n            // <div className='row toast_map' style={{top: top || 0, left: left || 0 }}>\r\n            //     <div className=\"col-sm-2\" >\r\n            //         {type == 'suc' ?  <img src=\"https://img.icons8.com/external-tal-revivo-filled-tal-revivo/12/000000/external-verification-tick-mark-for-digital-certification-document-basic-filled-tal-revivo.png\" />\r\n\r\n            //         : <img src=\"https://img.icons8.com/color-glass/12/000000/break.png\" />\r\n            //         }\r\n            //     </div>\r\n            //     <div className=\"col-sm-10\" style={{ textAlign: 'left', paddingLeft: '2px'}}>\r\n            //         <span className=\"text_toast_map\">{text}</span>\r\n            //     </div>\r\n            // </div>\r\n            <ToastContainer\r\n                ref={container}\r\n                className=\"toast-top-right\"\r\n            />\r\n        )\r\n    }\r\n    return (\r\n        <ToastContainer\r\n            ref={container}\r\n            className=\"toast-top-right\"\r\n        />\r\n    )\r\n\r\n    // return render()\r\n\r\n\r\n}\r\n\r\nexport default Toast;","import { Html5Qrcode } from 'html5-qrcode';\r\nimport styleScan from './Scan.module.scss';\r\nimport FetchData from '../../assets/js/fetchData';\r\n\r\nconst ScanQr = function() {\r\n    this.arrDeviceCamera = null;\r\n    this.currentCameraId = null;\r\n    this.html5QrCode = null;\r\n    this.callbackCorrect = {};\r\n    // this._start();\r\n    // this._changeCamera();\r\n    // this._displayCamera();\r\n    console.log('khoi tao scan qr code');\r\n\r\n}\r\n\r\nScanQr.prototype._start = function(callbackStartDone = {}) {\r\n    Html5Qrcode.getCameras().then(devices => {\r\n        console.log(devices);\r\n        if (devices && devices.length) {\r\n            this.arrDeviceCamera = devices;\r\n            // console.log(this.arrDeviceCamera);\r\n            // this._displayCamera(this.arrDeviceCamera[0].id);\r\n            // this._checkIn(this.arrDeviceCamera[0].id);\r\n            console.log('ok camera');\r\n            callbackStartDone();\r\n        }\r\n    }).catch(err => {\r\n        alert('Người dùng không cấp quyền truy cập');\r\n    });\r\n}\r\n\r\n\r\nScanQr.prototype._changeCamera = function() {\r\n    console.log('change');\r\n    if (this.arrDeviceCamera && this.arrDeviceCamera.length >= 2) {\r\n        var indexCam = this.arrDeviceCamera.findIndex(item => item.id == this.currentCameraId);\r\n        console.log(indexCam);\r\n        var cameraIdNew = this.arrDeviceCamera[(indexCam + 1) % this.arrDeviceCamera.length].id;\r\n        this.html5QrCode.stop().then((ignore) => {\r\n            this._displayCamera(cameraIdNew);\r\n            // QR Code scanning is stopped.\r\n        }).catch((err) => {\r\n            // Stop failed, handle it.\r\n        });\r\n\r\n    }\r\n\r\n}\r\n\r\nScanQr.prototype._displayCamera = function(cameraId) {\r\n    const html5QrCode = new Html5Qrcode( /* element id */ \"reader\");\r\n    this.html5QrCode = html5QrCode;\r\n    this.currentCameraId = cameraId;\r\n    var tempTextRes = '';\r\n\r\n    html5QrCode.start(\r\n            cameraId, {\r\n                fps: 10, // Optional, frame per seconds for qr code scanning\r\n                qrbox: 250\r\n            },\r\n            (decodedText, decodedResult) => {\r\n                // do something when code is read\r\n                console.log(`decodedText`, decodedText);\r\n                // console.log(`decodedResult`, decodedResult);\r\n\r\n                this.callbackCorrect({ decodedText, tempTextRes });\r\n                tempTextRes = decodedText;\r\n\r\n\r\n\r\n            },\r\n            (errorMessage) => {\r\n                // parse error, ignore it.\r\n            }).then(function(r) {\r\n            console.log('sau khoi tao camera');\r\n            document.querySelector(`.${styleScan['control-camera']}`).style.display = \"flex\";\r\n        })\r\n        .catch((err) => {\r\n            // Start failed, handle it.\r\n            console.log('loi khoi tao camera');\r\n        });\r\n}\r\n\r\n\r\nScanQr.prototype._checkIn = function(callBack = {}) {\r\n    console.log('check in');\r\n\r\n    this._start(() => {\r\n        this.callbackCorrect = function(resQr) {\r\n\r\n            // console.log('getDataMuseum', Number.isInteger(parseInt(resQr.decodedText)));\r\n            if (resQr.tempTextRes != resQr.decodedText) {\r\n                console.log('ok', Number.isInteger(parseInt(resQr.decodedText)));\r\n                if (Number.isInteger(parseInt(resQr.decodedText))) {\r\n                    FetchData.dataMuseum(resQr.decodedText, (data) => {\r\n                        console.log(data);\r\n                        callBack(data)\r\n                    });\r\n\r\n                } else {\r\n                    callBack(false)\r\n                }\r\n            }\r\n        }\r\n        if (this.arrDeviceCamera) {\r\n            this._displayCamera(this.arrDeviceCamera[0].id);\r\n        }\r\n\r\n    })\r\n}\r\nScanQr.prototype.question = function(answer, { cbCorrect = {}, cbWrong = {} }) {\r\n    console.log('scan dap an queston');\r\n    let tempDate = new Date().getTime();\r\n    this._start(() => {\r\n        this.callbackCorrect = function(resQr) {\r\n            if (resQr.tempTextRes != resQr.decodedText && answer === resQr.decodedText) {\r\n                // console.log('ok');\r\n                console.log('dap an chinh xac');\r\n                cbCorrect('right');\r\n            } else if (answer !== resQr.decodedText) {\r\n                const timeWaiting = new Date().getTime() - tempDate;\r\n\r\n                if (timeWaiting > 5 * 1000) {\r\n                    cbWrong();\r\n                    console.log(tempDate);\r\n                    tempDate = new Date().getTime();\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        if (this.arrDeviceCamera) {\r\n            this._displayCamera(this.arrDeviceCamera[0].id);\r\n        }\r\n    })\r\n}\r\n\r\n\r\nScanQr.prototype._stopCamera = function() {\r\n    this.html5QrCode.stop().then((ignore) => {\r\n        console.log('stop camera');\r\n        // QR Code scanning is stopped.\r\n    }).catch((err) => {\r\n        // Stop failed, handle it.\r\n    });\r\n}\r\n\r\n\r\nexport default ScanQr;","import clsx from 'clsx';\r\nimport { useEffect, useMemo, useRef, useState } from 'react';\r\nimport styleScan from './Scan.module.scss';\r\nimport ScanQr from './ScanQr.js';\r\n// import toastr from 'reactjs-toastr';\r\n// import 'reactjs-toastr/lib/toast.css';\r\nimport 'animate.css';\r\nimport AnimationText from '../../components/Text';\r\nimport Toast from '../../components/Toast';\r\nimport { useNavigate } from 'react-router-dom';\r\nfunction BodyScan({ ...props }) {\r\n    const navigate = useNavigate();\r\n    let { questions, onClearTime, onBackToPrev } = props;\r\n\r\n    const [showText, setShowText] = useState(false);\r\n    const [dataToast, setDataToast] = useState({});\r\n    const [showToastCheckIn, setShowToastCheckIn] = useState(false);\r\n\r\n    const scanQr = useMemo(() => {\r\n        console.log('khoi tao');\r\n        return new ScanQr();\r\n    }, []);\r\n    // const preventSpamToast = useRef(0);\r\n    useEffect(() => {\r\n        console.log(`props`, props);\r\n        console.log(`question scan`, questions);\r\n        // scanQr._start();\r\n        return () => scanQr._stopCamera();\r\n    }, []);\r\n\r\n    // console.log(typeof preventSpamToast);\r\n\r\n    // const valueOfToast = (value) => {\r\n    //     console.log(\"value\", value);\r\n    //     if (value == 'wrong') {\r\n    //         console.log(\"preventSpamToast\", preventSpamToast.current);\r\n    //         if (preventSpamToast.current == 0) {\r\n    //             setShowText(value);\r\n    //             preventSpamToast.current = 1;\r\n    //             const timeOut = setTimeout(() => {\r\n    //                 preventSpamToast.current = 0;\r\n    //                 setShowText(false);\r\n    //                 clearTimeout(timeOut);\r\n    //             }, 3000)\r\n    //         }\r\n\r\n    //     } else {\r\n    //         setShowText(value);\r\n    //         setTimeout(() => {\r\n    //             setShowText(false);\r\n    //             onClearTime();\r\n    //         }, 3000);\r\n    //     }\r\n\r\n    // }\r\n    // useEffect(() => {\r\n    //     // console.log(\"oi odi oi\");\r\n    //     if (questions) {\r\n    //         console.log(\"preventSpamToast\", preventSpamToast);\r\n    //         scanQr.question(questions.correct_answer, (value) => {\r\n    //             console.log('callback question');\r\n\r\n\r\n    //             return valueOfToast(value);\r\n    //         });\r\n    //     } else {\r\n    //         console.log('wrong');\r\n    //         scanQr._checkIn();\r\n    //     }\r\n    // }, [])\r\n\r\n    useEffect(() => {\r\n        // console.log(\"oi odi oi\");\r\n        if (questions) {\r\n            // console.log(\"preventSpamToast\", preventSpamToast);\r\n            // scanQr.question(questions.correct_answer, () => {\r\n            //     console.log('dap an chinh xac');\r\n\r\n\r\n            //     // return valueOfToast(value);\r\n            // }, () => {\r\n            //     console.log('dap an sai');\r\n            // });\r\n\r\n            scanQr.question(questions.correct_answer, {\r\n                cbCorrect: () => {\r\n                    console.log('dap an chinh xac');\r\n                    setDataToast({ status: 'success', text: 'Chúc mừng bạn đã tìm đúng địa điểm', })\r\n                    setShowText(true);\r\n                    setTimeout(() => {\r\n                        setShowText(false);\r\n                        onClearTime();\r\n                    }, 2000)\r\n                },\r\n                cbWrong: () => {\r\n                    console.log('dap an sai');\r\n                    setDataToast({ status: 'wrong', text: 'Địa điểm hiện tại không chính xác', hash: new Date() })\r\n                    setShowText(true);\r\n                    const timeOut = setTimeout(() => {\r\n                        setShowText(false);\r\n                        clearTimeout(timeOut);\r\n                    }, 2000);\r\n\r\n                }\r\n            })\r\n\r\n        } else {\r\n            scanQr._checkIn((data) => {\r\n                if (data) {\r\n                    setDataToast({ status: 'success', text: 'Check in địa điểm thành công' })\r\n                    setShowToastCheckIn(true);\r\n                    const dataString = JSON.stringify(data);\r\n                    // console.log(dataString);\r\n                    sessionStorage.setItem('dataMap', dataString);\r\n                    setTimeout(() => {\r\n                        setShowToastCheckIn(false);\r\n                        navigate('/map')\r\n                    }, 2000);\r\n\r\n                } else {\r\n                    setDataToast({ status: 'wrong', text: 'Địa điểm này không tồn tại' })\r\n                    setShowToastCheckIn(true);\r\n                    setTimeout(() => {\r\n                        setShowToastCheckIn(false);\r\n                    }, 2000);\r\n                }\r\n            });\r\n        }\r\n    }, [])\r\n\r\n\r\n\r\n\r\n    const modalSuggest = () => {\r\n        return (\r\n            <div className=\"modal fade\" tabIndex=\"-1\" id=\"modalSuggest\" aria-labelledby=\"modalSuggest\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog\">\r\n                    <div className=\"modal-content\">\r\n                        {/* <div className=\"modal-header\">\r\n                  <h5 className=\"modal-title\">Gợi ý</h5>\r\n                </div> */}\r\n\r\n                        <div className=\"modal-body d-flex align-items-center justify-content-center\" style={{ minHeight: \"100px\" }}>\r\n                            {/* <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button> */}\r\n                            Gợi ý: {questions?.suggest}\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            {showToastCheckIn ? <Toast {...{ dataToast }}></Toast> : <></>}\r\n            <div className={clsx(styleScan['camera'])}>\r\n                <div className={clsx('row')}>\r\n                    <div className={clsx('col', styleScan['view-camera'])} >\r\n                        <div className={clsx('w-100')} id=\"reader\"></div>\r\n                    </div>\r\n                </div>\r\n                <div className={clsx('row', 'flex-grow-1', styleScan['control-camera'])} >\r\n                    <div className={clsx('text-center', 'col-6', styleScan['item-control-camera'])} >\r\n                        <i className={clsx('bi', 'bi-brightness-high')} ></i>\r\n                    </div>\r\n                    <div\r\n                        className={clsx('text-center', 'col-6', styleScan['item-control-camera'], styleScan['switch-camera'])} >\r\n                        <i\r\n                            onClick={() => {\r\n                                scanQr._changeCamera();\r\n                            }}\r\n                            className={clsx('bi', 'bi-camera')}\r\n                        >\r\n                        </i>\r\n                        {/* <i className={clsx('bi', 'bi-camera-fill',)}></i> */}\r\n                        {/* {showText && <AnimationText text={\"Chính xác\"} size={'100px'} top={'30%'} left={'36%'} color={'green'}/>} */}\r\n                        {/* {showText == 'right' ? <Toast text={\"Hoàn toàn chính xác\"} type={'suc'} top={'5%'} left={'46%'} time={3} />\r\n                        : showText == 'wrong' ? <Toast text={\"Sai rồi\"} type={'wrong'} top={'5%'} left={'46%'} time={3} /> : <></>\r\n\r\n                    } */}\r\n\r\n                        {showText ? <Toast {...{ dataToast }} /> : <></>}\r\n                    </div>\r\n                    {modalSuggest()}\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default BodyScan;","import CountTime from '../../components/CountTime';\r\nimport Toast from '../../components/Toast';\r\nimport { CacheImageContext } from '../../Provider/CacheImageContext';\r\nimport { Base } from '../Base';\r\nimport BodyScan from './BodyScan';\r\nimport './scan.scss';\r\nfunction Scan({ onCloseModal, questions, onBackToPrev, countdown, ...props }) {\r\n\r\n    const config = {\r\n        propsHeader: { RemoveHQ: true },\r\n        body: <BodyScan questions={questions}></BodyScan>,\r\n        \r\n    }\r\n\r\n    return (\r\n        <>\r\n            {questions && <BodyScan questions={questions} onClearTime={onCloseModal} onBackToPrev={onBackToPrev}>\r\n\r\n            </BodyScan>}\r\n\r\n            {questions && <div style={{ position: 'absolute', top: 0, right: 0, color: 'white' }}>\r\n                <CountTime firstValue={countdown} onClearTime={onCloseModal} onBackToPrev={onBackToPrev} />\r\n                <div className=\"popup-suggest_scan border\" data-bs-toggle=\"modal\" data-bs-target=\"#modalSuggest\">\r\n                    <i className=\"bi bi-question\"></i>\r\n                </div>\r\n            </div>}\r\n\r\n            {!questions && <Base\r\n                {...config}\r\n            >\r\n            </Base>}\r\n\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Scan;","import clsx from 'clsx';\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\n\r\nimport styleQuestion from './Question.module.scss';\r\nimport TracNghiem from './TracNghiem';\r\nimport XepHinh from './XepHinh';\r\nimport Scan from '../Scan/Scan';\r\nimport { useContext, useEffect, useState } from 'react';\r\nimport { useGlobalState } from 'state-pool';\r\nfunction BodyQuestion({ questions, onCloseModal, onBackToPrev }) {\r\n    var arrIndexQuestion = JSON.parse(sessionStorage.getItem('arrIndexQuestion'));\r\n\r\n    // console.log(arrIndexQuestion);\r\n    const indexQuestionRd =  arrIndexQuestion[Math.floor(Math.random()* arrIndexQuestion.length)];\r\n    const typeQuestion = questions[indexQuestionRd];\r\n\r\n\r\n    arrIndexQuestion =  arrIndexQuestion.filter(indexQuestion => indexQuestion !== indexQuestionRd)\r\n    sessionStorage.setItem('arrIndexQuestion', `[${arrIndexQuestion.toString()}]`);\r\n    console.log('set lai index');\r\n\r\n    // const [typeQuestion, setTypeQuestion] = useState(questions[6]);\r\n\r\n    const [refElMain] = useGlobalState(\"elMain\");\r\n    useEffect(() => {\r\n        console.log('scroll top');\r\n        // refElMain.current.scrollTop = 1;\r\n    }, [])\r\n\r\n\r\n    const questionItem = () => {\r\n        const configCD = {\r\n            \"trac_nghiem\": 60,\r\n            \"xep_hinh\": 120,\r\n            \"scan\": 180,\r\n        }\r\n\r\n        const configQuestion = {\r\n            onCloseModal: onCloseModal,\r\n            questions: typeQuestion,\r\n            onBackToPrev: onBackToPrev\r\n        }\r\n\r\n\r\n        console.log(`question`, typeQuestion);\r\n        switch (typeQuestion.type) {\r\n            case 'trac_nghiem':\r\n               \r\n                return (<TracNghiem\r\n                    {...configQuestion}\r\n                    countdown={configCD['trac_nghiem']}\r\n                />)\r\n\r\n            case 'xep_hinh':\r\n                return (<XepHinh\r\n                    {...configQuestion}\r\n                    countdown={configCD['xep_hinh']}\r\n                />)\r\n\r\n            case 'scan':\r\n\r\n                return (<Scan\r\n                    {...configQuestion}\r\n                    countdown={configCD['scan']}\r\n                ></Scan>)\r\n            default:\r\n                return <><h2>loi</h2></>\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className={clsx(styleQuestion['main-question'])} >\r\n                <div className={clsx(styleQuestion['body-question'], \"container-sm\")}>\r\n                    {questionItem()}\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default BodyQuestion;","import React from 'react';\r\nimport Button from '../../components/Button/Button';\r\nimport { Base } from '../Base';\r\n// import styleStart from './Question.module.scss';\r\nimport BodyQuestion from './BodyQuestion';\r\n\r\nfunction Question(props) {\r\n    return (\r\n        <>\r\n            <Base body={<BodyQuestion></BodyQuestion>}>\r\n            </Base>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Question;","import React from 'react';\r\nimport clsx from 'clsx';\r\n\r\nimport Question from \"./Question\";\r\n\r\nfunction index(props) {\r\n    return (\r\n        <div className={clsx()}>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default index;\r\n\r\nexport { Question };","import React, { useEffect, useRef, useState } from 'react';\r\nimport './dice.css'\r\nfunction Dice({status, randomAngle, isDice}) {\r\n    const [numberDice, setNumberDice] = useState('');\r\n    const handleDice = (randomAngle) => {\r\n            const dice = setTimeout( () => {\r\n                        if(randomAngle == 1) {\r\n                            setNumberDice('show-' + 1);\r\n                        } else if(randomAngle == 2) {\r\n                           setNumberDice('show-' + 6);\r\n                        } else if(randomAngle == 3) {\r\n                           setNumberDice('show-' + 4);\r\n                        } else if (randomAngle == 4) {\r\n                           setNumberDice('show-' + 5);\r\n                        } else if(randomAngle == 5) {\r\n                           setNumberDice('show-' + 2);\r\n                        } else  setNumberDice('show-' + 3);\r\n                clearTimeout(dice);\r\n            }, 1000);\r\n            // ${randomAngle == 1 ? 'show-1' : randomAngle == 2 ? 'show-6' : randomAngle == 3 ? 'show-4' : randomAngle == 4 ? 'show-5' : randomAngle == 5 ? 'show-2' : randomAngle == 6 ? 'show-3' : ''}\r\n    }\r\n    useEffect(() => {\r\n        if(isDice) {\r\n            handleDice(randomAngle);\r\n        }\r\n        \r\n    }, [status])\r\n    return (\r\n        <div className=\"game\" style={{zIndex: 20000, position: 'fixed'}}>\r\n            <div className=\"containerT\">\r\n            <div id='dice1' className={`dice dice-one ${numberDice}`}>\r\n                <div id=\"dice-one-side-one\" className='side one'>\r\n                <div className=\"dot one-1\"></div>\r\n                </div>\r\n                <div id=\"dice-one-side-two\" className='side two'>\r\n                <div className=\"dot two-1\"></div>\r\n                <div className=\"dot two-2\"></div>\r\n                </div>\r\n                <div id=\"dice-one-side-three\" className='side three'>\r\n                <div className=\"dot three-1\"></div>\r\n                <div className=\"dot three-2\"></div>\r\n                <div className=\"dot three-3\"></div>\r\n                </div>\r\n                <div id=\"dice-one-side-four\" className='side four'>\r\n                <div className=\"dot four-1\"></div>\r\n                <div className=\"dot four-2\"></div>\r\n                <div className=\"dot four-3\"></div>\r\n                <div className=\"dot four-4\"></div>\r\n                </div>\r\n                <div id=\"dice-one-side-five\" className='side five'>\r\n                <div className=\"dot five-1\"></div>\r\n                <div className=\"dot five-2\"></div>\r\n                <div className=\"dot five-3\"></div>\r\n                <div className=\"dot five-4\"></div>\r\n                <div className=\"dot five-5\"></div>\r\n                </div>\r\n                <div id=\"dice-one-side-six\" className='side six'>\r\n                <div className=\"dot six-1\"></div>\r\n                <div className=\"dot six-2\"></div>\r\n                <div className=\"dot six-3\"></div>\r\n                <div className=\"dot six-4\"></div>\r\n                <div className=\"dot six-5\"></div>\r\n                <div className=\"dot six-6\"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n            \r\n  </div> \r\n    );\r\n}\r\n\r\nexport default Dice;","import clsx from 'clsx';\r\nimport { countBy, isEmpty } from 'lodash';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\n// import * as THREE from 'three';\r\n// import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\r\nimport './robot.css'\r\n\r\n\r\nexport const RobotModel = ({ canvasRef, currentPoint, map, setIsCrtMoving, dataCrtMove, actionDataCrtMove, onShowText }) => {\r\n    const [posArr, setPosArr] = useState([...map[currentPoint].split('-')])\r\n    const [oldPoint, setOldPoint] = useState(currentPoint);\r\n    const [currentPoint1, setCurrentPoint1] = useState(currentPoint);\r\n\r\n    const [CELL_SIZE, setCellSize] = useState(() => {\r\n        const height = window.innerWidth <= 576 ? window.innerWidth : 576;\r\n        return height / 10;\r\n    });\r\n\r\n    const character = useRef();\r\n    const [animationCrt, setAnimationCrt] = useState(false);\r\n\r\n\r\n    const [dir, setDir] = useState('face-up');\r\n    const [_robot, setRobot] = useState(null);\r\n    const [actionControl, setActionControl] = useState(null);\r\n\r\n    const checkDirection = (oldPos, newPos) => {\r\n        if (oldPos[0] == newPos[0]) {\r\n            if (oldPos[1] > newPos[1]) return UP;\r\n            else return DOWN\r\n        }\r\n        if (oldPos[0] > newPos[0]) return LEFT;\r\n        return RIGHT;\r\n    }\r\n\r\n\r\n    const handleMoveCrt = (currentPoint1, text) => {\r\n       \r\n        const promise = new Promise(resolve => {\r\n            resolve();\r\n        });\r\n        promise\r\n            .then(() => {\r\n               \r\n                setAnimationCrt(true);\r\n                setIsCrtMoving(true);\r\n                \r\n                console.log(`currentPoint1 robot`, currentPoint1);\r\n\r\n                console.warn('animation crt start');\r\n\r\n                const directionArr = [];\r\n                // get direction\r\n                console.log(`point`, { oldPoint, currentPoint1 });\r\n                if (oldPoint < currentPoint1) {\r\n                    for (let i = oldPoint; i < currentPoint1; i++) {\r\n                        const currentStep = [...map[i].split('-')]\r\n                        const nextStep = [...map[i + 1].split('-')]\r\n                        console.log(currentStep, nextStep);\r\n                        directionArr.push(checkDirection(currentStep, nextStep));\r\n                    }\r\n                    return [...directionArr];\r\n                } else {\r\n                    for (let i = oldPoint; i > currentPoint1; i--) {\r\n                        const currentStep = [...map[i].split('-')]\r\n                        const nextStep = [...map[i - 1].split('-')]\r\n                        directionArr.push(checkDirection(currentStep, nextStep));\r\n                    }\r\n                    return [...directionArr];\r\n                }\r\n            })\r\n            .then(directionArr => {\r\n                console.log(directionArr);\r\n                const timePerStep = TIME_PER_MOVEMENT / directionArr.length;\r\n                const robotRec = document.getElementById('character-container');\r\n                console.log(actionControl);\r\n                if (actionControl) actionControl.timeScale = directionArr.length;\r\n                const moveLoop = async () => {\r\n\r\n                    for (let i = 0; i < directionArr.length; i++) {\r\n                        moveDirection(directionArr[i]);\r\n                        let frame = timePerStep / CELL_SIZE;\r\n                        console.log(\"frame: \", frame);\r\n                        const doIt = async () => {\r\n                            let count = 0;\r\n                            while (count < timePerStep) {\r\n                                await delay(frame);\r\n                                move(directionArr[i], robotRec);\r\n                                count += frame;\r\n                            }\r\n                        }\r\n                        await doIt();\r\n                    }\r\n                    onShowText(false);\r\n                    setTimeout(() => {\r\n                        setOldPoint(currentPoint1);\r\n                        setIsCrtMoving(false);\r\n                        \r\n                        actionDataCrtMove({ type: 'NEXT_STEP' })\r\n                        setAnimationCrt(false);\r\n\r\n                    }, 1000)\r\n                    console.warn('animation crt end');\r\n                }\r\n                moveLoop();\r\n\r\n            });\r\n\r\n    }\r\n\r\n\r\n    // useEffect(() => {\r\n    //     const promise = new Promise(resolve => {\r\n    //         resolve();\r\n    //     });\r\n    //     promise\r\n    //         .then(() => {\r\n    //             setAnimationCrt(true);\r\n    //             setIsCrtMoving(true);\r\n    //             console.log(`currentPoint robot`, currentPoint);\r\n\r\n    //             console.warn('animation crt start');\r\n\r\n    //             const directionArr = [];\r\n    //             // get direction\r\n    //             if (oldPoint < currentPoint) {\r\n    //                 for (let i = oldPoint; i < currentPoint; i++) {\r\n    //                     const currentStep = [...map[i].split('-')]\r\n    //                     const nextStep = [...map[i + 1].split('-')]\r\n    //                     console.log(currentStep, nextStep);\r\n    //                     directionArr.push(checkDirection(currentStep, nextStep));\r\n    //                 }\r\n    //                 return [...directionArr];\r\n    //             } else {\r\n    //                 for (let i = oldPoint; i > currentPoint; i--) {\r\n    //                     const currentStep = [...map[i].split('-')]\r\n    //                     const nextStep = [...map[i - 1].split('-')]\r\n    //                     directionArr.push(checkDirection(currentStep, nextStep));\r\n    //                 }\r\n    //                 return [...directionArr];\r\n    //             }\r\n    //         })\r\n    //         .then(directionArr => {\r\n    //             console.log(directionArr);\r\n    //             const timePerStep = TIME_PER_MOVEMENT / directionArr.length;\r\n    //             const robotRec = document.getElementById('character-container');\r\n    //             console.log(actionControl);\r\n    //             if (actionControl) actionControl.timeScale = directionArr.length;\r\n    //             const moveLoop = async () => {\r\n\r\n    //                 for (let i = 0; i < directionArr.length; i++) {\r\n    //                     moveDirection(directionArr[i]);\r\n    //                     let frame = timePerStep / CELL_SIZE;\r\n    //                     console.log(\"frame: \", frame);\r\n    //                     const doIt = async () => {\r\n    //                         let count = 0;\r\n    //                         while (count < timePerStep) {\r\n    //                             await delay(frame);\r\n    //                             move(directionArr[i], robotRec);\r\n    //                             count += frame;\r\n    //                         }\r\n    //                     }\r\n    //                     await doIt();\r\n    //                 }\r\n    //                 setAnimationCrt(false);\r\n    //                 setIsCrtMoving(false);\r\n    //                 console.warn('animation crt end');\r\n    //             }\r\n    //             moveLoop();\r\n\r\n    //         });\r\n\r\n\r\n    //     setOldPoint(currentPoint);\r\n\r\n    // }, [currentPoint]);\r\n\r\n    useEffect(() => {\r\n        // console.log(`dataCrtMove`, dataCrtMove);\r\n        if (dataCrtMove.status === 'CRT_MOVING' && dataCrtMove.nextPoint != null) {\r\n            console.log(`nextPoint`, dataCrtMove.nextPoint);\r\n            onShowText(dataCrtMove?.nextTypeStep);\r\n            setTimeout(() => {\r\n                handleMoveCrt(dataCrtMove.nextPoint, dataCrtMove?.nextTypeStep);\r\n            }, 800)\r\n          \r\n        }\r\n    }, [dataCrtMove && dataCrtMove.status === 'CRT_MOVING'])\r\n\r\n    useEffect(() => {\r\n        // console.log(`dataCrtMove2`, dataCrtMove);\r\n\r\n        if (animationCrt === false && dataCrtMove.nextPoint != null && dataCrtMove.status === 'NEXT_STEP') {\r\n            console.log('chay 2 lan');\r\n            onShowText(dataCrtMove?.nextTypeStep);\r\n            setTimeout(() => {\r\n                handleMoveCrt(dataCrtMove.nextPoint, dataCrtMove?.nextTypeStep);\r\n            }, 800)\r\n            // actionDataCrtMove({ type: 'NEXT_STEP' })\r\n        } else if (animationCrt === false && dataCrtMove.nextPoint === null && dataCrtMove.status === 'NEXT_STEP') {\r\n            actionDataCrtMove({ type: 'CRT_STOP_MOVING' })\r\n            \r\n        }\r\n    }, [animationCrt, dataCrtMove])\r\n\r\n\r\n\r\n\r\n\r\n\r\n    function decreasePixel(pixel) {\r\n        let num = pixel.split('px')[0];\r\n        num--;\r\n        return `${num}px`;\r\n    }\r\n    function increasePixel(pixel) {\r\n        let num = pixel.split('px')[0];\r\n        num++;\r\n        return `${num}px`;\r\n    }\r\n\r\n    const move = (dir, rec) => {\r\n        // console.log(\"dir: \", dir);\r\n        // console.log(\"rec pos: \", rec.style.left, rec.style.top);\r\n        switch (dir) {\r\n            case RIGHT:\r\n                rec.style.left = increasePixel(rec.style.left);\r\n                break;\r\n            case DOWN:\r\n                rec.style.top = increasePixel(rec.style.top);\r\n                break;\r\n            case LEFT:\r\n                rec.style.left = decreasePixel(rec.style.left);\r\n                break;\r\n            default:\r\n                rec.style.top = decreasePixel(rec.style.top);\r\n\r\n        }\r\n    }\r\n\r\n    function delay(delayInms) {\r\n        return new Promise(resolve => {\r\n            setTimeout(() => {\r\n                resolve(2);\r\n            }, delayInms);\r\n        });\r\n    }\r\n\r\n    const moveDirection = (dir) => {\r\n        switch (dir) {\r\n            case RIGHT:\r\n                setDir('face-right')\r\n                return;\r\n            case LEFT:\r\n                setDir('face-left')\r\n                return;\r\n            case DOWN:\r\n                setDir('face-down')\r\n                return;\r\n            default:\r\n                setDir('face-up')\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('resize', () => { if (window.innerWidth <= 576) setCellSize(window.innerWidth / 10) });\r\n\r\n        return () => { window.removeEventListener('resize', () => { if (window.innerWidth <= 576) setCellSize(window.innerWidth / 10) }) }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        const character = document.getElementById('character-container');\r\n\r\n        console.log(CELL_SIZE);\r\n        const ratioPixel = CELL_SIZE / 32;\r\n        document.documentElement.style.setProperty('--pixel-size', `${ratioPixel}`);\r\n        character.style.top = `${CELL_SIZE * posArr[1] - CELL_SIZE}px`;\r\n        character.style.left = `${CELL_SIZE * posArr[0] - CELL_SIZE / 2}px`;\r\n    }, [CELL_SIZE])\r\n    return (\r\n        // <canvas id='myCanvas'></canvas>\r\n\r\n        <div id='character-container'>\r\n            <div className=\"Character\" >\r\n\r\n                <img className=\"Character_shadow pixelart\" src=\"https://s3-us-west-2.amazonaws.com/s.cdpn.io/21542/DemoRpgCharacterShadow.png\" alt=\"Shadow\" />\r\n\r\n                <img\r\n                    // className={`Character_spritesheet pixelart ${dir}`}\r\n                    className={clsx('Character_spritesheet', dir, { 'animation_crt': animationCrt })}\r\n                    ref={character}\r\n                    src={`${process.env.PUBLIC_URL}/assets/images/sprite-sheet.png`} alt=\"Character\"\r\n                />\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst UP = 0;\r\nconst RIGHT = 1;\r\nconst DOWN = 2;\r\nconst LEFT = 3;\r\nconst TIME_PER_MOVEMENT = 2000;\r\n","import _ from 'lodash';\r\n\r\nfunction findRoad(arr, heightMap) {\r\n    const findFirtPoint = (arr) => {\r\n        const arrPoint = arr.filter(item => item.split('-')[1] == (heightMap - 1));\r\n        if (arr.includes((arrPoint[0].split('-')[0] + '-' + (arrPoint[0].split('-')[1] - 1)))) return arrPoint[_.size(arrPoint) - 1];\r\n        else return arrPoint[0];\r\n    }\r\n    const caculatorDistance = (x, y, x1, y1) => {\r\n        return (Math.pow((x - x1), 2) + Math.pow((y - y1), 2)) == 1 ? true : false;\r\n    }\r\n\r\n    const sort = (arr) => {\r\n        if (!_.isEmpty(arr)) {\r\n            const firstPoint = findFirtPoint(arr);\r\n            let newArr = [firstPoint];\r\n            _.remove(arr, function (item) {\r\n                return item == newArr[0];\r\n            })\r\n            while (_.size(arr) != 0) {\r\n                for (let i = 0; i < _.size(arr); ++i) {\r\n                    if (newArr[_.size(newArr) - 1] != arr[i]) {\r\n                        if (caculatorDistance(newArr[_.size(newArr) - 1].split('-')[0]\r\n                            , newArr[_.size(newArr) - 1].split('-')[1], arr[i].split('-')[0], arr[i].split('-')[1])) {\r\n                            newArr = [...newArr, arr[i]];\r\n                            _.remove(arr, function (item) {\r\n                                return item == arr[i];\r\n                            })\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return newArr;\r\n        } else return [];\r\n\r\n    }\r\n\r\n    return sort(arr);\r\n}\r\n\r\nexport default findRoad;","import FetchData from \"../../assets/js/fetchData\";\r\n\r\nasync function PreloadImage({ questions, ...props }, callbackDone) {\r\n    // const loadImageMemo = useMemo(loadImage, [arrImage]);\r\n    // const [arrImage, setArrImage] = useState([]);\r\n\r\n    const loadImage = ({ url, imageId }) => {\r\n        return new Promise((resolve, reject) => {\r\n            const img = new Image();\r\n\r\n            img.onload = () => resolve({ [imageId]: img });\r\n            img.onerror = () => reject(new Error(`load ${url} fail`));\r\n            img.src = url;\r\n        });\r\n\r\n    };\r\n\r\n    const cacheImage = async () => {\r\n        const arrQXephinh = questions.filter(question => {\r\n            return question.type === 'xep_hinh' && question.image_id\r\n        })\r\n\r\n        let promisesUrlImage = [];\r\n        promisesUrlImage = arrQXephinh.map((question) => {\r\n            return new Promise((resolve, reject) => {\r\n                FetchData.urlItem(question.image_id, (url) => {\r\n                    return resolve({ url, imageId: question.image_id });\r\n                })\r\n            })\r\n        })\r\n        console.log(`promisesUrlImage Before`, promisesUrlImage);\r\n\r\n        Promise.all(promisesUrlImage)\r\n            .then(arrUrlItem => {\r\n                // console.log(arrUrlItem);\r\n\r\n                let promisesCacheImage = [];\r\n                for (const item of arrUrlItem) {\r\n                    promisesCacheImage.push(loadImage({ url: item.url, imageId: item.imageId }));\r\n                }\r\n\r\n                Promise.all(promisesCacheImage).then(res => {\r\n                    let objImages = {};\r\n                    for (const item of res) {\r\n                        objImages = { ...objImages, ...item }\r\n                    }\r\n                    callbackDone(objImages);\r\n                })\r\n            })\r\n    }\r\n\r\n    cacheImage();\r\n\r\n}\r\n\r\nexport default PreloadImage;","import React, { useEffect, useRef, useState } from 'react';\r\n\r\nfunction TotalTime({ onSetSesTotal }) {\r\n    const [count, setCount] = useState(0);\r\n\r\n    const caculatorTime = (time) => {\r\n        const second = time % 60 >= 10 ? time % 60 : `0${time % 60}`;\r\n        const minute = Math.floor(time / 60) >= 10 ? Math.floor(time / 60) : `0${Math.floor(time / 60)}`;\r\n        return `${minute}:${second}`;\r\n    }\r\n\r\n    useEffect(() => {\r\n        const iTime = setInterval(() => {\r\n            setCount(prev => prev + 1);\r\n        }, 1000);\r\n        // mainTime.current = \r\n\r\n        return () => {\r\n            clearInterval(iTime);  \r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        return () =>{ sessionStorage.setItem(\"totalTime\", count);}\r\n\r\n    }, [count])\r\n\r\n    return (\r\n        <div style={{ position: 'fixed', zIndex: 2000 }}>\r\n            {caculatorTime(count)}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default TotalTime;","import React, { useEffect, useRef } from 'react';\r\n\r\nfunction Canvas({img, keys}) {\r\n    const canvasRef = useRef();\r\n    console.log(\"key\", keys);\r\n    useEffect(() => {\r\n        if(keys) {\r\n            let ctx = canvasRef.current.getContext(\"2d\");\r\n            ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\r\n            const size_of_crop = 32;\r\n            // const layerCur = arrLayer[nameLayer];\r\n                    const positionX = Number(keys.split(\"-\")[0]);\r\n                    const positionY = Number(keys.split(\"-\")[1]);\r\n    \r\n                    ctx.drawImage(\r\n                        img,\r\n                        positionX * 32,\r\n                        positionY * 32,\r\n                        size_of_crop,\r\n                        size_of_crop,\r\n                        0,\r\n                        0,\r\n                        size_of_crop,\r\n                        size_of_crop\r\n                    );\r\n        }\r\n        \r\n \r\n    },[keys])\r\n    return (\r\n        <canvas ref={canvasRef} width={32} height={32}></canvas>\r\n    );\r\n}\r\n\r\nexport default Canvas;","import Canvas from \"../../components/Canvas\";\r\nimport './Map.scss'\r\n\r\nfunction GuideMap({ itemModal, srcImage, setTypeModal, ...props }) {\r\n    console.log(itemModal);\r\n    return (\r\n        <div className='modal_map_intro container-sm border'>\r\n            <div className=\"row\">\r\n\r\n                <div className=\"col-sm-12\">\r\n                    <i className=\"bi bi-x-circle\" style={{ float: 'right' }} onClick={() => {\r\n                        setTypeModal(false);\r\n                    }}></i>\r\n                </div>\r\n                <div className=\"col-sm-12\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-sm-3\" style={{ margin: 'auto', fontSize: '18px !important', color: '#c66666' }}>\r\n                            <span className='text_modal_map' style={{  fontSize: '20px'}}>\r\n                                Mô tả\r\n                            </span>\r\n                        </div>\r\n\r\n                        <div className=\"col-sm-11\" style={{ margin: 'auto' }}>\r\n                            <span className='text_modal_map'>\r\n                                Đây là bản đồ dẫn tới kho báu Rồng. Có rất nhiều chướng ngại vật, thử thách khó khăn trên đường đi tìm kho báu. Một số chướng ngại vật có thể cản trở bạn hoặc có thể giúp bạn đến kho báu nhanh hơn. Dưới đây là một vài chú thích:\r\n                            </span>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 border_map_modal animate__zoomInDown animate__animated\" style={{marginTop: '20px'}}>\r\n                    <div className=\"row\" style={{ alignItems: 'center' }}>\r\n                        <div className=\"col-sm-1\">\r\n                            <img\r\n                                src={process.env.PUBLIC_URL + '/assets/images/khobau.png'}\r\n                                style={{ width: '32px', height: '32px' }}\r\n                            />\r\n                        </div>\r\n                        <div className=\"col-sm-11\">\r\n                            <span className='text_modal_map'>Đây chính là kho báu Rồng. Nếu lấy được nó bạn sẽ được ban thưởng một phần thưởng</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 border_map_modal animate__zoomInDown animate__animated\">\r\n                    <div className=\"row\" style={{ alignItems: 'center' }}>\r\n                        <div className=\"col-sm-1\">\r\n                            <img\r\n                                src={process.env.PUBLIC_URL + '/assets/images/dice.png'}\r\n                                style={{ width: '32px', height: '32px' }}\r\n                            />\r\n                        </div>\r\n                        <div className=\"col-sm-11\">\r\n                            <span className='text_modal_map'>Ấn vào đây để có thể di chuyển </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 border_map_modal animate__zoomInDown animate__animated\">\r\n                    <div className=\"row\" style={{ alignItems: 'center' }}>\r\n                        <div className=\"col-sm-1\">\r\n                            <img\r\n                                src={process.env.PUBLIC_URL + '/assets/images/heart.png'}\r\n                                style={{ width: '32px', height: '32px' }}\r\n                            />\r\n                        </div>\r\n                        <div className=\"col-sm-11\">\r\n                            <span className='text_modal_map'>Số lượt chơi của bạn là giới hạn nên hãy thận trọng với những câu hỏi. Nó sẽ được hiển thị tại góc trên cùng bên phải của màn hình</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 border_map_modal animate__zoomInDown animate__animated\">\r\n                    <div className=\"row\" style={{ alignItems: 'center' }}>\r\n                        <div className=\"col-sm-1\">\r\n                            <img\r\n                                src={process.env.PUBLIC_URL + '/assets/images/time.png'}\r\n                                style={{ width: '32px', height: '32px' }}\r\n                            />\r\n                        </div>\r\n                        <div className=\"col-sm-11\">\r\n                            <span className='text_modal_map'>Tại góc trên cùng bên trái màn hình. Đây là nơi hiển thị tổng thời gian từ ban đầu cho tới khi bạn tìm được kho báu.</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {itemModal.map(item => {\r\n                    if (item?.effect.includes(\"back_forward\")) {\r\n                        item.des = \"Đây là .....Khi bước vào đây bạn sẽ được tiến thêm một số ô nhất định\"\r\n                    } else if (item?.effect.includes(\"forward\")) {\r\n                        item.des = \"Khi bước vào đây bạn sẽ phải lùi về sau\"\r\n                    } else if (item?.effect.includes(\"tele\")) {\r\n                        item.des = \"Cổng không gian, bạn sẽ bị dịch chuyển tới một nơi bất kì nào đó trong bản đồ khi bước vào nó.\"\r\n                    }\r\n\r\n                    return (\r\n                        <div className=\"col-sm-12 border_map_modal animate__zoomInDown animate__animated\">\r\n                            <div className=\"row\" style={{ alignItems: 'center' }}>\r\n                                <div className=\"col-sm-1\">\r\n                                    <Canvas keys={item?.td} img={srcImage[item?.tilesetIdx || 0]} />\r\n                                </div>\r\n                                <div className=\"col-sm-11\">\r\n                                    <span className='text_modal_map'>{item?.des}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    )\r\n                })}\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default GuideMap;","import clsx from 'clsx';\r\nimport styleLoading from './loading.module.scss';\r\n\r\nfunction BodyLoading(props) {\r\n    const faceCube = (\r\n        <>\r\n            <div className={clsx(styleLoading.face, styleLoading.top)}></div>\r\n            <div className={clsx(styleLoading.face, styleLoading.left)}></div>\r\n            <div className={clsx(styleLoading.face, styleLoading.right)}></div>\r\n        </>)\r\n\r\n\r\n    const textLoading =\r\n        <>\r\n            <div className={clsx(styleLoading.textLoading, styleLoading.loadingText05)}>\r\n                <span className={styleLoading.crtLoading}>L</span>\r\n                <span className={styleLoading.crtLoading}>O</span>\r\n                <span className={styleLoading.crtLoading}>A</span>\r\n                <span className={styleLoading.crtLoading}>D</span>\r\n                <span className={styleLoading.crtLoading}>I</span>\r\n                <span className={styleLoading.crtLoading}>N</span>\r\n                <span className={styleLoading.crtLoading}>G</span>\r\n            </div>\r\n\r\n        </>\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className={clsx(styleLoading.loading)}>\r\n                <div className={clsx(styleLoading.background)}></div>\r\n                <div className={clsx(styleLoading.container)} >\r\n                    <div className={clsx(styleLoading.h1Container)}>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h1, styleLoading.w1, styleLoading.l1, styleLoading.cube, styleLoading.h1, styleLoading.w1, styleLoading.l1)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h1, styleLoading.w1, styleLoading.l2)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h1, styleLoading.w1, styleLoading.l3)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h1, styleLoading.w2, styleLoading.l1)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h1, styleLoading.w2, styleLoading.l2)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h1, styleLoading.w2, styleLoading.l3)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h1, styleLoading.w3, styleLoading.l1)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h1, styleLoading.w3, styleLoading.l2)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h1, styleLoading.w3, styleLoading.l3)} >\r\n                            {faceCube}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className={clsx(styleLoading.h2Container)}>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h2, styleLoading.w1, styleLoading.l1)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h2, styleLoading.w1, styleLoading.l2)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h2, styleLoading.w1, styleLoading.l3)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h2, styleLoading.w2, styleLoading.l1)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h2, styleLoading.w2, styleLoading.l2)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h2, styleLoading.w2, styleLoading.l3)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h2, styleLoading.w3, styleLoading.l1)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h2, styleLoading.w3, styleLoading.l2)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.cube, styleLoading.h2, styleLoading.w3, styleLoading.l3)} >\r\n                            {faceCube}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className={clsx(styleLoading.h3Container)}>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h3, styleLoading.w1, styleLoading.l1)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h3, styleLoading.w1, styleLoading.l2)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h3, styleLoading.w1, styleLoading.l3)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h3, styleLoading.w2, styleLoading.l1)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h3, styleLoading.w2, styleLoading.l2)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h3, styleLoading.w2, styleLoading.l3)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h3, styleLoading.w3, styleLoading.l1)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h3, styleLoading.w3, styleLoading.l2)} >\r\n                            {faceCube}\r\n                        </div>\r\n\r\n                        <div className={clsx(styleLoading.cube, styleLoading.h3, styleLoading.w3, styleLoading.l3)} >\r\n                            {faceCube}\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n                {textLoading}\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default BodyLoading;","import clsx from 'clsx';\r\nimport { useEffect, useRef } from 'react';\r\nimport { Base } from '../../pages/Base';\r\nimport BodyLoading from './BodyLoading';\r\n\r\n\r\n\r\nfunction Loading(props) {\r\n    const elLoading = useRef();\r\n\r\n    useEffect(() => {\r\n        elLoading.current.classList.add(\"animate__fadeIn\");\r\n\r\n        return () => {\r\n            elLoading.current?.classList.remove(\"animate__fadeIn\");\r\n            elLoading.current?.classList.add(\"animate__fadeOut\");\r\n\r\n        }\r\n    },[])\r\n\r\n\r\n    return (\r\n        <div ref={elLoading}>\r\n\r\n            <Base\r\n                headerBody={<BodyLoading></BodyLoading>}\r\n            ></Base>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Loading;","import React, { useEffect, useMemo, useReducer, useRef, useState } from 'react';\r\nimport './Map.scss'\r\nimport Base from '../Base/Base'\r\nimport _, { forIn, isEmpty } from 'lodash';\r\nimport Dice from './dice';\r\nimport BodyQuestion from '../Question/BodyQuestion';\r\nimport { RobotModel } from './robot';\r\n\r\nimport { useNavigate } from 'react-router-dom'\r\nimport findRoad from './findRoad';\r\nimport AnimationText from '../../components/Text';\r\nimport PreloadImage from './PreloadImage';\r\nimport 'animate.css';\r\nimport { CacheImageProvider } from '../../Provider/CacheImageContext';\r\nimport TotalTime from '../../components/CountTime/totalTime';\r\nimport Canvas from '../../components/Canvas';\r\nimport GuideMap from './GuideMap';\r\nimport { Loading } from '../../components/Loading';\r\nimport clsx from 'clsx';\r\nfunction MapComponent(props) {\r\n    const imageE = useRef();\r\n    const canvasRef = useRef();\r\n    const [codebeautty, setCodebeauty] = useState({});\r\n    const [map, setMap] = useState([]);\r\n    const [onDice, setOnDice] = useState(false);\r\n    const currentPoint = useRef(0);\r\n    const randomDice = useRef();\r\n    const [isDice, setIsDice] = useState(false);\r\n    const [showQuestion, setShowQuestion] = useState(false);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const navigation = useNavigate();\r\n    const listQuestion = useRef([]);\r\n    const previousStep = useRef();\r\n    const [wrong, setWrong] = useState({})\r\n    const [showText, setShowText] = useState(false);\r\n    const itemRoad = useRef([]);\r\n    const [typeModal, setTypeModal] = useState(false);\r\n    const eventOfRoad = useRef([]);\r\n    const allowToDice = useRef(true);\r\n    // const filterEventOfRoad = useRef({});\r\n    const beforeTypeEvent = useRef();\r\n\r\n    const [currentMap, setCurrentMap] = useState({});\r\n    const [arrImage, setArrImage] = useState([]);\r\n\r\n    // se dung\r\n    const [srcImage, setSrcImage] = useState([])\r\n\r\n    const refLayers = useRef({});\r\n    const [bufferLayers, setBufferLayers] = useState({});\r\n\r\n    const [dataMap, actionDataMap] = useReducer(controlDataMap, {})\r\n    const [dataCrtMove, actionDataCrtMove] = useReducer(controlDataCtrMove, {});\r\n    const cacheImageXepHinh = useRef();\r\n    const itemModal = useRef([]);\r\n\r\n    const [isCrtMoving, setIsCrtMoving] = useState(false);\r\n    const arrStepPoint = useRef([]);\r\n    const filterEventOfRoad = useMemo(() => {\r\n        if (!_.isEmpty(map) && !_.isEmpty(dataMap)) {\r\n            const result = map.reduce((object, item) => {\r\n                if (dataMap.layers['item-road'][item]) {\r\n                    const key = dataMap.layers['item-road'][item]?.x + '-' + dataMap.layers['item-road'][item]?.y;\r\n                    object[key] = [...object[key] || [], item];\r\n                    return object;\r\n                } else return object;\r\n\r\n            }, {})\r\n\r\n\r\n\r\n            for (const item of codebeautty.define_item_map) {\r\n\r\n                const temp = Object.entries(codebeautty.tileSets[item.tilesetIdx].tileData).filter((tile) => {\r\n                    // console.log(tile[1].tileSymbol, tile[1].tileSymbol);\r\n                    return item.tileSymbol == tile[1].tileSymbol;\r\n                })\r\n                const newItem = { ...item, td: (temp[0])[0] };\r\n                itemModal.current = [...itemModal.current || [], newItem];\r\n            }\r\n\r\n            console.log(\" itemModal.current\", itemModal.current);\r\n            return result;\r\n\r\n        }\r\n    }, [map]);\r\n\r\n    function controlDataCtrMove(oldState, action) {\r\n        console.log(`action`, action);\r\n        console.log(`oldState`, oldState);\r\n        switch (action.type) {\r\n            case 'INIT_DATA_CRT':\r\n\r\n                return { ...oldState, status: 'INIT_DATA_CRT', arrStep: [], nextPoint: 0, prePoint: 0, arrTypeStep: [], nextTypeStep: '', prevTypeStep: ''}\r\n            case 'ADD_STEP_MOVE':\r\n                return { ...oldState, status: 'ADD_STEP_MOVE', arrStep: [...oldState.arrStep, action.point], arrTypeStep: [...oldState.arrTypeStep, action?.typeStep] }\r\n            case 'FINISH_ADD_STEP':\r\n                return { ...oldState, status: action.type }\r\n\r\n            case 'NEXT_STEP':\r\n            case 'CRT_MOVING':\r\n                // console.group([action.type]);\r\n\r\n                // console.log(`dataStep`, oldState.arrStep);\r\n\r\n                const tempPrePoint = oldState.nextPoint !== null ? oldState.prePoint : oldState.nextPoint;\r\n                const temPreTypeStep = oldState.nextTypeStep !== null ?  oldState.prevTypeStep : oldState.nextTypeStep;\r\n                var nextPoint;\r\n                let nextTypeStep;\r\n              \r\n                if (!_.isEmpty(oldState.arrStep)) {\r\n                    nextPoint = oldState.arrStep.shift();\r\n                  \r\n                }\r\n                else {\r\n                    console.log('mang rong');\r\n                    nextPoint = null;\r\n                }\r\n\r\n                if (!_.isEmpty(oldState.arrTypeStep)) {\r\n                    nextTypeStep = oldState.arrTypeStep.shift();\r\n                  \r\n                }\r\n                else {\r\n                    console.log('mang rong');\r\n                    nextTypeStep = null;\r\n                }\r\n                // console.log(`nextPoint`, nextPoint);\r\n                // console.groupEnd();\r\n                return { ...oldState, nextPoint, prePoint: tempPrePoint, status: action.type, nextTypeStep, prevTypeStep: temPreTypeStep }\r\n\r\n            case 'CRT_STOP_MOVING':\r\n                console.warn('crt stop');\r\n                return { ...oldState, status: action.type }\r\n\r\n            default:\r\n                throw new Error();\r\n\r\n        }\r\n    }\r\n\r\n    // console.log(filterEventOfRoad);\r\n    function controlDataMap(oldState, action) {\r\n        switch (action.type) {\r\n            case 'INIT_MAP':\r\n                let layersMap = {};\r\n                let { layers, ...infoMap } = action.currentMap;\r\n\r\n                for (const layer of layers) {\r\n                    layersMap[layer.name] = layer.tiles;\r\n                }\r\n                console.log('Layers', layers);\r\n                loadImage();\r\n                console.log('khoi tao map');\r\n\r\n\r\n\r\n                return { ...oldState, layers: layersMap, ...infoMap, status: action.type };\r\n\r\n            case 'UPDATE_LAYER_CHARACTER':\r\n                let newLayers =\r\n                {\r\n                    ...oldState.layers,\r\n                    'charater': action.newLayerCharacter\r\n                }\r\n\r\n                return { ...oldState, layers: newLayers, status: action.type }\r\n            default:\r\n                throw new Error();\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    //kiem tra xem co boom\r\n    const validateStep = (toado) => {\r\n        if (_.isEmpty(dataMap.layers['item-road'][toado])) return false;\r\n        else {\r\n            const typeEvent = eventOfRoad.current.reduce((object, item) => {\r\n                if (item?.tileSymbol == dataMap.layers['item-road'][toado]?.tileSymbol) return item;\r\n                else return object;\r\n            }, {})\r\n            if (typeEvent?.effect.split(' ')[0] == 'back_forward') {\r\n                beforeTypeEvent.current = 'forward';\r\n                return -Number(typeEvent?.effect.split(' ')[1]);\r\n            }\r\n            else if (typeEvent?.effect.split(' ')[0] == 'forward') {\r\n                beforeTypeEvent.current = 'forward';\r\n                return Number(typeEvent?.effect.split(' ')[1]);\r\n            }\r\n            else if (typeEvent?.effect.split(' ')[0] == 'tele') {\r\n                beforeTypeEvent.current = 'tele';\r\n                const numberTele = Number(typeEvent?.effect.split(' ')[1]);\r\n                const typeFilterEvent = dataMap.layers['item-road'][toado]?.x + '-' + dataMap.layers['item-road'][toado]?.y;\r\n                const currentTele = filterEventOfRoad[typeFilterEvent].indexOf(toado);\r\n                if (currentTele + numberTele > (_.size(filterEventOfRoad[typeFilterEvent]) - 1)) {\r\n                    const valueTeleToJump = map.indexOf((filterEventOfRoad[typeFilterEvent])[_.size(filterEventOfRoad[typeFilterEvent]) - 1]);\r\n               \r\n                    return valueTeleToJump - currentPoint.current;\r\n                } else if (currentTele + numberTele < 0) {\r\n                    const valueTeleToJump = map.indexOf((filterEventOfRoad[typeFilterEvent])[0]);\r\n                   \r\n               \r\n                    return valueTeleToJump - currentPoint.current;\r\n                } else {\r\n                    \r\n                    const valueTeleToJump = map.indexOf((filterEventOfRoad[typeFilterEvent])[currentTele + numberTele]);\r\n                    return valueTeleToJump - currentPoint.current;\r\n                }\r\n            } else return false\r\n        }\r\n    }\r\n\r\n    const handleValidateMove = (time, dice, typeIndexTele) => {\r\n        if (validateStep(map[currentPoint.current]) !== false && !typeIndexTele) {\r\n            const step = validateStep(map[currentPoint.current]);\r\n\r\n            arrStepPoint.current = [...arrStepPoint.current, currentPoint.current + step];\r\n            console.log(\"asdasdsadasd\", beforeTypeEvent.current == 'forward');\r\n            actionDataCrtMove({\r\n                type: 'ADD_STEP_MOVE',\r\n                point: currentPoint.current + step,\r\n                hi: 'handleValidateMove',\r\n                typeStep: beforeTypeEvent.current == 'forward' ? (step < 0 ? 'Lùi': 'Tiến') : 'Dịch chuyển',\r\n            });\r\n            currentPoint.current = currentPoint.current + step;\r\n\r\n\r\n            // const pictureCha = Object.values(charactor);\r\n            const pictureCha = Object.values(dataMap.layers.charater);\r\n\r\n\r\n            const a = map[currentPoint.current];\r\n            const newCha = {\r\n                [`${a.split('-')[0]}-${a.split('-')[1] - 1}`]: pictureCha[0],\r\n                [a]: pictureCha[1],\r\n\r\n            }\r\n\r\n            const timeOut = setTimeout(() => {\r\n                allowToDice.current = true;\r\n                // if (beforeTypeEvent.current == 'forward') {\r\n                //     if (step < 0) setShowText(\"Lùi\");\r\n                //     else setShowText(\"Tiến\");\r\n                // } else if (beforeTypeEvent.current == 'tele') {\r\n                //     setShowText(\"Dịch chuyển\");\r\n                // }\r\n                // const timeOut1 = setTimeout(() => {\r\n\r\n                    actionDataMap({\r\n                        type: \"UPDATE_LAYER_CHARACTER\",\r\n                        newLayerCharacter: newCha\r\n                    });\r\n                    // setShowText(false);\r\n\r\n                    if(beforeTypeEvent.current == 'tele' ) {\r\n\r\n                        actionDataCrtMove({ type: 'CRT_MOVING' });\r\n                    }\r\n                    if (beforeTypeEvent.current == 'forward') handleValidateMove(1000, false, false);\r\n                    // clearTimeout(timeOut1);\r\n                    clearTimeout(timeOut);\r\n                // }, 1000)\r\n\r\n\r\n\r\n\r\n            }, time);\r\n        } else {\r\n            if (dice) {\r\n                const timeShowQues = setTimeout(() => {\r\n\r\n                    setShowQuestion(true);\r\n                    clearTimeout(timeShowQues);\r\n                }, 400)\r\n            }\r\n            actionDataCrtMove({ type: 'CRT_MOVING' });\r\n\r\n        }\r\n    }\r\n\r\n    const handleMove = () => {\r\n        console.warn('begin handleMove');\r\n        try {\r\n            allowToDice.current = false;\r\n            const dice = Math.floor(Math.random() * 6) + 1;\r\n            // Math.floor(Math.random() * 6) + 1;\r\n            // const dice = 4;\r\n            randomDice.current = dice;\r\n            const pictureCha = Object.values(dataMap.layers.charater);\r\n            const newPoint = currentPoint.current + dice;\r\n\r\n            if (newPoint < (_.size(map) - 1)) {\r\n                previousStep.current = currentPoint.current;\r\n                arrStepPoint.current = [...arrStepPoint.current, newPoint];\r\n                actionDataCrtMove({\r\n                    type: 'ADD_STEP_MOVE',\r\n                    point: newPoint,\r\n                    hi: 'handleMove',\r\n                    typeStep: 'Tiến',\r\n                });\r\n\r\n                const a = map[newPoint];\r\n\r\n                setOnDice(!onDice);\r\n                setIsDice(true);\r\n                currentPoint.current = newPoint;\r\n\r\n                const newCha = {\r\n                    [`${a.split('-')[0]}-${a.split('-')[1] - 1}`]: pictureCha[0],\r\n                    [a]: pictureCha[1],\r\n\r\n                }\r\n                const timeOut = setTimeout(() => {\r\n                    // setShowText(\"Tiến\")\r\n                    // const timeOut1 = setTimeout(() => {\r\n\r\n                        actionDataMap({\r\n                            type: \"UPDATE_LAYER_CHARACTER\",\r\n                            newLayerCharacter: newCha\r\n                        });\r\n                        // setShowText(false);\r\n                        handleValidateMove(1000, true, false);\r\n\r\n                        // clearTimeout(timeOut1);\r\n                    // }, 1000)\r\n\r\n\r\n                    setIsDice(false);\r\n\r\n                    clearTimeout(timeOut);\r\n                }, 2000);\r\n\r\n\r\n\r\n            } else {\r\n                const a = map[(_.size(map) - 1)];\r\n                // const pictureCha = Object.values(charactor);\r\n                // const pictureCha = Object.values(dataMap.layers.charater);\r\n\r\n                setOnDice(!onDice);\r\n                setIsDice(true);\r\n                const newCha = {\r\n                    [`${a.split('-')[0]}-${a.split('-')[1] - 1}`]: pictureCha[0],\r\n                    [a]: pictureCha[1],\r\n\r\n                }\r\n                const timeOut = setTimeout(() => {\r\n                    // setShowText(\"Tiến\")\r\n                    const timeOut1 = setTimeout(() => {\r\n                        actionDataMap({\r\n                            type: \"UPDATE_LAYER_CHARACTER\",\r\n                            newLayerCharacter: newCha\r\n                        });\r\n                        // setShowText(false);\r\n                        clearTimeout(timeOut1);\r\n                    }, 1000)\r\n                    // setListPicture(newArr);\r\n                    setIsDice(false);\r\n                    clearTimeout(timeOut);\r\n                }, 1500)\r\n                const timeOut2 = setTimeout(() => {\r\n                    navigation('/complete')\r\n                    clearTimeout(timeOut2);\r\n                }, 3500)\r\n\r\n            }\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n        console.log(`arrStepPoint`, arrStepPoint);\r\n        console.warn('end handleMove');\r\n\r\n\r\n\r\n    }\r\n    //quay lai o cu\r\n    const backToPreviousStep = () => {\r\n\r\n        if (wrong.quantityWrongCur + 1 >= wrong.maxWrong) {\r\n            navigation('/lose')\r\n        }\r\n        else {\r\n            setWrong((oldWrong) => ({ ...oldWrong, quantityWrongCur: oldWrong.quantityWrongCur + 1 }))\r\n\r\n            const a = map[(previousStep.current) > (_.size(map) - 1) ? (_.size(map) - 1) : previousStep.current];\r\n            console.log('previousStep.current', previousStep.current);\r\n            actionDataCrtMove({\r\n                type: 'ADD_STEP_MOVE',\r\n                point: previousStep.current,\r\n                hi: 'backToPreviousStep',\r\n                typeStep: 'Lùi'\r\n            });\r\n            currentPoint.current = previousStep.current\r\n            // const pictureCha = Object.values(charactor);\r\n            const pictureCha = Object.values(dataMap.layers.charater);\r\n\r\n            const newCha = {\r\n                [`${a.split('-')[0]}-${a.split('-')[1] - 1}`]: pictureCha[0],\r\n                [a]: pictureCha[1],\r\n\r\n            }\r\n\r\n\r\n            const timeOut = setTimeout(() => {\r\n                setShowText(\"Trừ 1 mạng\")\r\n                const timeOut1 = setTimeout(() => {\r\n                    actionDataMap({\r\n                        type: \"UPDATE_LAYER_CHARACTER\",\r\n                        newLayerCharacter: newCha\r\n                    });\r\n                    actionDataCrtMove({ type: 'CRT_MOVING' });\r\n                    setShowText(false);\r\n                    allowToDice.current = true;\r\n                    clearTimeout(timeOut1);\r\n                }, 1000)\r\n             \r\n                // setListPicture(newArr);\r\n                clearTimeout(timeOut);\r\n            }, 1000)\r\n\r\n        }\r\n\r\n    }\r\n    //lay thong tin cua ban do\r\n    useEffect(() => {\r\n        setIsLoading(true);\r\n\r\n        // fetch('https://api.npoint.io/6a4c897196b39197353e')\r\n        //     .then(jsonData => jsonData.json())\r\n        //     .then(data => {\r\n\r\n        //         actionDataCrtMove({ type: 'INIT_DATA_CRT' });\r\n        //         setCodebeauty(data);\r\n        //         setArrImage(Object.values(data?.tileSets).map(item => {\r\n        //             return item?.src;\r\n        //         }))\r\n\r\n        //         PreloadImage({ questions: data.questions }, (images) => {\r\n        //             console.log(images);\r\n        //             cacheImageXepHinh.current = images;\r\n        //         })\r\n        //         setCurMap(data?.maps)\r\n        //         eventOfRoad.current = data?.define_item_map;\r\n        //         listQuestion.current = data?.questions;\r\n\r\n        //         sessionStorage.setItem('arrIndexQuestion', `[${Object.keys(listQuestion.current).toString()}]`);\r\n\r\n        //         setWrong(() => {\r\n        //             return {\r\n        //                 'maxWrong': data.max_wrong >= 1 ? data.max_wrong : 2,\r\n        //                 'quantityWrongCur': 0\r\n        //             }\r\n        //         })\r\n        //         setTimeout(() => {\r\n\r\n\r\n        //             setIsLoading(false);\r\n        //         }, 3000);\r\n        //     }).catch(err => {\r\n        //         console.log(err);\r\n        //     })\r\n\r\n\r\n\r\n        new Promise(resolve => {\r\n            resolve();\r\n        }).then(() => {\r\n            const dataMap = sessionStorage.getItem('dataMap');\r\n            console.log('lay data map', dataMap);\r\n\r\n            return JSON.parse(dataMap);\r\n        }).then((data) => {\r\n            if (isEmpty(data)) {\r\n                navigation('/')\r\n            } else {\r\n\r\n                actionDataCrtMove({ type: 'INIT_DATA_CRT' });\r\n                setCodebeauty(data);\r\n                setArrImage(Object.values(data?.tileSets).map(item => {\r\n                    return item?.src;\r\n                }))\r\n\r\n                PreloadImage({ questions: data.questions }, (images) => {\r\n                    console.log(images);\r\n                    cacheImageXepHinh.current = images;\r\n                })\r\n                setCurMap(data?.maps)\r\n                eventOfRoad.current = data?.define_item_map;\r\n                listQuestion.current = data?.questions;\r\n\r\n                sessionStorage.setItem('arrIndexQuestion', `[${Object.keys(listQuestion.current).toString()}]`);\r\n\r\n                setWrong(() => {\r\n                    return {\r\n                        'maxWrong': data.max_wrong >= 1 ? data.max_wrong : 2,\r\n                        'quantityWrongCur': 0\r\n                    }\r\n                })\r\n                setIsLoading(false);\r\n            }\r\n\r\n        })\r\n\r\n    }, [])\r\n\r\n    function setCurMap(maps) {\r\n        const keyMap = Object.keys(maps);\r\n        const randomMap = maps[keyMap[Math.floor(Math.random() * (_.size(keyMap)))]];\r\n        // const randomMap = maps[keyMap[1]];\r\n        setCurrentMap(randomMap);\r\n        // setListPicture(randomMap?.layers);\r\n\r\n        actionDataMap({\r\n            type: \"INIT_MAP\",\r\n            currentMap: randomMap\r\n        });\r\n    }\r\n    //Load anh map\r\n    function loadImage() {\r\n        const loadImage = url => {\r\n            return new Promise((resolve, reject) => {\r\n                const img = new Image();\r\n                img.onload = () => resolve(img);\r\n                img.onerror = () => reject(new Error(`load ${url} fail`));\r\n                img.src = url;\r\n            });\r\n\r\n        };\r\n        const waitLoad = async () => {\r\n            const arr = arrImage.map(item => {\r\n                return loadImage(item);\r\n            })\r\n\r\n            Promise.all(arr).then((imgs) => {\r\n                setSrcImage(imgs);\r\n            })\r\n            // return await Promise.all(arr);\r\n        }\r\n\r\n        waitLoad();\r\n    }\r\n    // const loadImageMemo = useMemo(loadImage, [arrImage]);\r\n\r\n    useEffect(() => {\r\n        // if (!isEmpty(srcImage) && !isEmpty(dataMap)) {\r\n        //     draw2(srcImage);\r\n        // }\r\n\r\n    }, [dataMap, srcImage])\r\n\r\n    //sau khi ảnh src load xong\r\n    useEffect(() => {\r\n        if (!isEmpty(srcImage)) {\r\n\r\n            draw2(srcImage);\r\n        }\r\n    }, [srcImage])\r\n\r\n\r\n\r\n    //Tim chinh xacs map\r\n    useEffect(() => {\r\n        if (!isEmpty(dataMap)) {\r\n            // var dataRoad = findRoad([...Object.keys(arrLayer['road'])], dataMap.mapHeight);\r\n            var dataRoad = findRoad(Object.keys(dataMap.layers['road']), dataMap.mapHeight);\r\n\r\n            console.log('dataRoad', dataRoad);\r\n            setMap(dataRoad);\r\n\r\n        }\r\n    }, [isEmpty(dataMap)]);\r\n\r\n    function drawLayer2(layerCanvas, nameLayer, img) {\r\n        console.log('ve ' + nameLayer);\r\n        let ctx = layerCanvas.getContext(\"2d\");\r\n        ctx.clearRect(0, 0, layerCanvas.width, layerCanvas.height);\r\n        const size_of_crop = 32;\r\n        // const layerCur = arrLayer[nameLayer];\r\n        const layerCur = dataMap.layers[nameLayer];\r\n\r\n        // console.log(`srcImage`, srcImage);\r\n        if (false) {\r\n            console.log('dung buffer ' + nameLayer);\r\n            ctx.drawImage(bufferLayers[nameLayer], 0, 0);\r\n        }\r\n        else {\r\n            for (const key in layerCur) {\r\n                const positionX = Number(key.split(\"-\")[0]);\r\n                const positionY = Number(key.split(\"-\")[1]);\r\n                const tilesheetX = layerCur[key]?.x;\r\n                const tilesheetY = layerCur[key]?.y;\r\n                ctx.drawImage(\r\n                    img[layerCur[key].tilesetIdx],\r\n                    tilesheetX * 32,\r\n                    tilesheetY * 32,\r\n                    size_of_crop,\r\n                    size_of_crop,\r\n                    positionX * 32,\r\n                    positionY * 32,\r\n                    size_of_crop,\r\n                    size_of_crop\r\n                );\r\n            }\r\n\r\n\r\n\r\n\r\n        }\r\n        // setBufferLayers((oldbuffer) => {\r\n        //     console.log('ve lai ' + nameLayer);\r\n        //     return { ...oldbuffer, [nameLayer]: ctx }\r\n        // })\r\n    }\r\n\r\n\r\n    const draw2 = (img) => {\r\n        console.log(`status map`, dataMap.status);\r\n        for (const key in dataMap.layers) {\r\n            drawLayer2(refLayers.current[key], key, img);\r\n        }\r\n\r\n\r\n        // console.log('ve xong');\r\n        // var crt = refLayers.current['charater'];\r\n        // var road = refLayers.current['road'];\r\n        // crt.getContext('2d').fillRect(0,0,10,10);\r\n        // crt.getContext('2d').drawImage(road, 17 * 32, 17 * 32, 100, 100);\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    const handleCloseModal = (type) => {\r\n        if (!type) {\r\n            allowToDice.current = true;\r\n        }\r\n        console.log('so mang con lai', wrong);\r\n\r\n        setShowQuestion(false);\r\n    }\r\n    const PopupQuestion = () => {\r\n        return (\r\n            <CacheImageProvider\r\n                imagesCache={cacheImageXepHinh.current}\r\n            >\r\n                <BodyQuestion\r\n                    questions={listQuestion.current}\r\n                    onCloseModal={handleCloseModal}\r\n                    onBackToPrev={backToPreviousStep}\r\n                />\r\n            </CacheImageProvider>\r\n\r\n        )\r\n    }\r\n    const showCountWrong = () => {\r\n\r\n        if (!isEmpty(wrong)) {\r\n            let wrongConLai = wrong.maxWrong - wrong.quantityWrongCur;\r\n            return Array.from(new Array(wrongConLai), () => {\r\n                return <img className='animate__animated animate__bounce' src=\"https://img.icons8.com/stickers/20/000000/like.png\" />\r\n            });\r\n        }\r\n\r\n    }\r\n    const widthCanvas = dataMap?.width * dataMap?.mapWidth / 10;\r\n    const heightCanvas = dataMap?.height * dataMap?.mapHeight / 10;\r\n\r\n    const handleShowText = (text) => {\r\n        return (\r\n            <AnimationText text={text} top={'10%'} left={'32%'} size={'50px'} />\r\n        )\r\n    }\r\n\r\n    //show modal huong dan\r\n    const handleShowModalIntroduction = (type) => {\r\n        console.log(\"type\", type);\r\n        setTypeModal(type);\r\n    }\r\n\r\n    return (\r\n        <Base\r\n            headerBody={isLoading && <Loading></Loading>}\r\n            visibleNavbar= {!showQuestion}\r\n            body={\r\n                <>\r\n                    {isDice && <Dice status={onDice} randomAngle={randomDice.current} isDice={isDice} />}\r\n                    {showText && handleShowText(showText)}\r\n                    {!_.isEmpty(map) &&\r\n                        <>\r\n                            <div className={clsx({ 'text-black': showQuestion }, { 'text-blue': !showQuestion })}>\r\n                                <TotalTime />\r\n\r\n                            </div>\r\n                            <div id='roll' className='roll-button' hidden={!allowToDice.current} ><button className='button_dice' onClick={handleMove}>Xúc xắc</button></div>\r\n                            <div className='tim'\r\n                                // style={{ position: 'fixed', right: '32%', zIndex: 1 }} \r\n                                hidden={showQuestion}>\r\n                                {showCountWrong()}\r\n                            </div>\r\n                            <div id=\"canvasesdiv\" style={{\r\n                                width: '100%', minHeight: '100%',\r\n                                position: \"relative\"\r\n\r\n                            }}>\r\n                                <canvas\r\n                                    ref={(ref) => {\r\n\r\n                                        refLayers.current['base'] = ref;\r\n                                    }}\r\n                                    className='layer-map layer-base'\r\n\r\n\r\n                                    width={widthCanvas}\r\n                                    height={heightCanvas}\r\n                                >\r\n                                </canvas>\r\n                                <canvas\r\n                                    ref={(ref) => {\r\n\r\n                                        refLayers.current['item-base'] = ref;\r\n                                    }}\r\n                                    className='layer-map layer--item-base'\r\n                                    width={widthCanvas}\r\n                                    height={heightCanvas}\r\n                                >\r\n                                </canvas>\r\n                                <canvas\r\n                                    ref={(ref) => {\r\n\r\n                                        refLayers.current['road'] = ref;\r\n                                    }}\r\n                                    className='layer-map layer--road'\r\n                                    width={widthCanvas}\r\n                                    height={heightCanvas}\r\n                                >\r\n                                </canvas>\r\n                                <canvas\r\n                                    ref={(ref) => {\r\n\r\n                                        refLayers.current['item-road'] = ref;\r\n                                    }}\r\n                                    className='layer-map layer--item-road'\r\n                                    width={widthCanvas}\r\n                                    height={heightCanvas}\r\n                                >\r\n                                </canvas>\r\n                                <canvas\r\n                                    ref={(ref) => {\r\n\r\n                                        refLayers.current['charater'] = ref;\r\n                                    }}\r\n                                    className='layer-map layer--item-charater'\r\n                                    width={widthCanvas}\r\n                                    height={heightCanvas}\r\n\r\n                                    style={{ display: \"none\" }}\r\n                                >\r\n                                </canvas>\r\n                                <RobotModel canvasRef={canvasRef} currentPoint={currentPoint.current} map={map}\r\n                                    setIsCrtMoving={setIsCrtMoving}\r\n                                    width={widthCanvas}\r\n                                    height={heightCanvas}\r\n                                    {...{ dataCrtMove, actionDataCrtMove }}\r\n                                    onShowText={setShowText}\r\n                                    valueShowText={showText}\r\n                                />\r\n                            </div>\r\n\r\n\r\n\r\n                        </>\r\n                    }\r\n\r\n                    {/* <img ref={imageE} hidden/> */}\r\n\r\n                    {dataCrtMove.status === 'CRT_STOP_MOVING' && !isCrtMoving && showQuestion && PopupQuestion()}\r\n                    {/* {typeModal && ModalIntroductionMap()} */}\r\n                    {typeModal && <GuideMap {...{ itemModal: itemModal.current, srcImage, setTypeModal }} />}\r\n\r\n                </>\r\n\r\n            }\r\n            // isLoading={isLoading} \r\n            text={\"Đang tải bản đồ\"} onSetTypeModal={handleShowModalIntroduction} />\r\n\r\n\r\n    );\r\n}\r\n\r\nexport default MapComponent;","import clsx from 'clsx';\r\nimport styleStart from './Start.module.scss';\r\nimport styleBase from '../Base/Base.module.scss';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction BodyStart(props) {\r\n    const navigate = useNavigate();\r\n    return (\r\n        <>\r\n            <div className={clsx('row')}>\r\n                <div className={clsx(styleStart['image-start'])}>\r\n                    <img src={process.env.PUBLIC_URL + \"/assets/images/start.png\"} alt=\"\" />\r\n                </div>\r\n            </div>\r\n            <div className={clsx(styleBase['center-flex'], 'row', 'mt-2')}>\r\n                <div \r\n                onClick={() => {\r\n                    navigate('/scan');\r\n                }}\r\n                className={clsx('btn', 'col-4', styleBase['btn-mobile'], styleStart['btn-start'])}>\r\n                    Bắt đầu\r\n                </div>\r\n\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default BodyStart;","import { Base } from '../Base';\r\nimport BodyStart from './BodyStart';\r\n\r\nfunction Start(props) {\r\n    return (\r\n        <>\r\n            <Base body={<BodyStart></BodyStart>}>\r\n            </Base>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Start;","import React, { useEffect, useState } from 'react';\r\nimport { Base } from '../Base';\r\nimport {useNavigate} from 'react-router-dom'\r\nimport './lose.css'\r\nfunction Lose(props) {\r\n    const navigate = useNavigate();\r\n    const caculatorTime = (time) => {\r\n        const second = time % 60 >=10 ?  time % 60 : `0${ time % 60}`;\r\n        const minute = Math.floor(time / 60)  >=10 ?  Math.floor(time / 60) : `0${ Math.floor(time / 60)}`;\r\n        return `${minute} phút ${second} giây`;\r\n    }\r\n    const [totalTime, setTotalTime] = useState(0);\r\n    useEffect(() => {\r\n        setTotalTime(JSON.parse(sessionStorage.getItem('totalTime')));\r\n    }, [sessionStorage.getItem('totalTime')])\r\n    return (\r\n        <div>\r\n            <img \r\n            style={{width: '100%', height: '745px',}}\r\n            src='https://previews.123rf.com/images/lilu330/lilu3301612/lilu330161200073/68821802-beautiful-mountain-meadow-landscape-vector-cartoon-outdoor-illustration-sunny-day-background-for-gam.jpg'/>\r\n            <span className='game_over'>GAME OVER</span>\r\n            <span className='total_time_play_lose'>Tổng thời gian chơi: {caculatorTime(totalTime)}</span>\r\n            <button className='play_again' onClick={() => {\r\n                 navigate('/map');\r\n                 sessionStorage.removeItem('totalTime')\r\n            }}>Chơi lại</button>\r\n            <button className='exit_game' onClick={() => {\r\n                navigate('/start')\r\n                sessionStorage.removeItem('totalTime')\r\n            }}>Thoát</button>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nfunction MainLose () {\r\n    return (\r\n        <Base body={<Lose/>}/>\r\n    )\r\n}\r\nexport default MainLose;","import React, { useEffect } from 'react';\r\nimport { Base } from '../Base';\r\nimport headbreaker, {Painter} from 'headbreaker';\r\n\r\nfunction Test(props) {\r\n    console.log('headbreaker.Canvas', headbreaker.Canvas);\r\n    // useEffect(() => {\r\n    //     let pettoruti = new Image();\r\n    //     pettoruti.src = 'https://d25tv1xepz39hi.cloudfront.net/2016-01-31/files/1045.jpg';\r\n    //     pettoruti.onload = () => {\r\n    //       const validated = new headbreaker.Canvas('validated-canvas', {\r\n    //         width: 800, height: 900,\r\n    //         pieceSize: 80, proximity: 18,\r\n    //         borderFill: 8, strokeWidth: 1.5,\r\n    //         lineSoftness: 0.18, image: pettoruti,\r\n    //         // used to stick canvas to its current position\r\n    //         fixed: true,\r\n           \r\n    //       });\r\n    //       validated.autogenerate({\r\n    //         horizontalPiecesCount: 5,\r\n    //         verticalPiecesCount: 8\r\n    //       });\r\n    //       validated.puzzle.pieces[4].translate(63, -56);\r\n    //       validated.draw();\r\n    //       validated.attachSolvedValidator();\r\n    //       validated.onValid(() => {\r\n    //         setTimeout(() => {\r\n    //           document.getElementById('validated-canvas-overlay').setAttribute(\"class\", \"active\");\r\n    //         }, 1500);\r\n    //       })\r\n    //     }\r\n\r\n    // })\r\n\r\n\r\n    var body = <>\r\n        <canvas id='validated-canvas'></canvas>\r\n\r\n    </>;\r\n\r\n    return (\r\n        <Base body={body}>\r\n\r\n        </Base>\r\n    );\r\n}\r\n\r\nexport default Test;","// import {Base} from \"./Base\";\r\nimport Complete from \"./Complete/Complete\";\r\nimport { Question } from \"./Question\";\r\nimport Scan from \"./Scan/Scan\";\r\nimport MapComponent from './Map/index'\r\nimport { Start } from \"./Start\";\r\nimport Lose from \"./lose\";\r\nimport Test from \"./Test\";\r\nimport { Loading } from \"../components/Loading\";\r\n\r\nexport default [\r\n    {\r\n        path : '/',\r\n        element : <Start/>,\r\n        name : 'Home'\r\n    }, {\r\n        path : '/start',\r\n        element : <Start/>,\r\n        name : 'start'\r\n    }, {\r\n        path : '/question',\r\n        element : <Question/>,\r\n        name : 'question'\r\n    },\r\n    {\r\n        path : '/complete',\r\n        element : <Complete/>,\r\n        name : 'Complete'\r\n    },\r\n    {\r\n        path : '/scan',\r\n        element : <Scan/>,\r\n        name : 'scan'\r\n    },\r\n    {\r\n        path : '/map',\r\n        element : <MapComponent/>,\r\n        name : 'map'\r\n    },\r\n    {\r\n        path : '/lose',\r\n        element : <Lose/>,\r\n        name : 'lose'\r\n    },  {\r\n        path : '/test',\r\n        element : <Test/>,\r\n        name : 'lose'\r\n    }, {\r\n        path : '/loading',\r\n        element : <Loading/>,\r\n        name : 'lose'\r\n    },\r\n]","// import logo from './logo.svg';\r\nimport { BrowserRouter, Route, Routes, HashRouter } from 'react-router-dom';\r\n// import './App.css';\r\nimport 'animate.css';\r\nimport routes from './pages/routes';\r\n\r\n\r\nfunction App() {\r\n  return (\r\n      // <BrowserRouter>\r\n      //   <Routes>\r\n      //     {\r\n      //       routes.map(({ path, element }, index) => {\r\n      //         return (\r\n      //           <Route path={path} element={element} key={index} />\r\n      //         )\r\n      //       })\r\n      //     }\r\n      //   </Routes>\r\n      // </BrowserRouter>\r\n\r\n\r\n<HashRouter>\r\n<Routes>\r\n  {\r\n    routes.map(({ path, element }, index) => {\r\n      return (\r\n        <Route path={path} element={element} key={index} />\r\n      )\r\n    })\r\n  }\r\n</Routes>\r\n</HashRouter>\r\n\r\n\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\n\r\n\r\nReactDOM.render(\r\n    // <React.StrictMode>\r\n    <\r\n    App / >\r\n    // </React.StrictMode>,\r\n    ,\r\n    document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n// reportWebVitals();","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container-effect\":\"Hoaroi_container-effect__1IsWt\",\"confetti-container\":\"Hoaroi_confetti-container__3Ad9s\",\"confetti\":\"Hoaroi_confetti__24E-E\",\"confetti--animation-slow\":\"Hoaroi_confetti--animation-slow__1q0fN\",\"confetti-slow\":\"Hoaroi_confetti-slow__3U4kJ\",\"confetti--animation-medium\":\"Hoaroi_confetti--animation-medium__F6vj4\",\"confetti-medium\":\"Hoaroi_confetti-medium__2BfH4\",\"confetti--animation-fast\":\"Hoaroi_confetti--animation-fast__3Dpe7\",\"confetti-fast\":\"Hoaroi_confetti-fast__V2W8c\",\"checkmark\":\"Hoaroi_checkmark__tk8iD\"};"],"sourceRoot":""}